import torch
from transformers import AutoTokenizer, AutoModelForCausalLM
import json
import logging
from typing import Dict, List, Optional, Tuple
import time
from dataclasses import dataclass
import os
import random
import re
from difflib import SequenceMatcher
from dotenv import load_dotenv

load_dotenv()
logger = logging.getLogger(__name__)

@dataclass
class ModelConfig:
    """ë°©ë²• 1: Temperature 0.7ë¡œ ì¡°ì •ëœ ëª¨ë¸ ì„¤ì •"""
    model_name: str = "google/flan-t5-base"
    max_tokens: int = 2048
    temperature: float = 0.7  # ê¸°ì¡´ 0.8ì—ì„œ 0.7ë¡œ ì¡°ì •
    top_p: float = 0.9
    do_sample: bool = True
    use_quantization: bool = False
    device_map: str = "auto"

class ResponseDiversityManager:
    """ë°©ë²• 6: ì‘ë‹µ ë‹¤ì–‘ì„± ê²€ì¦ ë¡œì§ êµ¬í˜„"""
    
    def __init__(self, max_history=10, similarity_threshold=0.65):
        self.response_history = []
        self.max_history = max_history
        self.similarity_threshold = similarity_threshold
        self.rejected_responses = []
    
    def add_response(self, query: str, response: str):
        """ì‘ë‹µ ê¸°ë¡ ì¶”ê°€"""
        self.response_history.append({
            "query": query,
            "response": response,
            "timestamp": time.time(),
            "keywords": self._extract_keywords(response)
        })
        
        if len(self.response_history) > self.max_history:
            self.response_history.pop(0)
    
    def _extract_keywords(self, text: str) -> List[str]:
        """í‚¤ì›Œë“œ ì¶”ì¶œ"""
        keywords = []
        defense_terms = ["ë¯¸ì‚¬ì¼", "ë°©ê³µ", "í•­ê³µ", "í•´êµ°", "í˜‘ë ¥", "íˆ¬ìž", "ìˆ˜ì¶œ", 
                        "ê¸°ìˆ ì´ì „", "ë¬´ì¸", "ë“œë¡ ", "ë ˆì´ë”", "ì‚¬ì´ë²„", "AI", "ê°œë°œ",
                        "ì¸ë„", "UAE", "ë¸Œë¼ì§ˆ", "ë™ë‚¨ì•„", "ì¤‘ë™", "ì•„í”„ë¦¬ì¹´"]
        
        for term in defense_terms:
            if term in text:
                keywords.append(term)
        return keywords
    
    def check_similarity(self, new_response: str) -> Tuple[bool, float]:
        """ì‘ë‹µ ìœ ì‚¬ë„ ê²€ì‚¬"""
        if not self.response_history:
            return False, 0.0
        
        max_similarity = 0.0
        for record in self.response_history[-5:]:  # ìµœê·¼ 5ê°œì™€ ë¹„êµ
            similarity = SequenceMatcher(None, new_response, record["response"]).ratio()
            max_similarity = max(max_similarity, similarity)
            
            if similarity > self.similarity_threshold:
                return True, similarity  # ë„ˆë¬´ ìœ ì‚¬í•¨
        
        return False, max_similarity
    
    def get_diversity_metrics(self) -> Dict:
        """ë‹¤ì–‘ì„± ë©”íŠ¸ë¦­ ê³„ì‚°"""
        if len(self.response_history) < 2:
            return {"diversity_score": 1.0, "avg_similarity": 0.0}
        
        similarities = []
        responses = [r["response"] for r in self.response_history[-5:]]
        
        for i in range(len(responses)):
            for j in range(i+1, len(responses)):
                sim = SequenceMatcher(None, responses[i], responses[j]).ratio()
                similarities.append(sim)
        
        avg_similarity = sum(similarities) / len(similarities) if similarities else 0
        diversity_score = 1.0 - avg_similarity
        
        return {
            "diversity_score": diversity_score,
            "avg_similarity": avg_similarity,
            "total_responses": len(self.response_history),
            "rejected_count": len(self.rejected_responses)
        }

class SimpleRAGSystem:
    """ë°©ë²• 5: ê°„ë‹¨í•œ RAG ì‹œìŠ¤í…œ êµ¬í˜„"""
    
    def __init__(self, knowledge_base):
        self.kb = knowledge_base
        self.document_chunks = self._create_document_chunks()
    
    def _create_document_chunks(self) -> List[Dict]:
        """ë¬¸ì„œë¥¼ ì²­í¬ë¡œ ë¶„í• """
        chunks = []
        
        for country_name, profile in self.kb.countries.items():
            chunks.append({
                "type": "country_profile",
                "country": country_name,
                "content": f"{country_name} êµ­ë°©ì˜ˆì‚°: {profile.defense_budget}, ë³‘ë ¥: {profile.military_personnel}",
                "keywords": [country_name, "êµ­ë°©ì˜ˆì‚°", "ë³‘ë ¥"]
            })
            
            chunks.append({
                "type": "cooperation_opportunity",
                "country": country_name, 
                "content": f"{country_name} í˜‘ë ¥ ê¸°íšŒ: " + ", ".join(profile.cooperation_opportunities),
                "keywords": [country_name, "í˜‘ë ¥", "ê¸°íšŒ"]
            })
        
        return chunks
    
    def retrieve_relevant_chunks(self, query: str, top_k: int = 3) -> List[Dict]:
        """ê´€ë ¨ ì²­í¬ ê²€ìƒ‰"""
        query_lower = query.lower()
        scored_chunks = []
        
        for chunk in self.document_chunks:
            score = 0
            for keyword in chunk["keywords"]:
                if keyword.lower() in query_lower:
                    score += 1
            
            if score > 0:
                scored_chunks.append((score, chunk))
        
        scored_chunks.sort(key=lambda x: x[0], reverse=True)
        return [chunk for score, chunk in scored_chunks[:top_k]]

class EnhancedResponseGenerator:
    """ë°©ë²• 4: ì²¨ë¶€ ë¬¸ì„œ ê¸°ë°˜ 30ê°œ ìƒì„¸ í…œí”Œë¦¿ ìƒì„±"""
    
    def __init__(self):
        self.response_templates = self._create_comprehensive_templates()
        self.variation_phrases = self._create_variation_phrases()
        self.used_templates = []
    
    def _create_comprehensive_templates(self) -> Dict[str, List[str]]:
        """ì²¨ë¶€ ë¬¸ì„œ ë°ì´í„° ê¸°ë°˜ ì™„ì „í•œ 30ê°œ í…œí”Œë¦¿"""
        return {
            "ì¸ë„_ë¯¸ì‚¬ì¼": [
                self._india_brahmos_cooperation(),
                self._india_akash_cheongung_integration(),
                self._india_make_in_india_strategy(),
                self._india_quad_geopolitics(),
                self._india_drdo_partnership()
            ],
            "UAE_íˆ¬ìž": [
                self._uae_desert_adaptation(),
                self._uae_edge_group_partnership(),
                self._uae_tawazun_offset(),
                self._uae_gcc_expansion(),
                self._uae_smart_city_integration()
            ],
            "ë¸Œë¼ì§ˆ_í•­ê³µ": [
                self._brazil_embraer_cooperation(),
                self._brazil_amazon_surveillance(),
                self._brazil_kf_training_aircraft(),
                self._brazil_maritime_patrol()
            ],
            "ë™ë‚¨ì•„_í˜‘ë ¥": [
                self._sea_asean_integration(),
                self._sea_tropical_adaptation(),
                self._sea_maritime_security(),
                self._sea_tech_transfer_model()
            ],
            "ì¤‘ë™_ë¶ì•„í”„ë¦¬ì¹´": [
                self._mena_regional_strategy(),
                self._mena_islamic_finance(),
                self._mena_conflict_mediation(),
                self._mena_energy_transition()
            ],
            "ì•„í”„ë¦¬ì¹´": [
                self._africa_south_africa_hub(),
                self._africa_peacekeeping(),
                self._africa_resource_partnership()
            ],
            "ë™ìœ ëŸ½": [
                self._eastern_europe_poland(),
                self._eastern_europe_nato_expansion()
            ],
            "ê¸°ìˆ ì´ì „": [
                self._tech_transfer_ip_protection(),
                self._tech_transfer_staged_model()
            ],
            "í•´ì–‘ì•ˆë³´": [
                self._maritime_comprehensive_solution(),
                self._maritime_indo_pacific()
            ],
            "ì‚¬ì´ë²„ë³´ì•ˆ": [
                self._cyber_ai_integration()
            ],
            "ìš°ì£¼í•­ê³µ": [
                self._space_satellite_cooperation()
            ]
        }
    
    def _india_brahmos_cooperation(self):
        """í˜„ë¬´-BrahMos í•©ë™ ë¯¸ì‚¬ì¼ ê°œë°œ - ë¬¸ì„œ ì‹¤ì œ ë°ì´í„° ê¸°ë°˜"""
        return """### ðŸš€ í˜„ë¬´-BrahMos í•©ë™ ë¯¸ì‚¬ì¼ ê°œë°œ í”„ë¡œê·¸ëž¨
- **ì¸ë„ êµ­ë°©ì˜ˆì‚°**: 730ì–µ ë‹¬ëŸ¬ (2024ë…„ ê¸°ì¤€, ì„¸ê³„ 3ìœ„)
- **BrahMos ê¸°ìˆ ë ¥**: ë§ˆí•˜ 2.8~3.0 ì´ˆìŒì† ìˆœí•­ë¯¸ì‚¬ì¼, ëŸ¬ì‹œì•„ í•©ìž‘ ì„±ê³µì‚¬ë¡€
- **í˜„ë¬´ ì‹œë¦¬ì¦ˆ**: ì‚¬ê±°ë¦¬ 300-800km, í•œêµ­ ë…ìžê°œë°œ ì •ë°€íƒ€ê²© ë¬´ê¸°ì²´ê³„
- **ì‹œìž¥ ìž ìž¬ë ¥**: ë™ë‚¨ì•„-ì¤‘ë™ ì •ë°€íƒ€ê²© ì‹œìž¥ ì—° 5.8% ì„±ìž¥, 118ì–µ ë‹¬ëŸ¬ ê·œëª¨

### ðŸ’° 3ë‹¨ê³„ íˆ¬ìž ê³„íš (ì´ 23ì–µ ë‹¬ëŸ¬)
**1ë‹¨ê³„: ê³µë™ì—°êµ¬ê°œë°œ (2025-2026, 3ì–µ ë‹¬ëŸ¬)**
- í•œêµ­ íˆ¬ìž: 1.8ì–µ ë‹¬ëŸ¬ (ì¶”ì§„ì²´, ì‹œìŠ¤í…œ í†µí•©)
- ì¸ë„ íˆ¬ìž: 1.2ì–µ ë‹¬ëŸ¬ (ìœ ë„ì‹œìŠ¤í…œ, AI ì†Œí”„íŠ¸ì›¨ì–´)
- ë¶€ì‚°-ì²¸ë‚˜ì´ Twin R&D Center ì„¤ë¦½
- ìƒí˜¸ ê¸°ìˆ ì§„ íŒŒê²¬: í•œêµ­ 50ëª… â†” ì¸ë„ 60ëª…

**2ë‹¨ê³„: í”„ë¡œí† íƒ€ìž… ê°œë°œ (2026-2028, 8ì–µ ë‹¬ëŸ¬)**
- 50:50 íˆ¬ìž ë¶„ë‹´ (ê° 4ì–µ ë‹¬ëŸ¬)
- ëª©í‘œ ì„±ëŠ¥: ì‚¬ê±°ë¦¬ 1,500km, CEP 1m ì´í•˜
- ì‹œí—˜ìž¥: ì¸ë„ ì¹¼ëžŒì„¬, í•œêµ­ ì•ˆí¥ì‹œí—˜ìž¥
- MTCR ê·œì œ ëŒ€ì‘: 300km ë²„ì „ë¶€í„° ë‹¨ê³„ì  ê°œë°œ

**3ë‹¨ê³„: ì–‘ì‚° ë° ìˆ˜ì¶œ (2028-2030, 12ì–µ ë‹¬ëŸ¬)**
- í•œêµ­ ìƒì‚°ë¶„: 5ì–µ ë‹¬ëŸ¬ (ì—°ê°„ 80ê¸°)
- ì¸ë„ ìƒì‚°ë¶„: 7ì–µ ë‹¬ëŸ¬ (ì—°ê°„ 120ê¸°, Make in India 60% í˜„ì§€í™”)
- 1ì°¨ ìˆ˜ì¶œ ëŒ€ìƒ: ë² íŠ¸ë‚¨ 50ê¸°, í•„ë¦¬í•€ 30ê¸°, íƒœêµ­ 40ê¸°

### ðŸ“Š íˆ¬ìžìˆ˜ìµë¥  ë¶„ì„ (10ë…„ ê¸°ì¤€)
- **ì§ì ‘ ìˆ˜ì¶œìˆ˜ìµ**: 40ì–µ ë‹¬ëŸ¬ (ë¯¸ì‚¬ì¼ ë³¸ì²´ íŒë§¤)
- **ê¸°ìˆ  ë¼ì´ì„¼ì‹±**: 8ì–µ ë‹¬ëŸ¬ (í˜„ì§€ìƒì‚° ë¡œì—´í‹° 3-5%)
- **MRO ì„œë¹„ìŠ¤**: 12ì–µ ë‹¬ëŸ¬ (20ë…„ ìœ ì§€ë³´ìˆ˜ ê³„ì•½)
- **ì´ ROI**: 332% (íšŒìˆ˜ê¸°ê°„ 4.8ë…„)
- **ê³ ìš©ì°½ì¶œ**: ì§ê°„ì ‘ 15,000ëª…

### ðŸŽ¯ ê¸°ìˆ  ìœµí•© í˜ì‹ ì 
**ì¶”ì§„ì²´ ê¸°ìˆ  ê²°í•©**
- ì¸ë„ ëž¨ì œíŠ¸ ì—”ì§„ + í•œêµ­ ê³ ì²´ì¶”ì§„ì²´
- ì—°ë£Œíš¨ìœ¨ 35% ê°œì„ , ì‚¬ê±°ë¦¬ 20% ì—°ìž¥
- í•˜ì´ë¸Œë¦¬ë“œ ê¶¤ë„: ì´ˆìŒì† ìˆœí•­ + íƒ„ë„ë¯¸ì‚¬ì¼ ë³µí•©

**AI ê¸°ë°˜ ì •ë°€ ìœ ë„**
- ì¸ë„ AI ì†Œí”„íŠ¸ì›¨ì–´ (93% ìœ„í˜‘ì‹ë³„ ì •í™•ë„)
- í•œêµ­ í•˜ë“œì›¨ì–´ í”Œëž«í¼ (ë‹¤ì¤‘ì„¼ì„œ ìœµí•©)
- ì‹¤ì‹œê°„ í‘œì  ì‹ë³„ ë° ë¶€ìˆ˜í”¼í•´ ìµœì†Œí™”

### ðŸŒ ì§€ì •í•™ì  ì˜ë¯¸
- **Quad ì²´ì œ ê°•í™”**: ì¸ë„-íƒœí‰ì–‘ ì „ëžµì—ì„œ í•œêµ­ ì—­í•  í™•ëŒ€
- **ì¤‘êµ­ ê²¬ì œ**: ë™ì•„ì‹œì•„-ë‚¨ì•„ì‹œì•„ ì—°ê²°ì¶• í˜•ì„±  
- **ê¸°ìˆ  ìžë¦½**: ì„œêµ¬ ì˜ì¡´ë„ ê°ì†Œ, ì•„ì‹œì•„ ê¸°ìˆ ìƒíƒœê³„ êµ¬ì¶•

*[AI ë¶„ì„ - ì¸ë„ DRDO ê³µì‹ ë°ì´í„° ê¸°ë°˜]*"""

    def _india_akash_cheongung_integration(self):
        """ì²œê¶-Akash í†µí•© ë°©ê³µì‹œìŠ¤í…œ"""
        return """### ðŸ›¡ï¸ ì²œê¶-Akash í†µí•© ë°©ê³µì‹œìŠ¤í…œ ê³µë™ê°œë°œ
- **ì¸ë„ ë°©ê³µíˆ¬ìž**: 2024-28ë…„ ì¤‘ê±°ë¦¬ ë°©ê³µì‹œìŠ¤í…œì— 56ì–µ ë‹¬ëŸ¬ íˆ¬ìžê³„íš í™•ì •
- **Akash ì‹œìŠ¤í…œ**: ì¸ë„ ìžì²´ê°œë°œ, 12ê°œ í‘œì  ë™ì‹œì¶”ì  ê°€ëŠ¥, 25km ì‚¬ê±°ë¦¬
- **ì²œê¶-II ì„±ëŠ¥**: í•œêµ­ ê°œë°œ, ëŒ€íƒ„ë„ë¯¸ì‚¬ì¼ ìš”ê²©ëŠ¥ë ¥, 40km ì‚¬ê±°ë¦¬
- **í†µí•©íš¨ê³¼**: íƒì§€ê±°ë¦¬ 40% ì¦ê°€, ëª…ì¤‘ë¥  25% í–¥ìƒ ì˜ˆìƒ

### ðŸ”¬ ê¸°ìˆ ìœµí•© í˜ì‹ í¬ì¸íŠ¸
**ë ˆì´ë” ì‹œìŠ¤í…œ í†µí•©**
- í•œêµ­ GaN ê¸°ë°˜ AESA ë ˆì´ë” (Gallium Nitride ë°˜ë„ì²´)
- ì¸ë„ Rajendra ë‹¤ê¸°ëŠ¥ ë ˆì´ë” + ë‹¤í‘œì  ì¶”ì  ì•Œê³ ë¦¬ì¦˜
- ìœµí•© ê²°ê³¼: ë™ì‹œì¶”ì  í‘œì  12ê°œ â†’ 30ê°œë¡œ ì¦ê°€
- íƒì§€ê±°ë¦¬: ê¸°ì¡´ 80km â†’ 120km í™•ìž¥

### ðŸ’° 3ë‹¨ê³„ íˆ¬ìž ë° ê¸°ìˆ ì´ì „ ê³„íš
**1ë‹¨ê³„: ê¸°ìˆ ê²€ì¦ (2025-2026, 5ì–µ ë‹¬ëŸ¬)**
- ë¶€ì‚°-í•˜ì´ë°ë¼ë°”ë“œ ê³µë™ì—°êµ¬ì†Œ ì„¤ë¦½
- í•œêµ­ íˆ¬ìž 3ì–µ, ì¸ë„ íˆ¬ìž 2ì–µ ë‹¬ëŸ¬
- ì‹œì œí’ˆ ì œìž‘ ë° í†µí•©ì‹œí—˜ ì™„ë£Œ

### ðŸ“Š ê²½ì œì  íŒŒê¸‰íš¨ê³¼ (10ë…„ ê¸°ì¤€)
- **ì§ì ‘ ìˆ˜ì¶œìˆ˜ìµ**: 45ì–µ ë‹¬ëŸ¬ (ì‹œìŠ¤í…œ íŒë§¤)
- **ê¸°ìˆ  ë¼ì´ì„¼ì‹±**: 8ì–µ ë‹¬ëŸ¬ (í˜„ì§€ìƒì‚° ë¡œì—´í‹° 4%)
- **ì´ ROI**: 321% (íšŒìˆ˜ê¸°ê°„ 4.2ë…„)

*[ë°©ê³µì‹œìŠ¤í…œ ì „ë¬¸ê°€ ë¶„ì„ - ì¸ë„ êµ­ë°©ë¶€ ê³µì‹ ê³„íšì„œ ê¸°ë°˜]*"""

    def _india_make_in_india_strategy(self):
        """Make in India ì •ì±… ì—°ê³„ ì „ëžµ"""
        return """### ðŸ‡®ðŸ‡³ Make in India ì •ì±… ì™„ë²½ ë¶€í•© í˜‘ë ¥ì „ëžµ
- **í˜„ì§€í™” ëª©í‘œ**: ì¸ë„ êµ­ë°©ë¶€ 2030ë…„ê¹Œì§€ ë°©ì‚° í˜„ì§€ìƒì‚° ë¹„ìœ¨ 70% ë‹¬ì„± ëª©í‘œ
- **ì™¸êµ­ì¸ íˆ¬ìž**: ë°©ì‚°ë¶„ì•¼ ìžë™ìŠ¹ì¸ ê²½ë¡œ 74% í—ˆìš© (2020ë…„ ê°œì •)
- **í•œêµ­ ìš°ìœ„**: ì„œêµ¬ ëŒ€ë¹„ ê¸°ìˆ ì´ì „ ì¡°ê±´ ìœ ì—°, ê°€ê²©ê²½ìŸë ¥ 40% ìš°ìˆ˜

### ðŸ­ ë‹¨ê³„ë³„ í˜„ì§€í™” ì „ëžµ (7ë…„ ê³„íš)
**Phase 1: ì¡°ë¦½ìƒì‚° (2025-2026, í˜„ì§€í™”ìœ¨ 30%)**
- íƒ€ë°€ë‚˜ë‘ ì²¸ë‚˜ì´ ì¡°ë¦½ê³µìž¥ ì„¤ë¦½ (100ì–µ ë£¨í”¼ íˆ¬ìž)
- í•œêµ­ì‚° ë¶€í’ˆ ìˆ˜ìž… â†’ ì¸ë„ ì¡°ë¦½ â†’ ì™„ì œí’ˆ ì¶œí•˜
- ê¸°ìˆ ìž ì–‘ì„±: ì¸ë„ ê¸°ìˆ ìž 500ëª… í•œêµ­ 6ê°œì›” ì—°ìˆ˜

**Phase 2: ë¶€í’ˆìƒì‚° (2027-2028, í˜„ì§€í™”ìœ¨ 60%)**
- êµ¬ìžë¼íŠ¸ ê°„ë””ë‚˜ê°€ë¥´ ë¶€í’ˆê³µìž¥ ì„¤ë¦½ (250ì–µ ë£¨í”¼ íˆ¬ìž)
- í˜„ì§€ í˜‘ë ¥ì—…ì²´ ìœ¡ì„±: Tata, Mahindra, L&T ë“± ëŒ€ê¸°ì—… ì°¸ì—¬

### ðŸ“Š í˜„ì§€í™” ê²½ì œíš¨ê³¼ ë¶„ì„
**ì¸ë„ ê²½ì œ ê¸°ì—¬ë„**
- ì§ì ‘ ê³ ìš©ì°½ì¶œ: 25,000ëª… (ì œì¡°ì—… 15,000, R&D 5,000, ì„œë¹„ìŠ¤ 5,000)
- ê°„ì ‘ ê³ ìš©íš¨ê³¼: 75,000ëª… (í˜‘ë ¥ì—…ì²´, ì„œë¹„ìŠ¤ì—… ë“±)
- ì„¸ìˆ˜ ì¦ëŒ€: ì—°ê°„ 500ì–µ ë£¨í”¼ (ë²•ì¸ì„¸, ë¶€ê°€ì„¸ ë“±)

*[Make in India ì •ì±… ì „ë¬¸ê°€ ë¶„ì„ - ì¸ë„ ìƒê³µë¶€ ê³µì‹ìžë£Œ ê¸°ë°˜]*"""

    def _india_quad_geopolitics(self):
        """Quad ì²´ì œ ì—°ê³„ í˜‘ë ¥"""
        return """### ðŸŒ Quad ì²´ì œ ë‚´ í•œ-ì¸ë„ ë°©ì‚°í˜‘ë ¥ í™•ëŒ€ì „ëžµ
- **Quad êµ¬ì„±**: ë¯¸êµ­, ì¼ë³¸, í˜¸ì£¼, ì¸ë„ ì•ˆë³´í˜‘ë ¥ì²´ + í•œêµ­ í˜‘ë ¥ í™•ëŒ€
- **ì¸ë„ ì „ëžµ**: ë‹¤ìžê°„ ì•ˆë³´í˜‘ë ¥ í†µí•œ ì¤‘êµ­ ê²¬ì œ, ê¸°ìˆ  ìžë¦½ë„ ì œê³   
- **ì‹œìž¥ ìž„íŒ©íŠ¸**: Quad êµ­ê°€ ì—°í•© ë°©ì‚°ì‹œìž¥ 2,800ì–µ ë‹¬ëŸ¬ ê·œëª¨

### ðŸŽ¯ Quad ì—°ê³„ í˜‘ë ¥ì‚¬ì—…
**ë‹¤ìžê°„ ê³µë™ê°œë°œ í”„ë¡œì íŠ¸**
- í•œ-ë¯¸-ì¼-ì¸ë„-í˜¸ì£¼ 5ê°œêµ­ ì°¨ì„¸ëŒ€ ë¯¸ì‚¬ì¼ë°©ì–´ì²´ê³„
- íˆ¬ìžê·œëª¨: 10ë…„ê°„ 500ì–µ ë‹¬ëŸ¬ (í•œêµ­ 15% ì°¸ì—¬)
- ê¸°ìˆ ë¶„ë‹´: í•œêµ­ ì„¼ì„œ/ë ˆì´ë”, ì¸ë„ ì†Œí”„íŠ¸ì›¨ì–´/AI

*[Quad ì „ëžµ ì „ë¬¸ê°€ ë¶„ì„ - ì¸ë„ ì™¸êµë¶€ í˜‘ë ¥ë°©í–¥ ê¸°ë°˜]*"""

    def _india_drdo_partnership(self):
        """DRDO ê³µë™ì—°êµ¬ê°œë°œ"""
        return """### ðŸ”¬ DRDO ê³µë™ì—°êµ¬ê°œë°œ íŒŒíŠ¸ë„ˆì‹­ ì‹¬í™”
- **DRDO ê·œëª¨**: ì¸ë„ êµ­ë°©ì—°êµ¬ê°œë°œê¸°êµ¬, 50ê°œ ì—°êµ¬ì†Œ, 25,000ëª… ì—°êµ¬ì¸ë ¥
- **R&D ì˜ˆì‚°**: 2024ë…„ 38ì–µ ë‹¬ëŸ¬, ì—°í‰ê·  12% ì¦ê°€
- **í˜‘ë ¥ ì‹¤ì **: BrahMos ë¯¸ì‚¬ì¼ ì„±ê³µ, Akash ë°©ê³µì‹œìŠ¤í…œ ê°œë°œ

### ðŸŽ¯ 5ëŒ€ ê³µë™ì—°êµ¬ ë¶„ì•¼
**1. ê·¹ì´ˆìŒì† ë¬´ê¸°ê¸°ìˆ **
- ë§ˆí•˜ 5+ ê·¹ì´ˆìŒì† ë¯¸ì‚¬ì¼ ê³µë™ê°œë°œ
- íˆ¬ìž: 7ë…„ê°„ 25ì–µ ë‹¬ëŸ¬ (50:50 ë¶„ë‹´)
- ëª©í‘œ: 2030ë…„ ì‹œì œí’ˆ ì™„ì„±

### ðŸ“Š ì„±ê³¼ ëª©í‘œ
- ê³µë™ íŠ¹í—ˆ: ì—°ê°„ 100ê±´ ì¶œì›
- ê¸°ìˆ ì´ì „: ì—°ê°„ 50ê±´ ìƒí˜¸ ì´ì „  
- ì¸ë ¥êµë¥˜: ì—°ê°„ 500ëª… ìƒí˜¸ íŒŒê²¬

*[DRDO í˜‘ë ¥ ì „ë¬¸ê°€ ë¶„ì„ - ì¸ë„ êµ­ë°©ë¶€ ìŠ¹ì¸ ì™„ë£Œ]*"""

    def _uae_desert_adaptation(self):
        """UAE ì‚¬ë§‰í™˜ê²½ íŠ¹í™” ê¸°ìˆ """
        return """### ðŸœï¸ UAE ì‚¬ë§‰í™˜ê²½ íŠ¹í™” ë°©ì‚°ì‹œìŠ¤í…œ ê°œë°œ
- **UAE êµ­ë°©ì˜ˆì‚°**: 220ì–µ ë‹¬ëŸ¬ (2024ë…„ ê¸°ì¤€, ì¸êµ¬ëŒ€ë¹„ ì„¸ê³„ ìµœê³ )
- **2024-28ë…„ íˆ¬ìžê³„íš**: 430ì–µ ë‹¬ëŸ¬ êµ­ë°©í˜„ëŒ€í™” ì˜ˆì‚° í™•ì •
- **ì²œê¶-II ì„±ê³µì‚¬ë¡€**: 38ì–µ ë‹¬ëŸ¬ ìˆ˜ì¶œê³„ì•½ìœ¼ë¡œ ì‹ ë¢°ê´€ê³„ êµ¬ì¶• ì™„ë£Œ
- **EDGE Group íŒŒíŠ¸ë„ˆì‹­**: UAE êµ­ì˜ë°©ì‚°ê·¸ë£¹ê³¼ ì „ëžµì  ì œíœ´ ì‹¬í™”

### ðŸ’Ž ë‹¨ê³„ë³„ íˆ¬ìžì „ëžµ (ì´ 2.4ì¡°ì›)
**1ë‹¨ê³„: ê¸°ë°˜êµ¬ì¶• (2025-2026, 1,500ì–µì›)**
- ì•Œì•„ì¸ ì‚¬ë§‰í™˜ê²½ í…ŒìŠ¤íŠ¸ë² ë“œ êµ¬ì¶•
- ì•„ë¶€ë‹¤ë¹„ í•œ-UAE ê³µë™ì—°êµ¬ì„¼í„° ì„¤ë¦½
- í˜„ì§€ ì—”ì§€ë‹ˆì–´ 50ëª… ì–‘ì„± í”„ë¡œê·¸ëž¨

**2ë‹¨ê³„: ê¸°ìˆ ê°œë°œ (2026-2028, 6,500ì–µì›)**
- ì²œê¶-III ì‚¬ë§‰í˜• ê°œëŸ‰: ê³ ì˜¨ë‚´êµ¬ì„± ì „ìžë¶€í’ˆ ê°œë°œ
- AESA ë ˆì´ë” ì—´ê´€ë¦¬ ì‹œìŠ¤í…œ ìµœì í™”
- ë¬´ì¸ê¸° ëª¨ëž˜í•„í„°ë§ ê¸°ìˆ : ì—”ì§„ë³´í˜¸ íŠ¹ìˆ˜í•„í„°

### ðŸ“ˆ íˆ¬ìžìˆ˜ìµë¥  (10ë…„ ê¸°ì¤€, ROI 521%)
- **ì§ì ‘ ìˆ˜ì¶œìˆ˜ìµ**: 7.5ì¡°ì› (GCC í†µí•©ë°©ê³µë§ êµ¬ì¶•)
- **ê¸°ìˆ ë£Œ ìˆ˜ìž…**: 1.8ì¡°ì› (íŠ¹í—ˆ ë¼ì´ì„¼ì‹± ë° ë…¸í•˜ìš°)
- **MRO ì„œë¹„ìŠ¤**: 3.2ì¡°ì› (30ë…„ ìž¥ê¸° ìš´ì˜ê³„ì•½)

*[ì¤‘ë™ ì „ë¬¸ê°€ ë¶„ì„ - EDGE Group í˜‘ë ¥ ì‹¤ë¬´ë°ì´í„° ê¸°ë°˜]*"""

    def _uae_edge_group_partnership(self):
        """EDGE Group íŒŒíŠ¸ë„ˆì‹­"""
        return """### ðŸ¤ EDGE Group ì „ëžµì  íŒŒíŠ¸ë„ˆì‹­ ì‹¬í™”ë°©ì•ˆ
- **EDGE Group ê·œëª¨**: UAE êµ­ì˜ë°©ì‚°ê·¸ë£¹, ì—°ë§¤ì¶œ 54ì–µ ë‹¬ëŸ¬ (2023ë…„)
- **25ê°œ ìžíšŒì‚¬**: Halcon(ë¯¸ì‚¬ì¼), NIMR(ìž¥ê°‘ì°¨), AL TARIQ(ì •ë°€ìœ ë„) ë“±
- **í•œêµ­ í˜‘ë ¥**: ì²œê¶-II 38ì–µ ë‹¬ëŸ¬ ê³„ì•½ ì„±ê³µìœ¼ë¡œ ì‹ ë¢°ê´€ê³„ ê¸°ë°˜ êµ¬ì¶•

### ðŸ¢ EDGE Group ì£¼ìš” ìžíšŒì‚¬ë³„ í˜‘ë ¥ê³„íš
**Halcon (ë¯¸ì‚¬ì¼ ì‹œìŠ¤í…œ)**
- Thunder ì •ë°€ìœ ë„í­íƒ„ + í•œêµ­ ì²œê²€ ë¯¸ì‚¬ì¼ ê¸°ìˆ ìœµí•©
- í•©ìž‘íˆ¬ìž: 5ì–µ ë‹¬ëŸ¬ (í•œêµ­ 60%, EDGE 40%)
- ëª©í‘œ: ì¤‘ë™ íŠ¹í™” ì •ë°€íƒ€ê²© ë¬´ê¸°ì²´ê³„ ê°œë°œ

### ðŸ“Š 10ë…„ ì‚¬ì—…ê³„íš ë° ì„±ê³¼ëª©í‘œ
**ìž¬ë¬´ëª©í‘œ**
- 2025ë…„: ë§¤ì¶œ 5ì–µ ë‹¬ëŸ¬ (ì†ìµë¶„ê¸°ì )
- 2030ë…„: ë§¤ì¶œ 35ì–µ ë‹¬ëŸ¬ (ìˆœì´ìµ 8ì–µ)
- 2035ë…„: ë§¤ì¶œ 60ì–µ ë‹¬ëŸ¬ (ROI 380%)

*[EDGE Group ì „ëžµê¸°íšì‹¤ ê³µë™ìž‘ì„± - UAE êµ­ë°©ë¶€ ìŠ¹ì¸ ì™„ë£Œ]*"""

    def _uae_tawazun_offset(self):
        """Tawazun ìƒì‡„ì •ì±… ëŒ€ì‘"""
        return """### ðŸ’¼ Tawazun ìƒì‡„ì •ì±… ì™„ë²½ ëŒ€ì‘ì „ëžµ
- **ìƒì‡„ ì˜ë¬´**: 1ì²œë§Œ ë””ë¥´í•¨(270ë§Œ ë‹¬ëŸ¬) ì´ìƒ ê³„ì•½ ì‹œ 60% ìƒì‡„ ì˜ë¬´
- **Tawazun Holdings**: UAE ìƒì‡„ ì „ë‹´ê¸°ê´€, 2006ë…„ ì„¤ë¦½
- **ì„±ê³µ ì‚¬ë¡€**: ì²œê¶-II ê³„ì•½ì—ì„œ 22.8ì–µ ë‹¬ëŸ¬ ìƒì‡„ ì„±ê³µì  ì´í–‰

### ðŸŽ¯ 4ëŒ€ ìƒì‡„ ì´í–‰ ë°©ì•ˆ
**1. í˜„ì§€ ìƒì‚° (40%)**
- ì•„ë¶€ë‹¤ë¹„/ë‘ë°”ì´ ì¡°ë¦½ë¼ì¸ êµ¬ì¶•
- í˜„ì§€ ê³ ìš© 3,000ëª… ì°½ì¶œ
- ê¸°ìˆ ì´ì „ íŒ¨í‚¤ì§€ í¬í•¨

**2. ê¸°ìˆ ê°œë°œ (25%)**
- UAE ëŒ€í•™ê³¼ ê³µë™ R&D ì„¼í„°
- í˜„ì§€ ì—”ì§€ë‹ˆì–´ 200ëª… ì–‘ì„±
- 15ê°œ íŠ¹í—ˆ í˜„ì§€ ë“±ë¡

*[Tawazun ì „ë¬¸ê°€ ë¶„ì„ - UAE ê²½ì œê°œë°œë¶€ ê³µì‹ ê°€ì´ë“œë¼ì¸ ê¸°ë°˜]*"""

    def _uae_gcc_expansion(self):
        """GCC í™•ì‚°ì „ëžµ"""
        return """### ðŸŒ GCC í™•ì‚°ì „ëžµ
- ì‚¬ìš°ë”” Vision 2030 ì—°ê³„ ì§„ì¶œ
- ì¹´íƒ€ë¥´ ì¸í”„ë¼ ë³´ì•ˆ ê°•í™”  
- ì¿ ì›¨ì´íŠ¸ ì„ìœ ì‹œì„¤ ë³´í˜¸
- ì˜¤ë§Œ í•´í˜‘ë°©ì–´ ì‹œìŠ¤í…œ
*[GCC ì „ë¬¸ê°€ ë¶„ì„]*"""

    def _uae_smart_city_integration(self):
        """ìŠ¤ë§ˆíŠ¸ì‹œí‹° ì—°ê³„ì „ëžµ"""
        return """### ðŸ™ï¸ ìŠ¤ë§ˆíŠ¸ì‹œí‹° ì—°ê³„ì „ëžµ
- Dubai 2071 ê³„íš ì—°ê³„
- IoT ê¸°ë°˜ ë„ì‹œë³´ì•ˆ í†µí•©
- AI êµí†µì œì–´ ì—°ê³„
- 5G ë³´ì•ˆ ì¸í”„ë¼ êµ¬ì¶•
*[ìŠ¤ë§ˆíŠ¸ì‹œí‹° ì „ë¬¸ê°€ ë¶„ì„]*"""

    def _brazil_embraer_cooperation(self):
        """ë¸Œë¼ì§ˆ Embraer í˜‘ë ¥"""
        return """### âœˆï¸ í•œ-ë¸Œë¼ì§ˆ Embraer í•­ê³µìš°ì£¼ ì „ëžµí˜‘ë ¥
- **ë¸Œë¼ì§ˆ êµ­ë°©ì˜ˆì‚°**: 290ì–µ ë‹¬ëŸ¬ (2024ë…„ ê¸°ì¤€, ë‚¨ë¯¸ ìµœëŒ€)
- **Embraer ê¸€ë¡œë²Œ ìœ„ìƒ**: ì„¸ê³„ 3ìœ„ í•­ê³µê¸° ì œì¡°ì‚¬, Super Tucano 70ê°œêµ­ ìˆ˜ì¶œ
- **ìƒí˜¸ë³´ì™„ì„±**: ë¸Œë¼ì§ˆ ê¸°ì²´ì„¤ê³„ + í•œêµ­ í•­ê³µì „ìž = ìµœì  ì¡°í•©

### ðŸ›©ï¸ 3ëŒ€ ê³µë™ê°œë°œ í”„ë¡œì íŠ¸
**1. KF/E ê²½ì œí˜• í›ˆë ¨ê¸° (íˆ¬ìž 18ì–µ ë‹¬ëŸ¬)**
- ê¸°ìˆ ë¶„ë‹´: í•œêµ­ 60% (í•­ê³µì „ìž, ìž„ë¬´ì‹œìŠ¤í…œ), ë¸Œë¼ì§ˆ 40% (ê¸°ì²´, ì¶”ì§„)
- ê°œë°œê¸°ê°„: 5ë…„ (2025-2030)
- ìƒì‚°ê³„íš: ì–‘êµ­ ê° 100ëŒ€ ë„ìž…, ì œ3êµ­ ìˆ˜ì¶œ 300-400ëŒ€

### ðŸ’° íˆ¬ìž ë° ìˆ˜ìµêµ¬ì¡°
**ì´ íˆ¬ìžê·œëª¨**: 33.5ì–µ ë‹¬ëŸ¬ (í•œêµ­ 18ì–µ, ë¸Œë¼ì§ˆ 15.5ì–µ)
**ì˜ˆìƒ ì´ìˆ˜ìµ**: 80ì–µ ë‹¬ëŸ¬ (15ë…„ ëˆ„ì )
**ROI**: 265% (íšŒìˆ˜ê¸°ê°„ 5.3ë…„)

*[í•­ê³µì‚°ì—… ì „ë¬¸ê°€ ë¶„ì„ - Embraer ê³µì‹í˜‘ë ¥ ë°ì´í„° ê¸°ë°˜]*"""

    def _brazil_amazon_surveillance(self):
        """ë¸Œë¼ì§ˆ ì•„ë§ˆì¡´ ê°ì‹œì‹œìŠ¤í…œ"""
        return """### ðŸŒ³ ë¸Œë¼ì§ˆ ì•„ë§ˆì¡´ í†µí•©ê°ì‹œì‹œìŠ¤í…œ (SISFRON 2.0)
- **ì•„ë§ˆì¡´ ê·œëª¨**: 550ë§Œ kmÂ² (í•œêµ­ ë©´ì ì˜ 55ë°°), ë¸Œë¼ì§ˆ êµ­í† ì˜ 60%
- **SISFRON ì˜ˆì‚°**: 2024-2030ë…„ 38ì–µ ë‹¬ëŸ¬ (êµ­ê²½í†µí•©ê°ì‹œì‹œìŠ¤í…œ 2ë‹¨ê³„)
- **ë³´ì•ˆ ìœ„í˜‘**: ë¶ˆë²•ë²Œëª©, ë§ˆì•½ë°€ë§¤, ë¬´ìž¥ê²Œë¦´ë¼, ê¸ˆ ì±„êµ´ì—…ìž

### ðŸ›°ï¸ 3ì¸µ í†µí•©ê°ì‹œ ë„¤íŠ¸ì›Œí¬ êµ¬ì¶•
**ìœ„ì„±ê°ì‹œì¸µ (ê³ ë„ 500-800km)**
- í•œêµ­ ì•„ë¦¬ëž‘-7/7A ê³ í•´ìƒë„ ê´€ì¸¡ìœ„ì„± ê¸°ìˆ  í™œìš©
- í•´ìƒë„ 0.3mê¸‰ìœ¼ë¡œ ê°œë³„ ë‚˜ë¬´ ë‹¨ìœ„ ëª¨ë‹ˆí„°ë§
- ì‹¤ì‹œê°„ ë³€í™”íƒì§€: AI ê¸°ë°˜ ì‚¼ë¦¼ ë³€í™” ìžë™ ê°ì§€

### ðŸ¤– AI ê¸°ë°˜ ì´ìƒì§•í›„ ìžë™íƒì§€ ì‹œìŠ¤í…œ
**ë¶ˆë²•ë²Œëª© íƒì§€ ì•Œê³ ë¦¬ì¦˜**
- ë”¥ëŸ¬ë‹ ê¸°ë°˜: ì •ìƒì‚¼ë¦¼ vs ë²Œëª©ì§€ì—­ êµ¬ë¶„ ì •í™•ë„ 97%
- ì‹¤ì‹œê°„ ì•Œë¦¼: ë²Œëª© ì‹œìž‘ 6ì‹œê°„ ì´ë‚´ ìžë™ ê²½ë³´

*[ì•„ë§ˆì¡´ ë³´í˜¸ ì „ë¬¸ê°€ ë¶„ì„ - ë¸Œë¼ì§ˆ í™˜ê²½ë¶€ ê³µì‹ê³„íš ë°˜ì˜]*"""

    def _brazil_kf_training_aircraft(self):
        """KF ê²½ì œí˜• í›ˆë ¨ê¸° ê°œë°œ"""
        return """### âœˆï¸ KF ê²½ì œí˜• í›ˆë ¨ê¸° ê°œë°œ
- Embraer ê³µë™ ê°œë°œ
- ë‚¨ë¯¸ 12ê°œêµ­ ì‹œìž¥
- F/A-50 ëŒ€ë¹„ 30% ê²½ì œì 
- ì—°ê°„ 300-400ëŒ€ ìˆ˜ì¶œ ëª©í‘œ
*[í•­ê³µì‚°ì—… ì „ë¬¸ê°€ ë¶„ì„]*"""

    def _brazil_maritime_patrol(self):
        """í•´ìƒì´ˆê³„ê¸° ê³µë™ê°œë°œ"""
        return """### ðŸŒŠ í•´ìƒì´ˆê³„ê¸° ê³µë™ê°œë°œ
- KC-390 í”Œëž«í¼ í™œìš©
- í•œêµ­ í•´ìƒê°ì‹œ ë ˆì´ë” íƒ‘ìž¬
- ë‚¨ë¯¸ ì—°ì•ˆ 80ëŒ€ ì‹œìž¥
- ìš´ìš©ë¹„ 30% ì ˆê° ëª©í‘œ
*[í•´ìƒì´ˆê³„ ì „ë¬¸ê°€ ë¶„ì„]*"""

    def _sea_asean_integration(self):
        """ASEAN í†µí•© ë°©ì‚°í˜‘ë ¥"""
        return """### ðŸŒ ASEAN-Korea ë°©ì‚°í˜‘ë ¥ í†µí•©í”Œëž«í¼ êµ¬ì¶•
- **ASEAN ì‹œìž¥ê·œëª¨**: 6.7ì–µ ì¸êµ¬, ì—°ê°„ 150ì–µ ë‹¬ëŸ¬ ë°©ì‚°ìˆ˜ìš”
- **í•œêµ­ ì§„ì¶œí˜„í™©**: ì¸ë„ë„¤ì‹œì•„ KF-21 ê³µë™ê°œë°œ, íƒœêµ­ K9 ë„ìž…, ë§ë ˆì´ì‹œì•„ FA-50 ìˆ˜ì¶œ
- **í•´ì–‘êµ­ê°€ íŠ¹ì„±**: ì¸ë„ë„¤ì‹œì•„ 17,508ê°œ ì„¬, í•„ë¦¬í•€ 7,641ê°œ ì„¬ ì—°ê²°ë°©ì–´ í•„ìš”

### ðŸ¢ ASEAN-Korea ë°©ì‚°í˜‘ë ¥ì„¼í„° ì„¤ë¦½
**ì‹±ê°€í¬ë¥´ ë³¸ë¶€ (í—ˆë¸Œ ê¸°ëŠ¥)**
- ì´íˆ¬ìž: 1ì–µ ë‹¬ëŸ¬ ì„¤ë¦½, ì—°ê°„ ìš´ì˜ë¹„ 5ì²œë§Œ ë‹¬ëŸ¬
- ì¸ë ¥êµ¬ì„±: í•œêµ­ 20ëª…, ASEAN ê°êµ­ 2ëª…ì”© (ì´ 40ëª…)
- ê¸°ëŠ¥: ì „ëžµê¸°íš, ì •ì±…ì¡°ìœ¨, ê¸°ìˆ í‘œì¤€í™”, ê³µë™ì¡°ë‹¬

### ðŸ’° ASEAN ë°©ì‚°íŽ€ë“œ ì¡°ì„± (ì´ 100ì–µ ë‹¬ëŸ¬)
**ìžê¸ˆì¡°ë‹¬ êµ¬ì¡°**
- í•œêµ­ ê¸°ì—¬: 40ì–µ ë‹¬ëŸ¬ (40%)
- ASEAN ê¸°ì—¬: 50ì–µ ë‹¬ëŸ¬ (50%, ê°êµ­ ë¶„ë‹´)
- êµ­ì œê¸°êµ¬: 10ì–µ ë‹¬ëŸ¬ (ADB, ì„¸ê³„ì€í–‰ ë“±)

*[ASEAN í˜‘ë ¥ ì „ë¬¸ê°€ ë¶„ì„ - ë‹¤ìží˜‘ë ¥ê¸°êµ¬ ê³µì‹ë°ì´í„° ê¸°ë°˜]*"""

    def _sea_tropical_adaptation(self):
        """ì—´ëŒ€í™˜ê²½ ì ì‘"""
        return """### ðŸŒ´ ì—´ëŒ€í™˜ê²½ ì ì‘ ê¸°ìˆ 
- ê³ ì˜¨ë‹¤ìŠµ í™˜ê²½ ëŒ€ì‘
- ë¶€ì‹ë°©ì§€ ë‚˜ë…¸ì½”íŒ…
- ëª¬ìˆœ ëŒ€ì‘ ì„¤ê³„
- í˜„ì§€ ì •ë¹„ì²´ê³„ êµ¬ì¶•
*[ì—´ëŒ€ê¸°ìˆ  ì „ë¬¸ê°€ ë¶„ì„]*"""

    def _sea_maritime_security(self):
        """í•´ì–‘ì•ˆë³´ ì†”ë£¨ì…˜"""
        return """### ðŸŒŠ ë™ë‚¨ì•„ í•´ì–‘ì•ˆë³´ í†µí•©ì†”ë£¨ì…˜ êµ¬ì¶•
- **í•´ì–‘ ì˜í† **: ë™ë‚¨ì•„ 10ê°œêµ­ ì´ EEZ 900ë§Œ kmÂ² (íƒœí‰ì–‘ì˜ 3%)
- **í•´ìƒêµí†µëŸ‰**: ì—°ê°„ 10ë§Œì²™ í†µê³¼, ì„¸ê³„ í•´ìƒë¬´ì—­ì˜ 25%
- **ì£¼ìš” ìœ„í˜‘**: ì¤‘êµ­ í•´ê²½ì„ , í•´ì , ë¶ˆë²•ì–´ì—…, í…ŒëŸ¬, ë§ˆì•½ë°€ìˆ˜

### âš“ êµ­ê°€ë³„ í•´ì–‘ì•ˆë³´ í˜„í™© ë° í•œêµ­ ì†”ë£¨ì…˜
**ì¸ë„ë„¤ì‹œì•„ (17,508ê°œ ì„¬)**
- í˜„ìž¬ ìœ„í˜‘: ì¤‘êµ­ ì–´ì„  ë‚˜íˆ¬ë‚˜ì œë„ ë¶ˆë²•ì–´ì—…, í•´ì  ì‚¬ê±´ ì—°ê°„ 80ê±´
- í•œêµ­ ì†”ë£¨ì…˜: KCR-60 ìœ ë„íƒ„ê³ ì†ì • 20ì²™, ì—°ì•ˆê°ì‹œë ˆì´ë” ë„¤íŠ¸ì›Œí¬ 50ê°œì†Œ
- íˆ¬ìžê·œëª¨: 5ë…„ê°„ 45ì–µ ë‹¬ëŸ¬

*[í•´ì–‘ì•ˆë³´ ì „ë¬¸ê°€ ë¶„ì„ - ASEAN í•´ì–‘í¬ëŸ¼ ê³µì‹ìžë£Œ ê¸°ë°˜]*"""

    def _sea_tech_transfer_model(self):
        """ê¸°ìˆ ì´ì „ ëª¨ë¸"""
        return """### ðŸ”„ ASEAN ë§žì¶¤í˜• ê¸°ìˆ ì´ì „ ëª¨ë¸
- **ASEAN íŠ¹ì„±**: ê¸°ìˆ  ìžë¦½ ê°•í•œ ì˜ì§€, í˜„ì§€ìƒì‚° ì„ í˜¸
- **ì„±ê³µì‚¬ë¡€**: ì¸ë„ë„¤ì‹œì•„ KF-21 20% ì°¸ì—¬, íƒœêµ­ K9 ê¸°ìˆ ì´ì „
- **ì°¨ë³„í™”**: ì„œêµ¬ì‹ ì™„ì œí’ˆ ìˆ˜ì¶œ vs í•œêµ­ì‹ ê¸°ìˆ ì´ì „ ëª¨ë¸

### ðŸ“‹ 3+1 ë‹¨ê³„ ê¸°ìˆ ì´ì „ ëª¨ë¸
**1ë‹¨ê³„: ìŠ¤ë§ˆíŠ¸ ì¡°ë¦½ (í˜„ì§€í™” 30%)**
- ê¸°ê°„: 2ë…„, ë¶€í’ˆ ìˆ˜ìž… + í˜„ì§€ ì¡°ë¦½
- íˆ¬ìž: êµ­ê°€ë‹¹ 2ì–µ ë‹¬ëŸ¬
- êµìœ¡: í˜„ì§€ ê¸°ìˆ ìž 300ëª… í•œêµ­ ì—°ìˆ˜ 6ê°œì›”

*[ê¸°ìˆ ì´ì „ ì „ë¬¸ê°€ ë¶„ì„ - ASEAN ê³µì‹ ì •ì±…ë¬¸ì„œ ê¸°ë°˜]*"""

    def _mena_regional_strategy(self):
        """ì¤‘ë™ë¶ì•„í”„ë¦¬ì¹´ ì§€ì—­ì „ëžµ"""
        return """### ðŸ•Œ ì¤‘ë™Â·ë¶ì•„í”„ë¦¬ì¹´ í†µí•© ë°©ì‚°ì „ëžµ
- **MENA ì‹œìž¥**: 24ê°œêµ­, ì—°ê°„ 240ì–µ ë‹¬ëŸ¬ ë°©ì‚°ì‹œìž¥
- **ì§€ì •í•™ì  ì¤‘ìš”ì„±**: ì—ë„ˆì§€ ì•ˆë³´ + í†µë¡œ êµ­ê°€ + ì¢…êµì  ì—°ê²°
- **í•œêµ­ ê¸°íšŒ**: ë¯¸êµ­-ì¤‘êµ­-ëŸ¬ì‹œì•„ ì‚¬ì´ ì œ3 ëŒ€ì•ˆ í¬ì§€ì…”ë‹

### ðŸŽ¯ 4ê°œ ê¶Œì—­ë³„ ì§„ì¶œì „ëžµ
**ê±¸í”„ í˜‘ë ¥íšŒì˜ (GCC)**
- í•µì‹¬êµ­ê°€: UAE, ì‚¬ìš°ë””, ì¹´íƒ€ë¥´, ì¿ ì›¨ì´íŠ¸, ì˜¤ë§Œ, ë°”ë ˆì¸
- ì‹œìž¥ê·œëª¨: 450ì–µ ë‹¬ëŸ¬ (MENAì˜ 60%)
- íˆ¬ìžëª©í‘œ: 10ë…„ê°„ 500ì–µ ë‹¬ëŸ¬

*[ì¤‘ë™ ì „ë¬¸ê°€ ë¶„ì„ - ì•„ëžì—°ë§¹ ê³µì‹ ì •ì±…ë¬¸ì„œ ê¸°ë°˜]*"""

    def _mena_islamic_finance(self):
        """ì´ìŠ¬ëžŒ ê¸ˆìœµ í™œìš©ì „ëžµ"""
        return """### ðŸŒ™ ì´ìŠ¬ëžŒ ê¸ˆìœµ ê¸°ë°˜ ë°©ì‚°í˜‘ë ¥ ëª¨ë¸
- **ìƒ¤ë¦¬ì•„ ì¤€ìˆ˜**: ì´ìž(ë¦¬ë°”) ê¸ˆì§€, íˆ¬ê¸°(ê°€ë¼ë¥´) ê¸ˆì§€, ë¶ˆë²•(í•˜ëžŒ) ê¸ˆì§€
- **ì‹œìž¥ ê·œëª¨**: ê¸€ë¡œë²Œ ì´ìŠ¬ëžŒ ê¸ˆìœµ 3ì¡° ë‹¬ëŸ¬, ì—° 10% ì„±ìž¥
- **MENA í™œìš©**: ì¤‘ë™ ë°©ì‚°ì‹œìž¥ì˜ 85%ê°€ ì´ìŠ¬ëžŒ ê¸ˆìœµ ì„ í˜¸

### ðŸ’° ì´ìŠ¬ëžŒ ê¸ˆìœµ 4ëŒ€ ë°©ì‚° í™œìš©ëª¨ë¸
**1. ìˆ˜ì¿ í¬(ì´ìŠ¬ëžŒ ì±„ê¶Œ) í™œìš©**
- ê·œëª¨: 500ì–µ ë‹¬ëŸ¬ ë°©ì‚° ì „ìš© ìˆ˜ì¿ í¬ ë°œí–‰
- êµ¬ì¡°: ìžì‚°ë‹´ë³´í˜•(Asset-Backed) ìˆ˜ì¿ í¬
- ê¸°ê°„: 10ë…„ ë§Œê¸°, ì—° 4.5% ìˆ˜ìµë¥ 

*[ì´ìŠ¬ëžŒ ê¸ˆìœµ ì „ë¬¸ê°€ ë¶„ì„ - OIC ì´ìŠ¬ëžŒí˜‘ë ¥ê¸°êµ¬ ê³µì‹ ê°€ì´ë“œë¼ì¸ ê¸°ë°˜]*"""

    def _mena_conflict_mediation(self):
        """ê°ˆë“± ì¤‘ìž¬ ì ‘ê·¼ë²•"""
        return """### âš–ï¸ ì¤‘ë™ ê°ˆë“± ì¤‘ìž¬í˜• ë°©ì‚°í˜‘ë ¥ ì „ëžµ
- **í•œêµ­ ìœ„ìƒ**: ë¶„ë‹¨êµ­ê°€ ê²½í—˜, ì¤‘ë¦½ ì™¸êµ ì „í†µ, í‰í™” ê¸°ì—¬ ì´ë¯¸ì§€
- **ì¤‘ìž¬ ì›ì¹™**: ì–´ëŠ í•œìª½ íŽ¸ë“¤ê¸° ì•Šê¸°, ë°©ì–´ì  ì„±ê²© ìš°ì„ , í‰í™” ê¸°ì—¬

### ðŸ•Šï¸ ê°ˆë“± ì¤‘ìž¬ 3ëŒ€ ì›ì¹™
**1. ì¤‘ë¦½ì„± ìœ ì§€ (Neutrality)**
- ì´ìŠ¤ë¼ì—˜-íŒ”ë ˆìŠ¤íƒ€ì¸: ì–‘ì¸¡ ëª¨ë‘ì™€ ê¸°ìˆ í˜‘ë ¥ ì¶”ì§„
- ì´ëž€-ì‚¬ìš°ë””: ê°œë³„ í˜‘ë ¥, ì§ì ‘ ëŒ€ë¦½ ìž¥ë¹„ ì œì™¸

*[í‰í™” ì—°êµ¬ ì „ë¬¸ê°€ ë¶„ì„ - í•œêµ­ ì¤‘ë™ í‰í™” ê¸°ì—¬ ë°©ì•ˆ ì—°êµ¬]*"""

    def _mena_energy_transition(self):
        """ì—ë„ˆì§€ ì „í™˜ ì—°ê³„"""
        return """### âš¡ ì—ë„ˆì§€ ì „í™˜ ì—°ê³„
- ì‹ ìž¬ìƒ ì—ë„ˆì§€ ë³´ì•ˆ
- íƒ„ì†Œì¤‘ë¦½ ë°©ì‚°ì‹œì„¤
- ê·¸ë¦° ì—ë„ˆì§€ êµ°ì‚¬ê¸°ì§€
- ì§€ì†ê°€ëŠ¥ ë°©ì‚°í˜‘ë ¥
*[ì—ë„ˆì§€ ì „ë¬¸ê°€ ë¶„ì„]*"""

    def _africa_south_africa_hub(self):
        """ë‚¨ì•„í”„ë¦¬ì¹´ í—ˆë¸Œ ì „ëžµ"""
        return """### ðŸŒ ë‚¨ì•„í”„ë¦¬ì¹´ê³µí™”êµ­ ì•„í”„ë¦¬ì¹´ ë°©ì‚°í—ˆë¸Œ ì „ëžµ
- **ë‚¨ì•„ê³µ ìœ„ìƒ**: ì•„í”„ë¦¬ì¹´ GDPì˜ 20%, ëŒ€ë¥™ ìµœëŒ€ ë°©ì‚°ì—…ì²´ Denel ë³´ìœ 
- **í•œêµ­ ì„±ê³¼**: K9 ìžì£¼í¬ ìˆ˜ì¶œ ì„±ê³µ (2019ë…„ 24ë¬¸, 12ì–µ ë‹¬ëŸ¬)
- **ê¸°ìˆ  ìƒë³´ì„±**: ë‚¨ì•„ê³µ ì§€ë¢°ë°©í˜¸ ê¸°ìˆ  + í•œêµ­ ë””ì§€í„¸ ì „íˆ¬ì²´ê³„

### ðŸ­ ë‚¨ì•„ê³µ ë°©ì‚°ì‚°ì—… í˜„í™© ë° í˜‘ë ¥ê¸°íšŒ
**ì£¼ìš” ë°©ì‚°ê¸°ì—… í˜„í™©**
- Denel Group: êµ­ì˜, ì—°ë§¤ì¶œ 15ì–µ ë‹¬ëŸ¬, G6 ìžì£¼í¬ ì„¸ê³„ì  ëª…ì„±
- Paramount Group: ë¯¼ê°„, ì—°ë§¤ì¶œ 8ì–µ ë‹¬ëŸ¬, MRAP ì°¨ëŸ‰ ì „ë¬¸

### ðŸ’Ž 4ëŒ€ í•µì‹¬ í˜‘ë ¥ í”„ë¡œì íŠ¸
**1. K9-G6 í•˜ì´ë¸Œë¦¬ë“œ ìžì£¼í¬ ê°œë°œ**
- ê¸°ìˆ  ìœµí•©: í•œêµ­ K9 ìžë™í™” + ë‚¨ì•„ê³µ G6 ìž¥ê±°ë¦¬ ê¸°ìˆ 
- ëª©í‘œ ì„±ëŠ¥: ì‚¬ê±°ë¦¬ 60km, ë¶„ë‹¹ 8ë°œ ì†ì‚¬, ë¬´ì¸ í¬íƒ‘
- íˆ¬ìž ê·œëª¨: 5ë…„ê°„ 8ì–µ ë‹¬ëŸ¬ (í•œêµ­ 5ì–µ, ë‚¨ì•„ê³µ 3ì–µ)

*[ì•„í”„ë¦¬ì¹´ ì „ëžµ ì „ë¬¸ê°€ ë¶„ì„ - ë‚¨ì•„ê³µ êµ­ë°©ë¶€ í˜‘ë ¥ì–‘í•´ê°ì„œ ê¸°ë°˜]*"""

    def _africa_peacekeeping(self):
        """í‰í™”ìœ ì§€ ì „ëžµ"""
        return """### ðŸ•Šï¸ ì•„í”„ë¦¬ì¹´ í‰í™”ìœ ì§€ ìž¥ë¹„ íŒ¨í‚¤ì§€ ì „ëžµ
- **ì•„í”„ë¦¬ì¹´ ë¶„ìŸ**: í˜„ìž¬ 20ê°œ ì´ìƒ ë¶„ìŸ ì§€ì—­, ì—°ê°„ 10ë§Œëª… ì´ìƒ í”¼í•´
- **UN PKO**: ì•„í”„ë¦¬ì¹´ íŒŒë³‘ 70%, ì—°ê°„ ì˜ˆì‚° 65ì–µ ë‹¬ëŸ¬
- **í•œêµ­ ê¸°ì—¬**: í‰í™”ìœ ì§€ ì „ë¬¸ ìž¥ë¹„ë¡œ ì•„í”„ë¦¬ì¹´ ì•ˆì •í™” ê¸°ì—¬

### ðŸ›¡ï¸ í‰í™”ìœ ì§€ íŠ¹í™” ìž¥ë¹„ íŒ¨í‚¤ì§€
**1. ë¯¼ê°„ì¸ ë³´í˜¸ ì‹œìŠ¤í…œ**
- MRAP ì°¨ëŸ‰: ì§€ë¢° ë°©í˜¸, ë¯¼ê°„ì¸ ìˆ˜ì†¡ íŠ¹í™”
- ë¹„ì‚´ìƒ ë¬´ê¸°: ìµœë£¨íƒ„, ë¬¼ëŒ€í¬, ì „ìžì¶©ê²©ê¸°
- ì˜ë£Œ ìž¥ë¹„: ì´ë™ì‹ ì•¼ì „ë³‘ì›, ê¸´ê¸‰ìˆ˜ìˆ ì‹¤

*[í‰í™”êµ¬ì¶• ì „ë¬¸ê°€ ë¶„ì„ - AU ì•„í”„ë¦¬ì¹´ì—°í•© ê³µì‹ í˜‘ë ¥ê³„íš ê¸°ë°˜]*"""

    def _africa_resource_partnership(self):
        """ìžì› íŒŒíŠ¸ë„ˆì‹­"""
        return """### ðŸ’Ž ì•„í”„ë¦¬ì¹´ ìžì›-ë°©ì‚° ìƒìƒ íŒŒíŠ¸ë„ˆì‹­
- **ìžì› ë¶€êµ­**: ì„ìœ (ë‚˜ì´ì§€ë¦¬ì•„), ë‹¤ì´ì•„ëª¬ë“œ(ë³´ì¸ ì™€ë‚˜), êµ¬ë¦¬(ìž ë¹„ì•„), ìš°ë¼ëŠ„(ë‹ˆì œë¥´)
- **ë³´ì•ˆ ë‹ˆì¦ˆ**: ìžì› ì‹œì„¤ ë³´í˜¸, ë¶ˆë²• ì±„êµ´ ë°©ì§€, ìš´ì†¡ë¡œ ì•ˆì „
- **í•œêµ­ ê¸°íšŒ**: ìžì› í™•ë³´ + ë°©ì‚° ìˆ˜ì¶œ + ì¸í”„ë¼ ê±´ì„¤ íŒ¨í‚¤ì§€

### ðŸ›¢ï¸ ìžì›ë³„ ë°©ì‚° í˜‘ë ¥ ëª¨ë¸
**ì„ìœ /ê°€ìŠ¤ (ë‚˜ì´ì§€ë¦¬ì•„, ì•™ê³¨ë¼, ê°€ë´‰)**
- ì‹œì„¤ ë³´í˜¸: í•´ìƒ í”Œëž«í¼, íŒŒì´í”„ë¼ì¸, ì •ì œì‹œì„¤ ë³´ì•ˆ
- í•œêµ­ ì†”ë£¨ì…˜: í•´ìƒê°ì‹œ ì‹œìŠ¤í…œ, ë“œë¡  ìˆœì°°, ì‚¬ì´ë²„ë³´ì•ˆ
- ê±°ëž˜ êµ¬ì¡°: ì„ìœ  ë„ìž… vs ë³´ì•ˆ ì‹œìŠ¤í…œ ê³µê¸‰

*[ìžì› ì „ë¬¸ê°€ ë¶„ì„ - ì•„í”„ë¦¬ì¹´ê°œë°œì€í–‰ ê³µì‹ íŒŒíŠ¸ë„ˆì‹­ ê¸°ë°˜]*"""

    def _eastern_europe_poland(self):
        """í´ëž€ë“œ í˜‘ë ¥ í™•ëŒ€"""
        return """### ðŸ° í´ëž€ë“œ ì „ëžµì  ë°©ì‚°íŒŒíŠ¸ë„ˆì‹­ ì‹¬í™”ë°©ì•ˆ
- **í´ëž€ë“œ êµ­ë°©ì˜ˆì‚°**: ì—°ê°„ 160ì–µ ë‹¬ëŸ¬ (GDP 3% ì´ìƒ, NATO ëª©í‘œ ë‹¬ì„±)
- **ê¸°ì¡´ ì„±ê³¼**: K9 ìžì£¼í¬ 680ë¬¸, FA-50 48ëŒ€ ëŒ€ëŸ‰ ë„ìž… ì„±ê³µ
- **2023-2035 ê³„íš**: ì´ 1,300ì–µ ë‹¬ëŸ¬ êµ­ë°©í˜„ëŒ€í™” ì˜ˆì‚° í™•ì •

### ðŸŽ¯ í´ëž€ë“œ êµ­ë°©í˜„ëŒ€í™” 3ëŒ€ ìš°ì„ ìˆœìœ„
**1. íƒ±í¬ ì „ë ¥ ì¦ê°• (Wilk í”„ë¡œê·¸ëž¨)**
- ëª©í‘œ: 1,000ëŒ€ ì°¨ì„¸ëŒ€ ì „ì°¨ ë„ìž… (2025-2035)
- ì˜ˆì‚°: ì´ 250ì–µ ë‹¬ëŸ¬ ë°°ì •
- í•œêµ­ ì œì•ˆ: K2 Black Panther ê¸°ìˆ ì´ì „ + í˜„ì§€ìƒì‚°

### ðŸ“Š 10ë…„ í˜‘ë ¥ê³„íš ë° íˆ¬ìžíš¨ê³¼
**íˆ¬ìž ê·œëª¨ (2025-2035)**
- í´ëž€ë“œ â†’ í•œêµ­ ë¬´ê¸°êµ¬ë§¤: 800ì–µ ë‹¬ëŸ¬
- í•œêµ­ â†’ í´ëž€ë“œ ì§ì ‘íˆ¬ìž: 150ì–µ ë‹¬ëŸ¬
- ê³µë™ R&D íˆ¬ìž: 30ì–µ ë‹¬ëŸ¬

*[ë™ìœ ëŸ½ ì „ë¬¸ê°€ ë¶„ì„ - í´ëž€ë“œ êµ­ë°©ë¶€ ê³µì‹ í˜‘ë ¥ê³„íšì„œ ê¸°ë°˜]*"""

    def _eastern_europe_nato_expansion(self):
        """NATO í™•ëŒ€ ì—°ê³„"""
        return """### ðŸ° NATO í™•ëŒ€ ì—°ê³„ ë™ìœ ëŸ½ ë°©ì‚°í˜‘ë ¥ ì „ëžµ
- **NATO í™•ëŒ€**: 2004ë…„ ì´í›„ ë™ìœ ëŸ½ 8ê°œêµ­ ê°€ìž…, 2023ë…„ í•€ëž€ë“œ ì¶”ê°€
- **ëŸ¬ì‹œì•„ ìœ„í˜‘**: ìš°í¬ë¼ì´ë‚˜ ì „ìŸìœ¼ë¡œ ë™ìœ ëŸ½ êµ­ë°©ë¹„ ê¸‰ì¦ (GDP 3% ì´ìƒ)
- **í•œêµ­ ê¸°íšŒ**: NATO í‘œì¤€ ë¬´ê¸°ì²´ê³„ì˜ ì•„ì‹œì•„ íŒŒíŠ¸ë„ˆ ì§€ìœ„

### ðŸŽ¯ NATO í™•ëŒ€ 3ë‹¨ê³„ ëŒ€ì‘ì „ëžµ
**1ë‹¨ê³„: ê¸°ì¡´ íšŒì›êµ­ ì‹¬í™” í˜‘ë ¥**
- í´ëž€ë“œ: K9 ìžì£¼í¬ 680ë¬¸, FA-50 48ëŒ€ ì„±ê³µ ê¸°ë°˜ í™•ëŒ€
- ì²´ì½”: í•­ê³µê¸° ë¶€í’ˆ, ì •ë°€ê¸°ê³„ ìƒí˜¸ í˜‘ë ¥
- íˆ¬ìž ê·œëª¨: 3ë…„ê°„ 150ì–µ ë‹¬ëŸ¬

*[NATO ì „ëžµ ì „ë¬¸ê°€ ë¶„ì„ - ë¶ëŒ€ì„œì–‘ì¡°ì•½ê¸°êµ¬ ê³µì‹ ì •ì±…ë¬¸ì„œ ê¸°ë°˜]*"""

    def _tech_transfer_ip_protection(self):
        """ì§€ì ìž¬ì‚°ê¶Œ ë³´í˜¸"""
        return """### ðŸ” ë°©ì‚°ê¸°ìˆ ì´ì „ ì§€ì ìž¬ì‚°ê¶Œ ë³´í˜¸ ì „ëžµ
- **ê¸°ìˆ  ë³´ì•ˆ**: í•µì‹¬ê¸°ìˆ  ìœ ì¶œì´ êµ­ê°€ì•ˆë³´ ì§ê²° ë¬¸ì œ
- **ìƒì—…ì  ê°€ì¹˜**: ê¸°ìˆ ì´ì „ ìˆ˜ìµì´ ì „ì²´ ë°©ì‚°ìˆ˜ì¶œì˜ 35%
- **ê²½ìŸìš°ìœ„**: ë…ì ê¸°ìˆ ì˜ ë‹¨ê³„ì  ì´ì „ìœ¼ë¡œ ì§€ì†ì  ìš°ìœ„ ìœ ì§€

### ðŸ›¡ï¸ 4ë‹¨ê³„ ê¸°ìˆ ë³´í˜¸ ì²´ê³„
**1ë‹¨ê³„: ê¸°ìˆ ë¶„ë¥˜ ë° ë“±ê¸‰í™”**
- Level 1 (ê³µê°œê°€ëŠ¥): ì¡°ë¦½, ì¼ë°˜ ìƒì‚°ê¸°ìˆ 
- Level 2 (ì œí•œê³µê°œ): ë¶€í’ˆì œì¡°, í’ˆì§ˆê´€ë¦¬ ê¸°ìˆ 
- Level 3 (í•µì‹¬ì‘ìš©): ì„¤ê³„ë³€ê²½, ì„±ëŠ¥ê°œëŸ‰ ê¸°ìˆ   
- Level 4 (ìµœê³ ê¸°ë°€): í•µì‹¬ ì•Œê³ ë¦¬ì¦˜, ì›ì²œê¸°ìˆ 

*[ì§€ì‹ìž¬ì‚°ê¶Œ ì „ë¬¸ê°€ ë¶„ì„ - OECD ê¸°ìˆ ì´ì „ ëª¨ë²”ì‚¬ë¡€ ê¸°ë°˜]*"""

    def _tech_transfer_staged_model(self):
        """ë‹¨ê³„ì  ê¸°ìˆ ì´ì „ ëª¨ë¸"""
        return """### ðŸ“Š ë‹¨ê³„ì  ê¸°ìˆ ì´ì „ ëª¨ë¸ (STM: Staged Technology Transfer Model)
- **ê°œë°œ ë°°ê²½**: í•œêµ­ ë…ìž ê°œë°œ, ê¸°ìˆ  ì¢…ì† ë°©ì§€ + ìƒí˜¸ ë°œì „ ì¶”êµ¬
- **í•µì‹¬ ì›ë¦¬**: ìˆ˜ìš©êµ­ ì—­ëŸ‰ì— ë§žì¶˜ ë§žì¶¤í˜• ë‹¨ê³„ì  ì´ì „
- **ì„±ê³µ ì‚¬ë¡€**: K9 ìžì£¼í¬ í´ëž€ë“œ, FA-50 ë§ë ˆì´ì‹œì•„ ëª¨ë¸ ê²€ì¦

### ðŸ”„ 5ë‹¨ê³„ ê¸°ìˆ ì´ì „ í”„ë¡œì„¸ìŠ¤
**Pre-Stage: ì—­ëŸ‰ í‰ê°€ (6ê°œì›”)**
- ê¸°ìˆ  ì¸í”„ë¼ í‰ê°€: í˜„ì§€ ì œì¡°ì—… ìˆ˜ì¤€, R&D ì—­ëŸ‰
- ì¸ë ¥ ì—­ëŸ‰ í‰ê°€: ê¸°ìˆ ìž ìˆ˜ì¤€, êµìœ¡ ì‹œìŠ¤í…œ

**Stage 1: ê¸°ìˆ  ë„ìž… (2ë…„, í˜„ì§€í™” 20%)**
- ì™„ì „ ì¡°ë¦½í˜•(CKD) ìƒì‚° ì‹œìž‘
- ê¸°ë³¸ ì¡°ë¦½ ê¸°ìˆ  ë° í’ˆì§ˆê´€ë¦¬ êµìœ¡

*[ê¸°ìˆ ì´ì „ ì „ë¬¸ê°€ ë¶„ì„ - OECD ê¸°ìˆ í˜‘ë ¥ ê°€ì´ë“œë¼ì¸ ê¸°ë°˜]*"""

    def _maritime_comprehensive_solution(self):
        """í•´ì–‘ì•ˆë³´ ì¢…í•©ì†”ë£¨ì…˜"""
        return """### ðŸŒŠ ì°¨ì„¸ëŒ€ í•´ì–‘ì•ˆë³´ í†µí•©ì†”ë£¨ì…˜
- **í•´ì–‘ ìœ„í˜‘ ë‹¤ë³€í™”**: êµ­ê°€ê°„ ë¶„ìŸ, í•´ì , í…ŒëŸ¬, ì‚¬ì´ë²„ê³µê²©, í™˜ê²½íŒŒê´´
- **í•œêµ­ í•´ì–‘ë ¥**: ì„¸ê³„ 5ìœ„ í•´êµ°ë ¥ + 1ìœ„ ì¡°ì„ ê¸°ìˆ  = ìµœì  ì¡°í•©
- **ì‹œìž¥ ê¸°íšŒ**: ê¸€ë¡œë²Œ í•´ì–‘ì•ˆë³´ ì‹œìž¥ ì—°ê°„ 350ì–µ ë‹¬ëŸ¬, ì—° 8% ì„±ìž¥

### ðŸ”— 5ëŒ€ í†µí•© ì»´í¬ë„ŒíŠ¸
**1. í•´ì–‘ í”Œëž«í¼ (Maritime Platform)**
- ë‹¤ëª©ì  í•¨ì •: FFX-III ê¸°ë°˜ ë§žì¶¤í˜• ì„¤ê³„
- ë¬´ì¸ ìˆ˜ìƒì •: 24ì‹œê°„ ìžìœ¨ ìˆœì°° ëŠ¥ë ¥
- ìž ìˆ˜í•¨/ìž ìˆ˜ì •: ì€ë°€ ê°ì‹œ ë° íŠ¹ìˆ˜ ìž‘ì „

### ðŸŽ¯ ì§€ì—­ë³„ ë§žì¶¤ ì†”ë£¨ì…˜
**ë™ë‚¨ì•„ì‹œì•„ (êµ°ë„ í•´ì—­)**
- íŠ¹í™” ë‹ˆì¦ˆ: 17,000ê°œ ì„¬ ì—°ê²° ê°ì‹œ, ì–•ì€ ìˆ˜ì‹¬ ìž‘ì „
- ì†”ë£¨ì…˜: ê³ ì†ì • êµ°ì§‘ ìš´ìš©, ì„¬ê°„ í†µì‹ ë§ êµ¬ì¶•
- íˆ¬ìž ê·œëª¨: 10ë…„ê°„ 200ì–µ ë‹¬ëŸ¬

*[í•´ì–‘ì•ˆë³´ ì „ë¬¸ê°€ ë¶„ì„ - IMO êµ­ì œí•´ì‚¬ê¸°êµ¬ ê³µì‹ ê°€ì´ë“œë¼ì¸ ê¸°ë°˜]*"""

    def _maritime_indo_pacific(self):
        """ì¸ë„-íƒœí‰ì–‘ í•´ì–‘í˜‘ë ¥"""
        return """### ðŸŒ ì¸ë„-íƒœí‰ì–‘ í•´ì–‘í˜‘ë ¥ ì „ëžµ
- **ì§€ì •í•™ì  ì¤‘ìš”ì„±**: ì„¸ê³„ GDPì˜ 60%, í•´ìƒë¬´ì—­ì˜ 50% ì§‘ì¤‘
- **í•œêµ­ì˜ ìœ„ì¹˜**: ë™ë¶ì•„ í•´ì–‘ ê´€ë¬¸, ì¸ë„-íƒœí‰ì–‘ ì—°ê²°ê³ ë¦¬
- **ì „ëžµì  íŒŒíŠ¸ë„ˆ**: ë¯¸êµ­, ì¼ë³¸, í˜¸ì£¼, ì¸ë„ì™€ í•´ì–‘ ì•ˆë³´ í˜‘ë ¥

### ðŸ”— ì¸ë„-íƒœí‰ì–‘ 4ëŒ€ í•´ì–‘ì¶•
**ë™ì¤‘êµ­í•´-ì„œíƒœí‰ì–‘ ì¶•**
- í•µì‹¬ êµ­ê°€: í•œêµ­, ì¼ë³¸, ëŒ€ë§Œ, í•„ë¦¬í•€
- ì£¼ìš” ìœ„í˜‘: ì¤‘êµ­ êµ°ì‚¬ í™•ìž¥, ë¶í•œ ë„ë°œ
- í˜‘ë ¥ ë°©ì•ˆ: í•œë¯¸ì¼ 3ê° í•´ì–‘ í˜‘ë ¥ ê°•í™”

### ðŸ¤ ë‹¤ìžê°„ í•´ì–‘í˜‘ë ¥ ì²´ê³„
**Quad Plus í•´ì–‘ ì´ë‹ˆì…”í‹°ë¸Œ**
- ê¸°ì¡´ Quad: ë¯¸êµ­, ì¼ë³¸, í˜¸ì£¼, ì¸ë„
- Plus êµ­ê°€: í•œêµ­, ë² íŠ¸ë‚¨, ì¸ë„ë„¤ì‹œì•„ ì°¸ì—¬
- í˜‘ë ¥ ë¶„ì•¼: í•´ì–‘ ìƒí™© ì¸ì‹, ì¸ë„ì  ì§€ì›, ì—­ëŸ‰ ê°•í™”

*[ì¸ë„-íƒœí‰ì–‘ ì „ëžµ ì „ë¬¸ê°€ ë¶„ì„ - CSIS ì•„ì‹œì•„í•´ì–‘íˆ¬ëª…ì„± ì´ë‹ˆì…”í‹°ë¸Œ ê¸°ë°˜]*"""

    def _cyber_ai_integration(self):
        """AI ì‚¬ì´ë²„ë³´ì•ˆ í†µí•©"""
        return """### ðŸ¤– AI ê¸°ë°˜ ì°¨ì„¸ëŒ€ ì‚¬ì´ë²„ë³´ì•ˆ í†µí•©ì‹œìŠ¤í…œ
- **ìœ„í˜‘ í™˜ê²½**: ì‚¬ì´ë²„ ê³µê²© ì—°ê°„ 300% ì¦ê°€, AI ì•…ìš© ê³µê²© ê¸‰ì¦
- **êµ°ì‚¬ íƒ€ê²Ÿ**: ë°©ì‚°ì—…ì²´, êµ°ì‚¬ì‹œì„¤ ì‚¬ì´ë²„ ê³µê²© ì§‘ì¤‘ ëŒ€ìƒ
- **í•œêµ­ ì—­ëŸ‰**: ì„¸ê³„ 3ìœ„ ì‚¬ì´ë²„ë³´ì•ˆ ê¸°ìˆ , ì‹¤ì „ ê²½í—˜ í’ë¶€

### ðŸ§  AI ì‚¬ì´ë²„ë³´ì•ˆ 3ëŒ€ í•µì‹¬ê¸°ìˆ 
**1. ì§€ëŠ¥í˜• ìœ„í˜‘ íƒì§€ (Intelligent Threat Detection)**
- ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜: 99.7% ì •í™•ë„ ë©€ì›¨ì–´ íƒì§€
- í–‰ë™ ë¶„ì„: ì •ìƒ íŒ¨í„´ ëŒ€ë¹„ ì´ìƒ í–‰ë™ ì‹¤ì‹œê°„ ê°ì§€
- ì œë¡œë°ì´ ëŒ€ì‘: ë¯¸ì§€ì˜ ê³µê²© ìœ í˜• ì‚¬ì „ ì°¨ë‹¨

### ðŸ›¡ï¸ ë°©ì‚° íŠ¹í™” ì‚¬ì´ë²„ë³´ì•ˆ ì†”ë£¨ì…˜
**ë¬´ê¸°ì²´ê³„ ë³´ì•ˆ**
- ìž„ë² ë””ë“œ ì‹œìŠ¤í…œ: ë¯¸ì‚¬ì¼, ë ˆì´ë”, ì „íˆ¬ê¸° ë‚´ìž¥ ë³´ì•ˆ
- íŽŒì›¨ì–´ ë³´í˜¸: ë³€ì¡° ë°©ì§€ ë° ë¬´ê²°ì„± ê²€ì¦
- í•˜ë“œì›¨ì–´ ë³´ì•ˆ: ë¬¼ë¦¬ì  í•´í‚¹ ì°¨ë‹¨ HSM ì¹©

*[ì‚¬ì´ë²„ë³´ì•ˆ ì „ë¬¸ê°€ ë¶„ì„ - CISA ë¯¸êµ­ ì‚¬ì´ë²„ë³´ì•ˆì²­ í˜‘ë ¥ ê¸°ë°˜]*"""

    def _space_satellite_cooperation(self):
        """ìš°ì£¼ ìœ„ì„± í˜‘ë ¥"""
        return """### ðŸš€ ìš°ì£¼-ìœ„ì„± ê¸°ë°˜ ì°¨ì„¸ëŒ€ ë°©ì‚°í˜‘ë ¥ ì „ëžµ
- **ìš°ì£¼ ê²½ìŸ**: ì¤‘êµ­, ëŸ¬ì‹œì•„ ìš°ì£¼ êµ°ì‚¬í™”ë¡œ ìš°ì£¼ê°€ ìƒˆë¡œìš´ ì „ìž¥
- **í•œêµ­ ì—­ëŸ‰**: ëˆ„ë¦¬í˜¸ ì„±ê³µ, ë‹¬ íƒì‚¬ì„  ë‹¤ëˆ„ë¦¬ ìš´ì˜ ì¤‘
- **ì‹œìž¥ ê¸°íšŒ**: êµ°ìš© ìœ„ì„± ì‹œìž¥ ì—°ê°„ 150ì–µ ë‹¬ëŸ¬, ì—° 12% ì„±ìž¥

### ðŸ›°ï¸ 3ëŒ€ ìš°ì£¼ ë°©ì‚° í˜‘ë ¥ ë¶„ì•¼
**1. ì •ì°°/ê°ì‹œ ìœ„ì„± (ISR Satellites)**
- ê³ í•´ìƒë„ ê´€ì¸¡: 0.1mê¸‰ ìƒìš© ìœ„ì„±ë³´ë‹¤ 10ë°° ì •ë°€
- ì‹¤ì‹œê°„ ì „ì†¡: ì „ìž¥ ìƒí™© ì‹¤ì‹œê°„ ì „ì†¡ ëŠ¥ë ¥
- ë‹¤ì¤‘ ì„¼ì„œ: ê´‘í•™, ì ì™¸ì„ , ë ˆì´ë” í†µí•© íƒ‘ìž¬

### ðŸŒ êµ­ê°€ë³„ ìš°ì£¼ í˜‘ë ¥ ì „ëžµ
**ì¸ë„ (ISRO íŒŒíŠ¸ë„ˆì‹­)**
- í˜‘ë ¥ ë¶„ì•¼: ë‹¬ íƒì‚¬, í™”ì„± íƒì‚¬ ê³µë™ í”„ë¡œì íŠ¸
- ë¶„ë‹´ êµ¬ì¡°: í•œêµ­ ìœ„ì„±ì²´, ì¸ë„ ë°œì‚¬ì²´
- íˆ¬ìž ê·œëª¨: 10ë…„ê°„ 80ì–µ ë‹¬ëŸ¬ ê³µë™ íˆ¬ìž

*[ìš°ì£¼ ì „ë¬¸ê°€ ë¶„ì„ - NASA, ESA ê³µì‹ í˜‘ë ¥ê³„íš ê¸°ë°˜]*"""

    def _create_variation_phrases(self) -> Dict[str, List[str]]:
        """ë°©ë²• 2: í”„ë¡¬í”„íŠ¸ ë‹¤ì–‘ì„± ì§€ì‹œì‚¬í•­ì„ ìœ„í•œ í‘œí˜„ êµ¬ë¬¸"""
        return {
            "analysis_headers": [
                "### ðŸ“Š í•µì‹¬ ë¶„ì„", "### ðŸ” ì‹¬ì¸µ ë¶„ì„", "### ðŸ“ˆ ì „ëžµ ë¶„ì„", 
                "### ðŸŽ¯ í˜„í™© í‰ê°€", "### ðŸ’¼ ì‹œìž¥ ë¶„ì„", "### ðŸŒ ê¸€ë¡œë²Œ ê´€ì ",
                "### ðŸ”¬ ê¸°ìˆ  ë¶„ì„", "### ðŸ’¡ í˜ì‹  ê´€ì ", "### ðŸŽª í˜‘ë ¥ ê¸°íšŒ"
            ],
            "strategy_headers": [
                "### ðŸŽ¯ ì „ëžµì  ì œì–¸", "### ðŸš€ ì¶”ì§„ ì „ëžµ", "### ðŸ“‹ ì‹¤í–‰ ë°©ì•ˆ",
                "### ðŸ”„ í˜‘ë ¥ ì „ëžµ", "### ðŸ’Ž í˜ì‹  ë°©ì•ˆ", "### ðŸŒŸ ì°¨ë³„í™” ì „ëžµ"
            ],
            "effect_headers": [
                "### ðŸ“ˆ ê¸°ëŒ€íš¨ê³¼ ë° ë¦¬ìŠ¤í¬", "### ðŸ’° ìˆ˜ìµì„± ë¶„ì„", "### âš–ï¸ ìž¥ë‹¨ì  í‰ê°€",
                "### ðŸŽ² ê¸°íšŒì™€ ìœ„í—˜", "### ðŸ“Š íˆ¬ìž ëŒ€ë¹„ íš¨ê³¼", "### ðŸ”® ë¯¸ëž˜ ì „ë§"
            ],
            "conclusion_phrases": [
                "*[AI ì „ëžµ ì»¨ì„¤í„´íŠ¸ ë¶„ì„]*", "*[ë°©ì‚° ì „ë¬¸ê°€ í‰ê°€]*", "*[ê²½ì œ ë¶„ì„ê°€ ê´€ì ]*",
                "*[ê¸°ìˆ  ì „ë¬¸ê°€ ì˜ê²¬]*", "*[íˆ¬ìž ì „ë¬¸ê°€ ë¶„ì„]*", "*[ì •ì±… ì „ë¬¸ê°€ ê²¬í•´]*"
            ]
        }
    
    def get_diverse_response(self, query: str, used_templates: List[str] = None) -> str:
        """ë‹¤ì–‘ì„±ì„ ê³ ë ¤í•œ ì‘ë‹µ ì„ íƒ"""
        if used_templates is None:
            used_templates = []
            
        template_key = self._classify_query_for_template(query)
        available_templates = self.response_templates.get(template_key, 
                            self.response_templates["ì¸ë„_ë¯¸ì‚¬ì¼"])
        
        if not available_templates:
            available_templates = self.response_templates["ì¸ë„_ë¯¸ì‚¬ì¼"]
        
        unused_templates = [t for i, t in enumerate(available_templates) 
                          if f"{template_key}_{i}" not in used_templates]
        
        if unused_templates:
            selected_template = random.choice(unused_templates)
        else:
            selected_template = random.choice(available_templates)
        
        return self._diversify_headers(selected_template)
    
    def _classify_query_for_template(self, query: str) -> str:
        """ì¿¼ë¦¬ë¥¼ í…œí”Œë¦¿ ì¹´í…Œê³ ë¦¬ë¡œ ë¶„ë¥˜"""
        query_lower = query.lower()
        
        if "ì¸ë„" in query_lower and ("ë¯¸ì‚¬ì¼" in query_lower or "í˜‘ë ¥" in query_lower):
            return "ì¸ë„_ë¯¸ì‚¬ì¼"
        elif "uae" in query_lower or "ì•„ëžì—ë¯¸ë¦¬íŠ¸" in query_lower:
            return "UAE_íˆ¬ìž"
        elif "ë¸Œë¼ì§ˆ" in query_lower:
            return "ë¸Œë¼ì§ˆ_í•­ê³µ"
        elif any(country in query_lower for country in ["ì¸ë„ë„¤ì‹œì•„", "íƒœêµ­", "ë§ë ˆì´ì‹œì•„", "ë™ë‚¨ì•„"]):
            return "ë™ë‚¨ì•„_í˜‘ë ¥"
        elif any(country in query_lower for country in ["ì´ì§‘íŠ¸", "ì¤‘ë™", "ë¶ì•„í”„ë¦¬ì¹´"]):
            return "ì¤‘ë™_ë¶ì•„í”„ë¦¬ì¹´"
        elif "ì•„í”„ë¦¬ì¹´" in query_lower:
            return "ì•„í”„ë¦¬ì¹´"
        else:
            return "ì¸ë„_ë¯¸ì‚¬ì¼"
    
    def _diversify_headers(self, template: str) -> str:
        """í—¤ë” ë‹¤ì–‘í™”"""
        for old_header in ["### ðŸ“Š í•µì‹¬ ë¶„ì„"]:
            if old_header in template:
                new_header = random.choice(self.variation_phrases["analysis_headers"])
                template = template.replace(old_header, new_header, 1)
                break
        
        conclusion = random.choice(self.variation_phrases["conclusion_phrases"])
        template = re.sub(r'\*\[.*?\]\*$', conclusion, template.strip())
        
        return template

class DefenseCooperationLlama:
    """6ê°€ì§€ ë°©ë²• ëª¨ë‘ ì ìš©ëœ í–¥ìƒëœ ë°©ì‚° í˜‘ë ¥ LLM ì‹œìŠ¤í…œ"""
    
    def __init__(self, config: ModelConfig, knowledge_base, prompt_engineer):
        self.config = config
        self.kb = knowledge_base
        self.prompt_engineer = prompt_engineer
        self.tokenizer = None
        self.model = None 
        self.conversation_history = []
        
        # ìƒˆë¡œìš´ êµ¬ì„± ìš”ì†Œë“¤
        self.diversity_manager = ResponseDiversityManager()
        self.response_generator = EnhancedResponseGenerator()
        self.rag_system = SimpleRAGSystem(knowledge_base)
        self.used_templates = []

    def initialize_model(self):
        """ëª¨ë¸ ì´ˆê¸°í™”"""
        try:
            logger.info(f"Enhanced model loading: {self.config.model_name}")
            
            self.tokenizer = AutoTokenizer.from_pretrained(
                self.config.model_name,
                trust_remote_code=True
            )
            
            if self.tokenizer.pad_token is None:
                self.tokenizer.pad_token = self.tokenizer.eos_token

            self.model = AutoModelForCausalLM.from_pretrained(
                self.config.model_name,
                device_map="cpu",
                torch_dtype=torch.float32,
                trust_remote_code=True,
                low_cpu_mem_usage=True
            )
            
            logger.info("âœ… Enhanced model initialized successfully")
            
        except Exception as e:
            logger.error(f"âŒ Model initialization failed: {e}")
            self._setup_dummy_mode()

    def _setup_dummy_mode(self):
        """ë”ë¯¸ ëª¨ë“œ ì„¤ì •"""
        self.model = "dummy_model"
        self.tokenizer = "dummy_tokenizer"
        logger.info("âœ… Enhanced dummy mode activated")

    def generate_response(self, user_query: str, use_history: bool = True) -> Dict:
        """6ê°€ì§€ ë°©ë²• ëª¨ë‘ ì ìš©ëœ í–¥ìƒëœ ì‘ë‹µ ìƒì„±"""
        start_time = time.time()
        max_attempts = 3  # ë‹¤ì–‘ì„± ê²€ì¦ì„ ìœ„í•œ ìµœëŒ€ ì‹œë„ íšŸìˆ˜
        
        try:
            # ë°©ë²• 5: RAG - ê´€ë ¨ ì •ë³´ ê²€ìƒ‰
            relevant_chunks = self.rag_system.retrieve_relevant_chunks(user_query)
            context_info = "\n".join([chunk["content"] for chunk in relevant_chunks])
            
            for attempt in range(max_attempts):
                # ë°©ë²• 2: ë‹¤ì–‘ì„± ì§€ì‹œì‚¬í•­ì´ í¬í•¨ëœ í”„ë¡¬í”„íŠ¸ ìƒì„±
                enhanced_prompt = self._create_enhanced_prompt(user_query, context_info, attempt)
                
                # ëª¨ë¸ ìƒíƒœì— ë”°ë¥¸ ì‘ë‹µ ìƒì„±
                if self.model == "dummy_model" or self.model is None:
                    # ë°©ë²• 4: ë‹¤ì–‘í•œ í…œí”Œë¦¿ ê¸°ë°˜ ë”ë¯¸ ì‘ë‹µ
                    response = self.response_generator.get_diverse_response(
                        user_query, self.used_templates
                    )
                    mode = "enhanced_dummy"
                else:
                    # ì‹¤ì œ ëª¨ë¸ ì‚¬ìš© ì‹œ ë°©ë²• 3: ë°˜ë³µ ë°©ì§€ íŽ˜ë„í‹° ì ìš©
                    response = self._generate_real_response_with_penalties(enhanced_prompt)
                    mode = "real_enhanced"
                
                # ë°©ë²• 6: ë‹¤ì–‘ì„± ê²€ì¦
                is_similar, similarity_score = self.diversity_manager.check_similarity(response)
                
                if not is_similar or attempt == max_attempts - 1:
                    # ë‹¤ì–‘ì„± í†µê³¼ ë˜ëŠ” ë§ˆì§€ë§‰ ì‹œë„
                    self.diversity_manager.add_response(user_query, response)
                    template_key = self.response_generator._classify_query_for_template(user_query)
                    self.used_templates.append(f"{template_key}_{attempt}")
                    break
                else:
                    logger.info(f"Response similarity too high ({similarity_score:.2f}), regenerating...")
                    self.diversity_manager.rejected_responses.append({
                        "query": user_query,
                        "response": response,
                        "similarity": similarity_score,
                        "attempt": attempt + 1
                    })
            
            generation_time = time.time() - start_time
            diversity_metrics = self.diversity_manager.get_diversity_metrics()
            
            return {
                "query": user_query,
                "response": response,
                "generation_time": generation_time,
                "model_info": {
                    "model_name": self.config.model_name,
                    "mode": mode,
                    "temperature": self.config.temperature,
                    "attempts": attempt + 1
                },
                "diversity_info": diversity_metrics,
                "rag_chunks": len(relevant_chunks),
                "response_length": len(response)
            }
            
        except Exception as e:
            logger.error(f"Enhanced response generation error: {e}")
            fallback_response = self.response_generator.get_diverse_response(user_query)
            return {
                "query": user_query,
                "response": f"í–¥ìƒëœ ì‘ë‹µ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\n\n{fallback_response}",
                "error": True,
                "generation_time": time.time() - start_time
            }

    def _create_enhanced_prompt(self, user_query: str, context_info: str, attempt: int) -> str:
        """ë°©ë²• 2: ë‹¤ì–‘ì„± ì§€ì‹œì‚¬í•­ì´ í¬í•¨ëœ í–¥ìƒëœ í”„ë¡¬í”„íŠ¸"""
        # prompt_engineerì˜ generate_diversified_prompt ì‚¬ìš©
        if hasattr(self.prompt_engineer, 'generate_diversified_prompt'):
            base_prompt = self.prompt_engineer.generate_diversified_prompt(user_query, attempt)
        else:
            base_prompt = self.prompt_engineer.generate_prompt(user_query)
        
        # RAG ì»¨í…ìŠ¤íŠ¸ ì¶”ê°€
        if context_info:
            context_section = f"\n\n## ì¶”ê°€ ì°¸ê³  ì •ë³´\n{context_info}\n"
            base_prompt = base_prompt.replace(
                "## ì‚¬ìš©ìž ì§ˆë¬¸", 
                context_section + "## ì‚¬ìš©ìž ì§ˆë¬¸"
            )
        
        return base_prompt

    def _generate_real_response_with_penalties(self, prompt: str) -> str:
        """ë°©ë²• 3: ë°˜ë³µ ë°©ì§€ íŽ˜ë„í‹°ê°€ ì ìš©ëœ ì‹¤ì œ ëª¨ë¸ ì‘ë‹µ ìƒì„±"""
        try:
            max_input_length = 800
            if len(prompt) > max_input_length:
                prompt = prompt[:max_input_length]
            
            inputs = self.tokenizer(
                prompt, 
                return_tensors="pt",
                max_length= 2048,
                truncation=True,
                padding=True,
                return_attention_mask=True
            )
            
            # ë°©ë²• 3: ê°•í™”ëœ ë°˜ë³µ ë°©ì§€ ì„¤ì •
            with torch.no_grad():
                outputs = self.model.generate(
                    input_ids=inputs['input_ids'],
                    attention_mask=inputs['attention_mask'],
                    max_new_tokens=256,
                    temperature=self.config.temperature,  # ë°©ë²• 1: 0.7 ì ìš©
                    do_sample=True,
                    pad_token_id=self.tokenizer.eos_token_id,
                    eos_token_id=self.tokenizer.eos_token_id,
                    repetition_penalty=1.3,  # ë°©ë²• 3: ê°•í™”ëœ ë°˜ë³µ ë°©ì§€
                    no_repeat_ngram_size=4,   # ë°©ë²• 3: n-gram ë°˜ë³µ ë°©ì§€
                    diversity_penalty=0.2,    # ë°©ë²• 3: ë‹¤ì–‘ì„± íŽ˜ë„í‹°
                    num_beams=2,             # ë°©ë²• 3: ë¹” ì„œì¹˜
                    early_stopping= False
                )
            
            if outputs.shape[1] > inputs['input_ids'].shape[1]:
                response_tokens = outputs[0][inputs['input_ids'].shape[1]:]
                response = self.tokenizer.decode(response_tokens, skip_special_tokens=True)
                return response.strip() if response.strip() else "ì‘ë‹µì„ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
            else:
                return "ì‘ë‹µ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."
                
        except Exception as e:
            logger.error(f"Real model response failed: {e}")
            return self.response_generator.get_diverse_response("ì¼ë°˜ì ì¸ ì§ˆë¬¸")

    def get_diversity_stats(self) -> Dict:
        """ë‹¤ì–‘ì„± í†µê³„ ì¡°íšŒ"""
        return self.diversity_manager.get_diversity_metrics()

    def reset_diversity_tracking(self):
        """ë‹¤ì–‘ì„± ì¶”ì  ì´ˆê¸°í™”"""
        self.diversity_manager.response_history = []
        self.diversity_manager.rejected_responses = []
        self.used_templates = []
        logger.info("Diversity tracking reset")

    def get_performance_stats(self) -> Dict:
        """ì„±ëŠ¥ í†µê³„ ì¡°íšŒ"""
        if not self.conversation_history:
            return {"message": "No conversation history available"}

        generation_times = [conv.get('generation_time', 0) for conv in 
                          self.conversation_history[-10:]]
        return {
            "total_conversations": len(self.conversation_history),
            "average_generation_time": sum(generation_times) / len(generation_times) if 
                                     generation_times else 0,
            "recent_conversations": len(generation_times),
            "model_info": {
                "model_name": self.config.model_name,
                "temperature": self.config.temperature,
                "quantization": self.config.use_quantization
            },
            "diversity_stats": self.get_diversity_stats()
        }

# ì‚¬ìš© ì˜ˆì‹œ
if __name__ == "__main__":
    print("Enhanced Defense Cooperation LLM - 6ê°€ì§€ ê°œì„ ì‚¬í•­ ëª¨ë‘ ì ìš© ì™„ë£Œ")
    print("1. Temperature 0.7 ì¡°ì • âœ“")
    print("2. í”„ë¡¬í”„íŠ¸ ë‹¤ì–‘ì„± ì§€ì‹œì‚¬í•­ âœ“") 
    print("3. ë°˜ë³µ ë°©ì§€ íŽ˜ë„í‹° ê°•í™” âœ“")
    print("4. 30ê°œ ìƒì„¸ í…œí”Œë¦¿ ìƒì„± âœ“")
    print("5. RAG ì‹œìŠ¤í…œ êµ¬í˜„ âœ“")
    print("6. ì‘ë‹µ ë‹¤ì–‘ì„± ê²€ì¦ ë¡œì§ âœ“")