import torch
from transformers import AutoTokenizer, AutoModelForSeq2SeqLM, AutoModelForCausalLM
import json
import logging
from typing import Dict, List, Optional, Tuple
import time
from dataclasses import dataclass
import os
import random
import re
from difflib import SequenceMatcher
from dotenv import load_dotenv

load_dotenv()
logger = logging.getLogger(__name__)

@dataclass
class ModelConfig:
    """모델 설정"""
    model_name: str = "google/flan-t5-base"
    max_tokens: int = 512
    temperature: float = 0.7
    top_p: float = 0.9
    do_sample: bool = True
    use_quantization: bool = False
    device_map: str = "auto"

class CompletePDFQuestionAnswerDatabase:
    """PDF의 모든 질문-답변을 완전히 통합한 데이터베이스 (21개 전체)"""
   
    def __init__(self):
        self.qa_database = self._build_complete_pdf_database()
       
    def _build_complete_pdf_database(self) -> List[Dict]:
        """PDF의 20개 질문-답변을 모두 포함한 완전한 데이터베이스"""
        return [
            # 1. 중동 및 북아프리카 지역 우선순위
            {
                "id": 1,
                "patterns": ["중동", "북아프리카", "우선순위", "순위별", "알려주세요"],
                "question": "중동 및 북아프리카 지역에서 한국의 방산 수출 우선순위 국가를 순위별로 알려주세요",
                "category": "지역별 우선순위",
                "response": """중동 및 북아프리카 지역의 방산 수출 우선순위는 다음과 같습니다:

**1순위: UAE (아랍에미리트)**
- 방위산업 투자: 연간 약 220억 달러
- 중점 기술 영역: 미사일 방어, 전자전, 무인 시스템
- 상보적 기술: 고급 레이더 시스템, 전자정보 시스템
- 시장 기회: 기술 다변화 추진으로 새로운 파트너 모색 중
- 협력 용이성: 높음 (한-UAE 특별 전략적 파트너십)

**2순위: 이집트**
- 방위산업 투자: 연간 약 50억 달러 (아프리카 최대)
- 중점 기술 영역: 사막 환경 운용, 방공망 운용, 대테러 장비
- 상보적 기술: 극한 사막환경 장비 운용 노하우
- 시장 기회: K9 자주포 수출 등 기존 협력 경험

**3순위: 카타르**
- 방위산업 투자: 중간 규모이나 구매력 우수
- 중점 기술 영역: 방공, 해양 보안
- 협력 장벽: 지역 정치적 복잡성

**4순위: 모로코**
- 방위산업 투자: 상대적으로 제한적
- 중점 기술 영역: 국경 감시, 대테러
- 시장 기회: 아프리카 진출 교두보 가능"""
            },
           
            # 2. 남아시아 및 동남아시아 지역 우선순위
            {
                "id": 2,
                "patterns": ["남아시아", "동남아시아", "방산", "수출", "우선순위"],
                "question": "남아시아 및 동남아시아 지역에서 방산 수출 우선순위를 알려주세요",
                "category": "지역별 우선순위",
                "response": """남아시아 및 동남아시아 지역의 방산 수출 우선순위는 다음과 같습니다:

**1순위: 인도**
- 방위산업 투자: 연간 약 730억 달러 (세계 3위)
- 중점 기술 영역: 미사일 기술, 항공우주, 전자전
- 상보적 기술: 미사일 유도 시스템, 소프트웨어 개발, 위성 기술
- 시장 기회: 'Make in India' 정책으로 공동생산 가능성 높음
- 전략적 중요성: 매우 높음

**2순위: 인도네시아**
- 방위산업 투자: 연간 약 90억 달러
- 중점 기술 영역: 해양 안보, 열대환경 장비
- 상보적 기술: 열대/해양 환경 최적화 기술
- 협력 경험: KF-21 공동개발 파트너
- 시장 기회: 아세안 최대 시장

**3순위: 태국**
- 방위산업 투자: 연간 약 70억 달러
- 중점 기술 영역: 국경 감시, 대테러 장비
- 기존 협력: K9 자주포 도입 경험
- 상보적 기술: 열대 환경 운용 기술

**4순위: 말레이시아**
- 방위산업 투자: 연간 약 40억 달러
- 중점 기술 영역: 해양 감시, 사이버 방어
- 협력 경험: FA-50 도입
- 시장 특성: 중급 규모이나 안정적"""
            },
           
            # 3. 라틴아메리카 지역 우선순위
            {
                "id": 3,
                "patterns": ["라틴", "아메리카", "방산", "수출", "우선순위"],
                "question": "라틴 아메리카 지역의 방산 수출 우선순위는 어떻게 되나요?",
                "category": "지역별 우선순위",
                "response": """라틴 아메리카 지역의 방산 수출 우선순위는 다음과 같습니다:

**1순위: 브라질**
- 방위산업 투자: 연간 약 290억 달러 (남미 최대)
- 중점 기술 영역: 항공우주, 해군 기술, 사이버 안보
- 상보적 기술: 항공기 설계, 복합재료 기술, 정글/열대환경 장비
- 시장 기회: 미국/유럽 플랫폼 의존도 감소 추구
- 협력 가능성: Embraer와 KF 프로그램 공동 개발 잠재력

**2순위: 칠레**
- 방위산업 투자: 중간 규모이나 구매력 양호
- 중점 기술 영역: 해군력, 국경 감시
- 지정학적 중요성: 태평양 연안 전략적 위치

**3순위: 아르헨티나**
- 방위산업 투자: 제한적이나 자체 방산 기반 보유
- 중점 기술 영역: 항공기, 함정
- 경제적 제약: 불안정한 경제 상황

**4순위: 콜롬비아**
- 방위산업 투자: 중간 규모
- 중점 기술 영역: 대테러, 국경 감시
- 시장 특성: 미국 의존도 높음"""
            },
           
            # 4. 아프리카 지역 우선순위
            {
                "id": 4,
                "patterns": ["아프리카", "지역", "방산", "수출", "전략", "우선"],
                "question": "아프리카 지역에서 한국의 방산 수출 전략을 수립한다면 어떤 국가들을 우선해야 할까요?",
                "category": "지역별 우선순위",
                "response": """아프리카 지역의 방산 수출 우선순위는 다음과 같습니다:

**1순위: 남아프리카공화국**
- 방위산업 투자: 연간 약 30억 달러
- 중점 기술 영역: 장갑차량, 무인시스템, 전자전
- 상보적 기술: 지뢰방호 기술, 장거리 화력 시스템, 방탄 기술
- 시장 기회: 아프리카 내 방산수출 허브로 활용 가능
- 기술 수준: 아프리카 내 최고 수준
- 협력 경험: K9 자주포 수출 성공

**2순위: 나이지리아**
- 방위산업 투자: 아프리카 2위 규모
- 중점 기술 영역: 대테러, 해양 보안
- 시장 잠재력: 인구 2억의 대규모 시장
- 안보 수요: 보코하람 등 테러 대응 필요

**3순위: 케냐**
- 방위산업 투자: 중간 규모
- 중점 기술 영역: 평화유지, 대테러
- 지정학적 중요성: 동아프리카 허브
- 협력 가능성: 비교적 안정적 정치 환경

**4순위: 가나**
- 방위산업 투자: 소규모이나 안정적
- 중점 기술 영역: 해양 보안, 평화유지
- 시장 특성: 서아프리카 진출 거점"""
            },
           
            # 5. UAE 기술 통합 전략
            {
                "id": 5,
                "patterns": ["UAE", "한국", "기술", "통합", "전략", "비즈니스", "모델", "제안"],
                "question": "UAE와 한국의 기술 통합 전략 비즈니스 모델을 제안해주세요",
                "category": "비즈니스 모델",
                "response": """UAE와 한국의 기술 통합 전략 비즈니스 모델은 다음과 같습니다:

## 1. 사막환경 최적화 통합 방공시스템
**협력 구조:**
- 한국: 천궁 미사일 시스템 + 시스템 통합 기술
- UAE: 고온환경 적응 기술 + 현지 맞춤화 기술
- 투자 규모: 총 7억 달러 (한국 4억, UAE 3억)
- 생산 분담: 한국 60%, UAE 40%

**비즈니스 모델:**
- Phase 1: 공동개발 (2년, 2억 달러)
- Phase 2: 시제품 제작 및 시험 (1년, 1.5억 달러)
- Phase 3: 양산 및 GCC 지역 마케팅 (3년, 3.5억 달러)

## 2. 통합 C4ISR 체계 개발
**협력 구조:**
- 한국: TICN 지휘통제 체계 + 네트워크 기술
- UAE: NASSR 고성능 레이더 + 극한기후 적응 기술
- 투자 규모: 총 8억 달러 (50:50 분담)

**수익 모델:**
- 기술 라이센싱: 생산액의 3-5% 로열티
- 유지보수 서비스: 연간 매출의 15-20%
- 업그레이드 패키지: 시스템 가격의 30-40%

## 3. 드론 방어 통합 솔루션
**혁신적 협력 모델:**
- 한국: 안티드론 레이더 + 하드웨어 플랫폼
- UAE: D-Fend 전자전 기술 + AI 기반 위협 분석
- 시장 확장: 군사용 → 민간 인프라 보호로 확대

**예상 효과:**
- 경제적: 10년간 90억 달러 수출 창출
- 기술적: 극한환경 기술 확보로 글로벌 경쟁력 강화
- 전략적: 중동 방산 협력 허브 구축"""
            },
           
            # 6. 인도 방산 기술 협력
            {
                "id": 6,
                "patterns": ["인도", "방산", "기술", "협력", "비즈니스", "모델", "효과적"],
                "question": "인도와의 방산 기술 협력에서 어떤 비즈니스 모델이 가장 효과적일까요?",
                "category": "비즈니스 모델",
                "response": """인도와의 방산 기술 협력을 위한 최적 비즈니스 모델은 다음과 같습니다:

## 1. 현무-인도 합동 미사일 개발 프로그램
**상호보완 기술 결합:**
- 한국: 현무 미사일 추진체 기술 + 시스템 통합
- 인도: BrahMos 초음속 유도 기술 + 소프트웨어 개발
- 목표: 중장거리(1,500km+) 정밀 타격 미사일

**단계별 투자 구조:**
- 1단계 (2025-26): 개념설계, 3억 달러 (한국 1.8억, 인도 1.2억)
- 2단계 (2026-28): 프로토타입 개발, 8억 달러 (4:4 분담)
- 3단계 (2028-30): 양산체계 구축, 12억 달러 (한국 5억, 인도 7억)

## 2. 천궁-Akash 통합 방공 시스템
**Make in India 정책 부합 모델:**
- 기술 개발: 한국 주도 (천궁 요격 기술)
- 현지 생산: 인도 60% (Akash 다표적 추적 기술 활용)
- 수익 배분: 투자비율 및 기술기여도 기반

**시장 확장 전략:**
- 1차: 인도 내수시장 (56억 달러 규모)
- 2차: 동남아시아 공동 진출
- 3차: 중동 지역 확장

## 3. 차세대 전자전 시스템
**AI 기반 융합 모델:**
- 한국: TRS-3D 전자전 하드웨어 + 고출력 송신기
- 인도: AI 기반 신호분석 알고리즘 + 실시간 처리 기술
- 공동 R&D 센터: 부산-벵갈루루

**예상 투자수익률:**
- 10년 ROI: 332%
- 직접 수출: 120억 달러
- 기술료 수입: 15억 달러
- 회수 기간: 4.8년"""
            },
           
            # 7. 브라질 항공우주 협력
            {
                "id": 7,
                "patterns": ["브라질", "항공우주", "분야", "협력", "전략", "구체적", "제안"],
                "question": "브라질과의 항공우주 분야 협력 전략을 구체적으로 제안해주세요",
                "category": "비즈니스 모델",
                "response": """브라질과의 항공우주 분야 협력 전략은 다음과 같습니다:

## 1. KF/E 공동개발 훈련기 프로그램
**기술 융합 모델:**
- 한국: KF-21 기술 + 항공전자 통합 기술 + 임무시스템
- 브라질: Embraer 설계 기술 + 기체 구조 + 추진계통
- 공동개발 기간: 5년, 총 18억 달러 (한국 10억, 브라질 8억)

**생산 및 마케팅 전략:**
- 생산 분담: 양국 각 50%
- 초기 도입: 한국 100대, 브라질 100대
- 제3국 수출: 남미, 아프리카, 동남아시아 (300-400대 잠재 시장)

## 2. 중형 해상초계기 공동개발
**플랫폼 최적화 모델:**
- 한국: 해상감시 레이더 + 전자정보 수집 체계
- 브라질: Embraer KC-390 플랫폼 + 항공기 구조 설계
- 개발 투자: 4년간 12억 달러 (한국 6.5억, 브라질 5.5억)

**차별화 전략:**
- 기존 대비 30% 낮은 운용비용
- 20% 향상된 임무 수행능력
- 남미 해역 특화 최적화

## 3. 경비행 무인감시기 공동개발
**혁신 기술 결합:**
- 한국: 무인기 통제 시스템 + 자율비행 기술
- 브라질: 경량 복합재 기술 + 장기체공 설계
- 목표 성능: 20시간 이상 체공, 40% 무게 감소

**시장 응용 분야:**
- 아마존 국경 감시
- 불법 벌목 감시
- 마약 밀매 단속
- 잠재 시장: 150-200대, 15-20억 달러

## 협력 성공 요인:
- 상호보완적 기술 역량 활용
- 엠브라에르와 KAI 간 전략적 파트너십
- 남미 시장 진출 교두보 확보
- 항공우주 엔지니어 교환 프로그램"""
            },
           
            # 8. 남아프리카공화국 기술 분야
            {
                "id": 8,
                "patterns": ["남아프리카공화국", "방산", "협력", "주목", "기술", "분야"],
                "question": "남아프리카공화국과의 방산 협력에서 주목해야 할 기술 분야는 무엇인가요?",
                "category": "기술 협력",
                "response": """남아프리카공화국과의 방산 협력에서 주목해야 할 핵심 기술 분야는 다음과 같습니다:

## 1. 지뢰방호 기술 (세계 최고 수준)
**남아공의 강점:**
- 세계 최고 수준의 MRAP(지뢰방호 차량) 설계 기술
- 실전 검증된 생존성 확보 기술
- 폭발물 방호 소재 및 구조 설계

**한국과의 융합 가능성:**
- 한국의 첨단 전자장비 + 남아공의 방호 기술
- 차세대 지뢰방호 장갑차 공동 개발
- 평화유지군용 특수 차량 개발

## 2. 장거리 화력 시스템
**남아공의 독보적 기술:**
- G6 자주포: 세계 최장 사거리 (50km 이상)
- 고정밀 사격통제 시스템
- 자동화된 포탄 처리 시스템

**협력 기회:**
- 한국의 K9 자주포 + 남아공의 장거리 기술
- 디지털 사격통제 시스템 통합
- 차세대 자주포 공동 개발

## 3. 방탄 및 보호 기술
**기술적 우위:**
- 첨단 방탄 소재 개발
- 개인 방호구 설계
- 차량용 복합 방탄 시스템

## 4. 현실적 협력 전략
**단계별 접근:**
1. 기술 교류 및 공동 연구 (1-2년)
2. 시범 프로젝트 추진 (2-3년)
3. 공동 생산 및 제3국 수출 (3-5년)

**예상 협력 성과:**
- 아프리카 시장 공동 진출 (40-50억 달러 시장)
- 평화유지군 장비 패키지 개발
- 극한환경 적응 기술 확보

**협력 장벽 및 해결책:**
- 제한된 국방예산 → 단계적 소규모 프로젝트로 시작
- B-BBEE 정책 → 현지 파트너십 구축
- 기술격차 → 상호보완적 분야 중심 협력"""
            },
           
            # 9. 중동 지역 규제 환경
            {
                "id": 9,
                "patterns": ["중동", "지역", "방산", "수출", "규제", "환경", "고려"],
                "question": "중동 지역에서 방산 수출 시 고려해야 할 규제 환경은 어떤 것들이 있나요?",
                "category": "규제 환경",
                "response": """중동 지역 방산 수출 시 고려해야 할 주요 규제 환경은 다음과 같습니다:

## 1. 국제 수출통제 체제
**주요 제약 요소:**
- 바세나르 체제(Wassenaar Arrangement): 재래식 무기 및 이중용도 기술 통제
- 미사일기술통제체제(MTCR): 미사일 관련 기술 수출 제한
- 핵공급국그룹(NSG): 핵 관련 기술 통제

**한국의 대응 전략:**
- 사전 수출 허가 철저한 검토
- 최종 사용자 인증서(End-User Certificate) 확보
- 재수출 통제 조항 포함

## 2. 미국의 제3국 승인 요구
**ITAR(International Traffic in Arms Regulations) 고려사항:**
- 미국 기술/부품 포함 시 미국 정부 승인 필요
- 기술이전 관련 추가 제약
- 최종 사용 목적 및 지역 제한

**해결 방안:**
- 한국 자체 기술 비중 확대
- 유럽 등 대체 기술 공급원 확보
- 사전 미국 정부와 협의

## 3. 국가별 특수 규제
**UAE 규제 특성:**
- Tawazun Economic Program: 계약금액의 60%까지 상쇄 요구
- 현지 생산 및 기술이전 의무화
- EDGE Group과의 협력 우선

**이집트 규제 특성:**
- 복잡한 정부 간 거래 선호
- 기술이전 및 현지 생산 강력 요구
- 미국/EU 승인 필요성

## 4. 지역 정치적 고려사항
**지정학적 리스크:**
- 중동 지역 내 정치적 긴장
- 이란 제재 관련 연관성 검토
- 이스라엘과의 관계 고려

**리스크 관리 방안:**
- 정치적 중립성 유지
- 다층적 외교 채널 활용
- 장기 계약보다 단계적 접근

## 5. 실무적 대응 전략
**사전 준비사항:**
- 철저한 due diligence 수행
- 현지 법무/컨설팅 파트너 확보
- 정부 간 채널 적극 활용
- 수출보험 및 정치적 리스크 보험 가입"""
            },
           
            # 10. 동남아시아 협력 모델
            {
                "id": 10,
                "patterns": ["동남아시아", "지역", "한국", "방산기업", "진출", "협력", "모델"],
                "question": "동남아시아 지역에서 한국 방산기업들이 진출할 때 가장 유리한 협력 모델은 무엇인가요?",
                "category": "협력 모델",
                "response": """동남아시아 지역에서 한국 방산기업들의 최적 협력 모델은 다음과 같습니다:

## 1. 기술이전 기반 현지생산 모델 (추천)
**적용 대상국:** 인도네시아, 태국, 말레이시아

**핵심 전략:**
- 단계적 기술이전: 조립 → 부품생산 → 핵심기술
- 현지 파트너와 합작투자 (JV) 구조
- 한국 기업 51%, 현지 기업 49% 지분구조

**성공 사례 벤치마킹:**
- 인도네시아 KF-21 공동개발 (20% 기술 참여)
- 태국 K9 자주포 기술이전
- 말레이시아 FA-50 도입 경험

## 2. 맞춤형 제품 공동개발 모델
**차별화 전략:**
- 열대/해양 환경 최적화 제품 개발
- ASEAN 표준 기반 공통 플랫폼 구축
- 현지 운용환경 맞춤형 성능 개조

**협력 분야:**
- 열대형 장갑차량 (고온다습 환경 적응)
- 군도 감시 UAV 시스템
- 해양순찰/경비정
- 통합 해양보안 시스템

## 3. MRO 허브 구축 모델
**전략적 접근:**
- 싱가포르/태국을 지역 정비 허브로 육성
- 아세안 전체 시장 커버
- 부품 공급망 현지화
- 기술 인력 양성 프로그램

**예상 효과:**
- 지속적 수익 창출 (20-30년 장기 계약)
- 현지 고용 창출
- 기술 전수 및 협력 심화

## 4. 성공 요인 및 실행 전략
**규제 대응:**
- 각국 상쇄 정책 적극 활용
- 현지 중소기업 육성 프로그램 연계
- 정부 간 MOU 기반 협력 추진

**재원 조달:**
- 한국 수출금융 적극 활용
- 아시아개발은행(ADB) 등 다자개발은행 연계
- 현지 정부와 공동 펀드 조성

**리스크 관리:**
- 정치적 리스크: 복수 국가 분산 투자
- 환율 리스크: 현지 통화 수익 확보
- 기술 유출 리스크: 핵심 기술 단계적 이전

**기대 성과:**
- 10년간 ASEAN 시장에서 150억 달러 수출 달성
- 지역 내 방산 협력 허브 구축
- 한국 방산의 글로벌 경쟁력 강화"""
            },
           
            # 11. 아프리카 시장 진출 주의사항
            {
                "id": 11,
                "patterns": ["아프리카", "대륙", "방산", "시장", "진출", "주의", "사항"],
                "question": "아프리카 대륙에서 방산 시장 진출 시 주의해야 할 사항들은 무엇인가요?",
                "category": "리스크 관리",
                "response": """아프리카 대륙 방산 시장 진출 시 주의해야 할 주요 사항들은 다음과 같습니다:

## 1. 정치적/보안 리스크 관리
**주요 위험 요소:**
- 정치적 불안정성 및 정권 교체 위험
- 내전/분쟁 지역 존재
- 군부 쿠데타 가능성 (서아프리카 지역)
- 테러 조직 활동 (보코하람, 알샤바브 등)

**리스크 대응 전략:**
- 정치적 안정성 높은 국가 우선 선택 (남아공, 가나, 보츠와나)
- 단계적 진출: 소규모 → 대규모 확대
- 정치적 리스크 보험 필수 가입
- 현지 정보 네트워크 구축

## 2. 경제적 제약 요소
**재정적 한계:**
- 제한된 국방예산 (GDP 대비 평균 1-2%)
- 외환 부족 및 환율 불안정성
- 부채 부담 증가 (중국 일대일로 등)
- 경제 성장률 둔화

**해결 방안:**
- 수출금융 패키지 지원 확대
- 분할 지불 및 장기 금융 지원
- 자원 담보 거래 모델 고려
- 다자개발은행과 연계 금융 지원

## 3. 기술/인프라 격차
**운용 환경 제약:**
- 기술 인력 부족
- 유지보수 인프라 미비
- 극한 기후 환경 (사막, 열대)
- 전력/통신 인프라 부족

**적응 전략:**
- 단순하고 견고한 시스템 우선
- 포괄적 교육훈련 프로그램 제공
- 현지 정비 센터 구축
- 기후 적응형 제품 개발

## 4. 국제 경쟁 및 규제
**경쟁 환경:**
- 중국의 적극적 진출 (가격 경쟁력)
- 러시아의 전통적 영향력
- 유럽 업체들의 고급 기술
- 미국의 정치적 영향력

**차별화 전략:**
- 중국보다 우수한 기술력 + 합리적 가격
- 러시아보다 신뢰할 수 있는 공급선
- 유럽보다 유연한 기술이전
- 정치적 조건 없는 협력

## 5. 문화적/제도적 고려사항
**현지 적응 필요성:**
- 부족/종교적 갈등 이해
- 부패 관행 및 투명성 부족
- 언어 장벽 (영어, 프랑스어, 아랍어)
- 느린 의사결정 과정

## 6. 권장 진출 전략
**1단계: 안전한 거점 확보**
- 남아프리카공화국: 아프리카 진출 허브
- 가나: 서아프리카 거점
- 케냐: 동아프리카 거점

**2단계: 점진적 확산**
- 성공 모델 구축 후 주변국 확산
- 지역기구(AU, ECOWAS) 활용
- 평화유지군 장비 공급 참여

**3단계: 생태계 구축**
- 현지 생산 기반 구축
- 기술 교육 센터 운영
- 지역 공급망 네트워크 구성"""
            },
           
            # 12. 한국 방산업체 글로벌 경쟁력 강화
            {
                "id": 12,
                "patterns": ["한국", "방산업체", "글로벌", "경쟁력", "강화", "핵심", "전략"],
                "question": "한국 방산업체의 글로벌 경쟁력 강화를 위한 핵심 전략은 무엇인가요?",
                "category": "종합 전략",
                "response": """한국 방산업체의 글로벌 경쟁력 강화를 위한 핵심 전략은 다음과 같습니다:

## 1. 기술 중심 협력 모델 정립
**핵심 접근법:**
- 한국 주도의 기술 협력 네트워크 구축
- 상호보완적 기술 결합을 통한 경쟁력 강화
- 공동 지식재산 창출 및 활용 체계 구축

## 2. 글로벌 방산 생태계 구축
**생태계 전략:**
- 한국-협력국-제3국 연계 생산 네트워크 형성
- 지역별 생산/정비 허브 육성
- 중소기업 글로벌 가치사슬 참여 확대

## 3. 맞춤형 시장 진출 전략
**지역별 차별화:**
- 중동: 극한환경 적응 기술 + 고부가가치 시스템
- 동남아: 열대환경 최적화 + 기술이전 모델
- 라틴아메리카: 항공우주 협력 + 공동개발
- 아프리카: 견고하고 경제적인 솔루션 + 단계적 접근

## 4. 투자 효율성 극대화
**ROI 최적화 전략:**
- 인도: 10년 ROI 332% (120억 달러 수출 목표)
- UAE: 10년 ROI 321% (90억 달러 수출 목표)
- 브라질: 10년 ROI 265% (60억 달러 수출 목표)

## 5. 정책적 지원 체계
**제도 개선 필요사항:**
- 방산협력 특별기금 조성 (1조원 규모)
- 수출금융 한도 확대 (5조→10조원)
- 기술이전 규제 합리화
- 국가별 맞춤형 지원 조직 구축

## 6. 안보 협력 확대
**전략적 파트너십:**
- 방산협력을 통한 전략적 파트너십 강화
- 지역 안보 구도에서 한국의 영향력 확대
- 에너지, 자원 등 경제안보 연계 협력 확대

**기대 성과:**
- 2035년까지 세계 5대 방산수출국 도약
- 연간 방산수출액 500억 달러 달성
- 방산분야 고용창출 7.5만명
- GDP 기여도 0.45%p 증가

**성공 요인:**
- 범정부 협력 체계 구축
- 지속가능한 협력 모델 개발
- 글로벌 스탠다드 준수
- 민간 역량 및 참여 확대"""
            },
           
            # ====== 누락된 13-20번 질문-답변 추가 ======
           
            # 13. 동유럽 지역 우선순위
            {
                "id": 13,
                "patterns": ["동유럽", "지역", "한국", "방산기업", "진출", "국가"],
                "question": "동유럽 지역에서 한국 방산기업이 진출할 만한 국가는 어디인가요?",
                "category": "지역별 우선순위",
                "response": """동유럽 지역의 방산 수출 유망국가는 다음과 같습니다:

**1순위: 폴란드**
- 방위산업 투자: 연간 약 160억 달러 (GDP의 3% 이상)
- 중점 기술 영역: 방공, 장갑차량, 포병 시스템
- 기존 협력: K9 자주포, FA-50 대규모 도입 성공
- 시장 기회: 러시아 위협 대응으로 무기체계 현대화 급진전
- 협력 용이성: 매우 높음 (NATO 회원국, 한국과 전략적 파트너십)

**2순위: 체코**
- 방위산업 투자: 중간 규모이나 안정적 증가 추세
- 중점 기술 영역: 소형무기, 항공기 부품
- 상보적 기술: 정밀기계 가공, 항공기 엔진 기술
- 시장 기회: EU 내 방산 허브 역할 확대

**3순위: 에스토니아**
- 방위산업 투자: 소규모이나 사이버 분야 특화
- 중점 기술 영역: 사이버 방어, 전자전
- 혁신 기회: 디지털 전환 선도국과의 사이버 보안 협력

**4순위: 헝가리**
- 방위산업 투자: 중간 규모
- 중점 기술 영역: 장갑차, 통신장비
- 지정학적 중요성: 중유럽 물류 허브"""
            },
           
            # 14. 기술이전 지식재산권 보호
            {
                "id": 14,
                "patterns": ["기술이전", "지식재산권", "보호", "전략", "방산"],
                "question": "방산 기술이전 시 지식재산권 보호를 위한 전략은 무엇인가요?",
                "category": "기술이전",
                "response": """방산 기술이전 시 지식재산권 보호 전략은 다음과 같습니다:

## 1. 단계적 기술이전 모델
**핵심 원칙:**
- 기술 성숙도에 따른 단계별 이전
- 핵심 기술과 주변 기술 분리
- 역설계 방지를 위한 통합 모듈 제공

**구체적 방법:**
- 1단계: 조립 및 생산 기술 (기술 의존도 낮음)
- 2단계: 부품 제조 기술 (중급 기술)
- 3단계: 설계 변경 기술 (고급 기술)
- 4단계: 핵심 알고리즘 (최고급 기술, 선택적 이전)

## 2. 법적 보호 체계
**계약 조건:**
- 기술사용 범위 및 지역 제한
- 제3자 이전 금지 조항
- 개량 기술의 공동 소유권 설정
- 계약 위반 시 손해배상 조항

**국제 분쟁 해결:**
- 국제상사중재원(ICC) 중재 조항
- 준거법을 한국법으로 설정
- 예치계약(Escrow) 활용

## 3. 기술적 보호 수단
**하드웨어 보호:**
- 핵심 칩에 암호화 및 원격 제어 기능
- 시간 제한 라이센스 적용
- 정품 인증 시스템 구축

**소프트웨어 보호:**
- 소스코드 대신 실행파일만 제공
- 클라우드 기반 핵심 알고리즘 서비스
- 정기적 업데이트를 통한 의존성 유지

## 4. 수익 극대화 전략
**라이센싱 모델:**
- 초기 기술료: 프로젝트 총액의 5-10%
- 생산 로열티: 생산 단가의 3-7%
- 업그레이드 수수료: 시스템 가격의 15-25%
- 교육/컨설팅 수수료: 별도 책정

**장기 서비스 계약:**
- 20-30년 장기 유지보수 계약 체결
- 부품 공급 독점권 확보
- 성능 개량 서비스 제공"""
            },
           
            # 15. 중소기업 해외진출 전략
            {
                "id": 15,
                "patterns": ["중소기업", "방산", "해외진출", "전략", "수립"],
                "question": "방산 분야에서 중소기업의 해외진출 전략은 어떻게 수립해야 할까요?",
                "category": "중소기업 지원",
                "response": """방산 분야 중소기업의 해외진출 전략은 다음과 같습니다:

## 1. 틈새시장 특화 전략
**고부가가치 부품 집중:**
- 정밀 센서 및 광학장비
- 전자전 부품 및 모듈
- 복합재료 및 특수 소재
- 소프트웨어 및 시뮬레이션

**차별화 요소:**
- 대기업이 진입하기 어려운 소량 다품종 생산
- 빠른 맞춤화 및 기술 지원
- 혁신적 기술 개발 역량

## 2. 대기업 동반진출 모델
**상생협력 구조:**
- 대기업 주계약, 중소기업 핵심 부품 공급
- 기술개발 공동 투자 및 성과 공유
- 해외 마케팅 및 인증 지원

**성공 사례:**
- 한화시스템-중소기업 컨소시엄 (레이더 부품)
- LIG넥스원-협력업체 공동 수출 (C4I 시스템)
- 현대로템-부품업체 동반 진출 (K9 자주포)

## 3. 정부 지원 프로그램 활용
**금융 지원:**
- 중소기업 방산수출 전용 펀드 (500억원 규모)
- 수출보험료 할인 (일반 대비 50% 감면)
- 해외마케팅 비용 지원 (70% 정부 지원)

**기술 지원:**
- 국방기술품질원 품질인증 지원
- 해외 규격 대응 컨설팅
- 지식재산권 출원 및 보호 지원

## 4. 지역별 진출 전략
**동남아시아 진출:**
- 현지 수요 맞춤형 제품 개발
- 기술이전 모델로 현지 파트너와 협력
- KOTRA 해외지사 네트워크 활용

**중동 진출:**
- 극한환경 적응 제품 개발
- 현지 대리점 네트워크 구축
- 국가 간 G2G 협력 채널 활용

**유럽 진출:**
- NATO 표준 인증 취득
- 현지 R&D 센터 설립
- 유럽 방산업체와 전략적 제휴

## 5. 성공 요인
**핵심 역량 강화:**
- 글로벌 품질 표준 달성
- 원가 경쟁력 확보
- 신속한 고객 대응 체계

**네트워크 구축:**
- 해외 방산전시회 적극 참가
- 현지 에이전트 발굴 및 관리
- 고객사와 장기 파트너십 구축

**예상 성과:**
- 중소기업 방산수출 현재 62억달러 → 2030년 450억달러
- 수출 참여 중소기업 현재 850개사 → 2030년 2,000개사
- 평균 수출액 증가율 연 15% 달성"""
            },
           
            # 16. 사이버보안 기술 수출 잠재력
            {
                "id": 16,
                "patterns": ["사이버보안", "방산", "분야", "수출", "잠재력"],
                "question": "방산 분야에서 사이버보안 기술의 수출 잠재력은 어떤가요?",
                "category": "사이버보안",
                "response": """방산 분야 사이버보안 기술의 수출 잠재력은 다음과 같습니다:

## 1. 시장 현황 및 전망
**글로벌 시장 규모:**
- 군용 사이버보안 시장: 2024년 180억 달러 → 2030년 320억 달러
- 연평균 성장률: 12.3% (민간 대비 2배 높음)
- 아시아태평양 지역 성장률: 18.5% (최고 성장)

**한국의 경쟁력:**
- 세계적 IT 인프라 및 기술력
- 실전 경험 풍부 (북한 사이버 위협 대응)
- 빠른 기술 발전 및 혁신 역량
- 정부-민간 협력 체계 구축

## 2. 주요 수출 품목
**네트워크 보안:**
- 군용 네트워크 침입탐지/차단 시스템
- 안전한 군사통신 암호화 솔루션
- 제로트러스트 기반 네트워크 아키텍처

**무기체계 보안:**
- 임베디드 시스템 보안 솔루션
- 드론/로봇 해킹 방지 기술
- 미사일/레이더 시스템 사이버 보호

**데이터 보안:**
- 군사 빅데이터 암호화 및 접근제어
- 블록체인 기반 무기체계 이력 관리
- 안전한 클라우드 군사 서비스

## 3. 국가별 진출 전략
**우선 타겟 국가:**
**1순위: 인도**
- 사이버 위협 심각: 중국, 파키스탄으로부터 지속적 공격
- 시장 규모: 연간 25억 달러 (2024년 기준)
- 협력 방향: 한-인도 사이버보안 공동연구센터 설립

**2순위: UAE**
- 스마트시티 보안: 두바이/아부다비 디지털 전환 가속화
- 시장 규모: 연간 18억 달러
- 협력 방향: 중동 사이버보안 허브 구축 파트너십

**3순위: 폴란드**
- NATO 사이버 방어 요구사항 증가
- EU 사이버보안 규정 강화 대응
- 시장 규모: 연간 12억 달러

## 4. 핵심 기술 영역
**AI 기반 위협 탐지:**
- 머신러닝 기반 이상 행위 탐지
- 실시간 위협 인텔리전스 분석
- 자동화된 사이버 방어 시스템

**퀀텀 암호화:**
- 양자내성 암호 알고리즘
- 양자키분배(QKD) 군사 통신
- 포스트퀀텀 암호화 솔루션

**제로트러스트 보안:**
- 신뢰하지 않고 검증하는 보안 모델
- 마이크로 세그멘테이션 기술
- 동적 접근 제어 시스템

## 5. 수출 전략 및 기대효과
**수출 목표:**
- 2025년: 5억 달러
- 2027년: 15억 달러
- 2030년: 35억 달러

**핵심 성공 요인:**
- 국제 사이버보안 표준 인증 획득
- 현지 보안 요구사항 맞춤화
- 정부 간 사이버보안 협력 채널 활용
- 지속적인 R&D 투자 및 혁신

**산업 파급효과:**
- 사이버보안 전문기업 육성
- 고급 인력 양성 및 고용 창출
- 국가 전체 사이버보안 역량 강화"""
            },
           
            # 17. 우주항공 방산 수출 전략
            {
                "id": 17,
                "patterns": ["우주", "항공", "분야", "한국", "방산", "수출", "전략"],
                "question": "우주 및 항공 분야에서 한국의 방산 수출 전략은 무엇인가요?",
                "category": "우주항공",
                "response": """우주 및 항공 분야 한국의 방산 수출 전략은 다음과 같습니다:

## 1. 우주 분야 수출 전략
**위성 기술:**
- 정찰/감시 위성: 아리랑 시리즈 기술력 기반
- 통신위성: 천리안 위성 기술 활용
- 소형위성 군집: 큐브샛 기반 감시망 구축

**발사체 기술:**
- 누리호 성공 기반 소형 발사체 수출
- 위성 발사 서비스 제공
- 발사체 부품 및 시스템 수출

**지상 시스템:**
- 위성 관제소 구축 기술
- 위성 데이터 분석 소프트웨어
- 통합 우주 상황 인식 시스템

## 2. 항공 분야 수출 전략
**완성 항공기:**
- KF-21 전투기: 동남아, 중동, 라틴아메리카 수출
- KAI 수리온 헬기: 다목적 헬기 시장 공략
- KT-1 훈련기: 신흥국 조종사 양성 시장

**항공 부품:**
- 항공기 구조물 (동체, 날개)
- 항공전자 시스템
- 엔진 부품 및 MRO 서비스

**무인 항공기:**
- 군용 드론 시스템
- 감시정찰용 UAV
- 전투용 UCAV 개발

## 3. 국가별 맞춤 전략
**우주 분야 타겟 국가:**
**인도네시아:**
- 해양감시 위성 시스템 구축
- 다도해 특화 소형위성 군집
- 위성 데이터 공유 협력

**필리핀:**
- 재해감시 위성 시스템
- 태풍/지진 조기경보 네트워크
- 위성통신 인프라 구축

**태국:**
- 농업/산림 모니터링 위성
- 메콩강 유역 환경 감시
- 지역 위성 허브 구축

**항공 분야 타겟 국가:**
**말레이시아:**
- FA-50 성공 기반 KF-21 수출 추진
- 항공기 MRO 센터 구축
- 항공우주 인력 교육 프로그램

**이집트:**
- KT-1 훈련기 수출
- 항공기 현지 조립 생산
- 아프리카 항공 허브 구축

**페루:**
- KAI 수리온 다목적 헬기
- 안데스 산맥 특화 개조
- 남미 헬기 정비 센터

## 4. 기술 혁신 분야
**차세대 기술:**
- 극초음속 비행체 기술
- 우주 교통 관리 시스템
- 우주 쓰레기 제거 기술
- 우주 태양광 발전 시스템

**AI 융합 기술:**
- 자율 비행 제어 시스템
- 지능형 위성 운용 기술
- 예측 정비 시스템

## 5. 산업 생태계 구축
**국내 기반 강화:**
- 우주항공 클러스터 조성 (고흥, 사천)
- 전문 인력 양성 프로그램
- 중소기업 기술 개발 지원

**국제 협력:**
- 해외 우주기관과 MOU 체결
- 국제 우주정거장 참여 확대
- 글로벌 우주 탐사 프로젝트 참여

**수출 목표:**
- 2025년: 우주 5억 달러, 항공 80억 달러
- 2030년: 우주 20억 달러, 항공 150억 달러
- 2035년: 우주 50억 달러, 항공 250억 달러

**핵심 성공 요인:**
- 기술 자립도 향상 (현재 70% → 2030년 85%)
- 민간 우주기업 육성
- 국제 표준 및 인증 획득
- 정부의 지속적 R&D 투자"""
            },
           
            # 18. 해양안보 경쟁우위
            {
                "id": 18,
                "patterns": ["해양", "안보", "분야", "한국", "방산기술", "경쟁우위"],
                "question": "해양 안보 분야에서 한국 방산기술의 경쟁우위는 무엇인가요?",
                "category": "해양안보",
                "response": """해양 안보 분야에서 한국 방산기술의 경쟁우위는 다음과 같습니다:

## 1. 핵심 경쟁우위 기술
**함정 건조 기술:**
- 세계 5위 조선 강국의 기술력 활용
- KDX-III 이지스 구축함 자체 설계 능력
- FFX 호위함 시리즈 성공적 양산
- 214급 잠수함 독일 기술 소화 및 개량

**해양 센서 기술:**
- 대잠탐지 소나 시스템
- 해상 감시 레이더 기술
- 전자광학 추적 시스템
- 수중 음향 탐지 네트워크

**해양 무기 시스템:**
- 해성 대함미사일 (사거리 200km+)
- 홍상어 어뢰 시스템
- 해궁 근접방어 시스템
- 함포 및 CIWS 기술

## 2. 시장별 적용 분야
**동남아시아 해양 안보:**
**인도네시아:**
- 군도 해역 감시 시스템 구축
- 17,000여 개 섬 연결 해양 감시망
- 불법어업 방지 시스템
- 대잠전 능력 강화 협력

**필리핀:**
- 남중국해 영유권 분쟁 대응
- 연안 경비 시스템 강화
- 중국 해경선 대응 능력 구축
- 해상 교통 관제 시스템

**베트남:**
- 해안선 3,400km 감시 체계
- 어업 보호 및 해양 자원 관리
- 메콩델타 해양 보안
- 해군 현대화 프로그램 지원

**중동 해양 안보:**
**UAE:**
- 호르무즈 해협 안보 강화
- 해상 에너지 시설 보호
- 연안 방어 시스템 구축
- 해양 드론 방어 체계

**사우디아라비아:**
- 홍해 연안 보안 시스템
- 해상 석유시설 보호
- 해적 대응 능력 강화
- 해양 국경 감시 체계

## 3. 혁신 기술 분야
**무인 해양 시스템:**
- 무인 수상정(USV) 기술
- 자율 수중정(AUV) 개발
- 해양 드론 군집 운용
- 원격 조종 잠수정

**AI 기반 해양 감시:**
- 위성-함정 연동 감시망
- 인공지능 표적 식별 시스템
- 빅데이터 기반 해양 상황 분석
- 예측 분석 시스템

**사이버-해양 융합:**
- 해양 사이버보안 시스템
- 스마트 항만 보안 기술
- 해상 통신 보안 강화
- 항법 시스템 보호

## 4. 국제 협력 모델
**기술 공유 플랫폼:**
- 해양 안보 기술 공동연구센터
- 다국적 해양 훈련 프로그램
- 해양 정보 공유 네트워크
- 표준화 협력 체계

**역량 건설 지원:**
- 해군 교육훈련 프로그램
- 해양 법 집행 역량 강화
- 해양 과학기술 협력
- 인적 자원 개발 지원

## 5. 수출 전략 및 목표
**단계별 수출 계획:**
- 2025년: 해양안보 분야 50억 달러
- 2027년: 동남아 해양 감시망 구축 완료
- 2030년: 해양안보 분야 100억 달러
- 2035년: 글로벌 해양안보 허브 구축

**핵심 수출 품목:**
- 연안경비함: 연간 20-30척 수출 목표
- 해양 감시 시스템: 통합 패키지 수출
- 해양 드론: 민군 겸용 시장 공략
- MRO 서비스: 장기 계약 기반 안정 수익

**성공 요인:**
- 고객 맞춤형 해양 솔루션 제공
- 현지 산업과의 협력 강화
- 해양 안보 교육 프로그램 병행
- 지속적인 기술 혁신 투자

**기대 효과:**
- 해양 산업 생태계 강화
- 조선업과 방산업 시너지 창출
- 동남아 해양 안보 파트너십 구축
- 글로벌 해양 기술 리더십 확보"""
            },
           
            # 19. AI무기 윤리적 고려사항
            {
                "id": 19,
                "patterns": ["AI", "기반", "무기체계", "개발", "수출", "윤리적", "고려사항"],
                "question": "AI 기반 무기체계 개발 및 수출에서 윤리적 고려사항은 무엇인가요?",
                "category": "AI/윤리",
                "response": """AI 기반 무기체계 개발 및 수출에서의 윤리적 고려사항은 다음과 같습니다:

## 1. 국제 규범 및 법적 프레임워크
**국제인도법 준수:**
- 제네바 협약 및 추가의정서 준수
- 민간인과 전투원 구별 원칙
- 과도한 피해 금지 원칙
- 예방 조치 의무 이행

**유엔 논의 동향:**
- 특정재래식무기금지협약(CCW) 논의 참여
- 완전자율무기체계(LAWS) 규제 논의
- 인간의 의미 있는 통제(Meaningful Human Control) 원칙
- 책임 소재 명확화 요구

**주요 제약사항:**
- 완전 자율 살상 무기 개발 금지
- 인간 개입 없는 공격 결정 금지
- 비례성 원칙 준수 필수
- 투명성 및 설명가능성 요구

## 2. 한국의 AI 무기 개발 원칙
**개발 가이드라인:**
- "인간 중심 AI" 원칙 적용
- 방어 목적 우선 개발
- 인간의 최종 결정권 보장
- 오작동 방지 안전장치 필수

**적용 분야 제한:**
- 대인 직접 공격 무기 개발 금지
- 감시 및 정찰 기능 중심
- 방어 시스템에 AI 적용
- 의사결정 지원 도구로 활용

**기술 개발 우선순위:**
- 위협 탐지 및 식별 시스템
- 자동 방어 시스템 (CIWS 등)
- 무인 감시 플랫폼
- 사이버 방어 AI 시스템

## 3. 수출 통제 체계
**수출 심사 기준:**
- 최종 사용자의 인권 기록 검토
- 분쟁 지역 수출 금지
- 테러 조직 전용 가능성 차단
- 국제법 위반 용도 방지

**기술이전 제한:**
- 핵심 AI 알고리즘 보호
- 학습 데이터 셋 보안 유지
- 소스코드 접근 제한
- 역설계 방지 조치

**모니터링 체계:**
- 수출 후 사용 현황 추적
- 계약 위반 시 제재 조치
- 정기적 현지 점검
- 국제기구와 정보 공유

## 4. 산업계 윤리 가이드라인
**기업 자율 규제:**
- AI 윤리 위원회 설치
- 개발자 윤리 교육 프로그램
- 내부 감사 체계 구축
- 투명성 보고서 발간

**산업 표준 마련:**
- AI 무기 개발 표준 수립
- 안전성 시험 프로토콜
- 윤리적 설계 원칙
- 국제 표준화 기구 참여

**이해관계자 참여:**
- 시민사회와 대화 채널
- 학계 전문가 자문 위원회
- 국제 NGO와 협력
- 투명한 정보 공개

## 5. 책임 있는 AI 무기 개발 방향
**기술적 안전장치:**
- 인간 승인 없는 공격 불가
- 실시간 인간 감독 시스템
- 오작동 시 자동 정지 기능
- 해킹 방지 보안 시스템

**운용 원칙:**
- 명확한 교전규칙(ROE) 설정
- 조작자 교육 및 인증 제도
- 정기적 성능 평가 및 개선
- 사고 시 조사 및 개선 체계

**국제 협력:**
- 다자간 AI 무기 규범 논의 참여
- 모범 사례 공유 및 확산
- 개발도상국 역량 건설 지원
- 평화적 이용 기술 공유

## 6. 미래 발전 방향
**지속가능한 개발:**
- 평화 목적 우선 기술 개발
- 민간 이익 창출 기술 전환
- 인도주의적 활용 방안 모색
- 환경 보호 기술 개발

**글로벌 리더십:**
- AI 무기 윤리 기준 선도
- 국제 논의 적극 참여
- 투명하고 책임감 있는 수출
- 평화 기여 이미지 구축

이러한 윤리적 고려사항을 통해 한국은 책임감 있는 AI 무기 개발국가로서의 위상을 확립하고, 지속가능한 방산 수출 기반을 마련할 수 있습니다."""
            },
           
            # 20. 글로벌 방산 공급망 위기 대응
            {
                "id": 20,
                "patterns": ["글로벌", "방산", "공급망", "위기", "상황", "한국", "대응", "전략"],
                "question": "글로벌 방산 공급망 위기 상황에서 한국의 대응 전략은 무엇인가요?",
                "category": "공급망 관리",
                "response": """글로벌 방산 공급망 위기 상황에서 한국의 대응 전략은 다음과 같습니다:

## 1. 공급망 위기 현황 분석
**주요 위기 요인:**
- 코로나19 팬데믹으로 인한 글로벌 공급망 차단
- 우크라이나 전쟁으로 인한 원자재 공급 중단
- 미-중 기술패권 경쟁으로 인한 공급망 분리
- 반도체 등 핵심 부품 공급 불안정

**한국 방산업 영향:**
- 핵심 부품 수입 의존도: 약 35%
- 특수 금속 및 희토류 수입 중단 위험
- 반도체 및 전자부품 공급 지연
- 생산 비용 증가 및 납기 지연

## 2. 공급망 다변화 전략
**지역별 공급원 다변화:**
**기존 의존 구조:**
- 미국: 반도체, 센서 (45%)
- 독일: 정밀기계, 광학장비 (25%)
- 일본: 전자부품, 소재 (20%)
- 기타: 10%

**다변화 목표 (2030년):**
- 미국: 30% (15%p 감소)
- 유럽: 25% (독일 외 확대)
- 아시아: 25% (한국, 대만, 싱가포르)
- 기타: 20% (이스라엘, 캐나다 등)

**핵심 품목별 전략:**
- 반도체: 한국 내 방산용 반도체 생산기지 구축
- 희토류: 호주, 캐나다 등 안정적 공급원 확보
- 특수강: 국내 생산능력 확대 및 재활용 체계 구축
- 복합재료: 국산화 기술 개발 및 생산 확대

## 3. 국내 공급망 강화
**방산 소재·부품·장비(소부장) 육성:**
- 핵심 소부장 100개 품목 국산화 추진
- 방산 소부장 전문기업 300개사 육성
- 총 3조원 규모 정부-민간 공동 투자
- 소부장 기술개발 생태계 구축

**국산화 우선순위 품목:**
1. 반도체: 방산용 특수 반도체 설계 및 생산
2. 센서: 적외선, 레이더, 음향 센서
3. 구동장치: 고성능 액추에이터, 모터
4. 소재: 내열합금, 복합재료, 코팅 기술

**중소기업 역량 강화:**
- 방산 소부장 전용 R&D 펀드 조성
- 대-중소기업 상생협력 프로그램
- 글로벌 품질 인증 지원
- 해외 기술 도입 및 M&A 지원

## 4. 디지털 공급망 관리 시스템
**공급망 가시성 확보:**
- 실시간 공급망 모니터링 시스템 구축
- 블록체인 기반 부품 이력 추적
- AI 기반 공급 위험 예측 시스템
- 디지털 트윈 기반 시뮬레이션

**협력 플랫폼 구축:**
- 방산 공급망 통합 정보 플랫폼
- 공급업체 간 정보 공유 체계
- 재고 최적화 및 공동 구매 시스템
- 긴급 상황 대응 프로토콜

## 5. 전략적 비축 시스템
**핵심 품목 비축:**
- 전략 물자 6개월 분 의무 비축
- 정부-기업 공동 비축창고 운영
- 순환 비축을 통한 품질 관리
- 비축 비용 지원 제도 운영

**비축 대상 품목:**
- 반도체 및 전자부품 (30일분)
- 희토류 및 전략 금속 (90일분)
- 특수 화학소재 (60일분)
- 정밀가공 부품 (45일분)

## 6. 국제 협력 강화
**우방국과의 공급망 협력:**
- 미국과 반도체 공급망 협력 협정
- EU와 소재 공급망 파트너십
- 일본과 부품 상호 공급 체계
- 호주와 광물 자원 장기 계약

**다자간 협력 체계:**
- 쿼드 공급망 이니셔티브 참여
- IPEF(인도태평양경제프레임워크) 활용
- AUKUS+ 공급망 협력 검토
- NATO 공급망 표준화 참여

## 7. 위기 대응 체계
**공급망 위기 대응 조직:**
- 방산 공급망 위기관리 센터 설치
- 24시간 모니터링 체계 운영
- 신속 대응팀 구성 및 운영
- 정부-업계 공동 대응 프로토콜

**비상 계획:**
- 공급 중단 시나리오별 대응 방안
- 대체 공급원 확보 계획
- 생산 우선순위 조정 방안
- 고객사 소통 및 지원 체계

**기대 효과:**
- 공급망 리스크 50% 감소
- 국산화율 35% → 60% 상승
- 공급망 관련 비용 20% 절감
- 글로벌 경쟁력 강화"""
            },
            # 21. AI/빅데이터 기술 변화 (추가)
            {
                "id": 21,
                "patterns": ["AI", "빅데이터", "기술", "방산", "무기체계", "적용", "변화", "예상", "인공지능", "머신러닝", "자동화"],
                "question": "AI와 빅데이터 기술이 방산 무기체계에 적용될 경우 어떤 변화가 예상되나요?",
                "category": "기술 변화",
                "response": """### 🤖 AI와 빅데이터 기술의 방산 무기체계 적용 및 변화 전망

## 🎯 주요 적용 분야별 변화

### 1. 지능형 무기체계
**AI 기반 자율 시스템:**
- **자율 표적 식별**: 머신러닝 기반 실시간 위협 탐지 및 분류
- **적응형 공격**: 상황에 맞는 최적 공격 전술 자동 선택
- **군집 운용**: 다수 무인기/로봇의 협조 작전 수행
- **예측 정비**: AI 기반 장비 고장 예측으로 95% 가동률 달성

### 2. 빅데이터 기반 의사결정 지원
**전술적 응용:**
- **실시간 전장 분석**: 다중 센서 데이터 융합으로 상황 인식 향상
- **위협 예측**: 과거 데이터 패턴 분석을 통한 선제적 대응
- **자원 최적화**: 병력, 장비, 보급품의 효율적 배치
- **작전 시뮬레이션**: 가상 전장에서 수백만 가지 시나리오 분석

### 3. 차세대 방어체계
**스마트 방어망:**
- **통합 방공**: AI가 다층 방어체계를 실시간 조율
- **사이버-물리 융합**: 사이버 공격과 물리적 공격 동시 대응
- **적응형 보안**: 위협 패턴 학습으로 자동 보안 강화
- **제로 트러스트**: AI 기반 동적 접근 제어 시스템

## 📊 기술별 구체적 변화

### AI 기술 적용
**현재 수준 → 미래 전망**
- 표적 식별률: 85% → 99.5% (2030년)
- 반응 시간: 3-5초 → 0.1초 이하
- 오인식률: 5% → 0.01% 이하
- 동시 처리 표적: 10개 → 1,000개 이상

### 빅데이터 활용
**데이터 처리 능력:**
- 실시간 분석량: TB급 → PB급 (1,000배 향상)
- 센서 융합: 10종 → 100+ 종류 동시 처리
- 예측 정확도: 70% → 95% 이상
- 의사결정 시간: 분 단위 → 초 단위

## 🌟 혁신적 변화 영역

### 1. 인간-기계 협업 체계
- **증강 지능**: AI가 인간 판단을 보조하는 협업 모델
- **직관적 인터페이스**: 음성, 제스처 기반 자연스러운 조작
- **상황 인식 강화**: AR/VR 기술로 전장 상황 실시간 시각화

### 2. 예측적 전쟁 수행
- **전장 시뮬레이션**: 디지털 트윈으로 가상 전투 무한 반복
- **확률 기반 전술**: 성공 확률이 높은 작전안 자동 제시
- **적응형 전략**: 상대방 패턴 학습으로 최적 대응책 수립

### 3. 자율형 군수 지원
- **스마트 보급**: AI가 소모품 수요를 예측하여 자동 보급
- **무인 수송**: 자율주행 차량/드론으로 위험지역 보급
- **적응형 생산**: 전장 상황에 맞춰 생산 라인 자동 조정

## ⚠️ 도전과제 및 고려사항

### 기술적 과제
- **데이터 품질**: 편향되지 않은 고품질 학습 데이터 확보
- **실시간 처리**: 전장 환경에서 안정적 고속 처리 보장
- **상호 운용성**: 기존 시스템과의 호환성 및 통합

### 윤리적 쟁점
- **자율성 한계**: 생사 결정에서 인간의 최종 통제권 유지
- **책임 소재**: AI 오작동 시 법적/도덕적 책임 귀속
- **투명성**: 알고리즘 의사결정 과정의 설명 가능성

## 🚀 한국의 대응 전략

### 기술 개발 방향
- **K-AI 무기체계**: 한국형 지능형 무기 플랫폼 구축
- **데이터 주권**: 군사 빅데이터 자주 관리 능력 확보
- **민군 융합**: 민간 AI 기술의 군사 적용 가속화

### 산업 생태계
- **AI 방산 벤처**: 전문 기업 육성 및 투자 확대
- **국제 협력**: 우방국과 AI 방산 기술 공동 개발
- **표준화 선도**: 국제 AI 무기 표준 제정 참여

## 📈 미래 전망 (2025-2035)

**단기 (2025-2027):**
- AI 보조 사격통제 시스템 실전 배치
- 빅데이터 기반 정보 분석 체계 구축
- 반자율 무인 시스템 운용 시작

**중기 (2028-2030):**
- 완전 자율 방어 시스템 실현
- AI 기반 통합 지휘체계 구축
- 예측적 군수 지원 체계 완성

**장기 (2031-2035):**
- 인간-AI 하이브리드 전투 체계
- 범용 인공지능(AGI) 군사 적용
- 완전 자율형 전투 생태계 구현

## 💡 결론
AI와 빅데이터 기술의 방산 적용은 단순한 성능 향상을 넘어 전쟁 양상 자체를 근본적으로 변화시킬 것입니다. 한국은 우수한 IT 기술력과 실전 경험을 바탕으로 이 분야에서 글로벌 리더십을 확보할 수 있는 기회를 맞고 있습니다."""
            },
            # 22. 극초음속 무기 개발 현황
            {
                "id": 22,
                "patterns": ["극초음속", "무기", "개발", "현황", "한국"],
                "question": "한국의 극초음속 무기 개발 현황은 무엇인가요?",
                "category": "첨단 방산 기술",
                "response": """한국은 국방과학연구소(ADD)를 중심으로 극초음속 무기 개발을 꾸준히 진행하고 있습니다. 2020년 8월 자체 개발 계획을 처음 공개했으며, 같은 해 12월 국방부 차원의 소요 결정에 포함시켜 본격적인 개발에 착수했습니다.

주요 개발 형태 및 목표는 다음과 같습니다:
*   **극초음속 순항 미사일 (HCM)**: '하이코어(Hycore)'라는 시험 발사체 개발을 진행 중이며, 이는 탄도미사일 기반의 극초음속 활공체(HGV)보다 기술 난이도가 높은 방식입니다. 2020년대 후반 또는 2030년대 초 실전 배치를 목표로 하며, 한국형 전투기 KF-21에 탑재될 가능성이 높습니다.
*   **극초음속 활공 비행체 (HGV)**: 초기 단계의 개념 연구를 진행하고 있습니다.
*   **핵심 기술 개발**: 극초음속 엔진과 내열 소재 개발에 집중하여 독자적인 개발 역량을 강화할 계획입니다.

ADD는 2004년부터 2007년까지 액체 램제트(Ram Jet) 추진기관을 개발했으며, 2010년부터 2017년까지 극초음속 핵심기술 응용연구 및 초고속 공기흡입 엔진 특화연구실을 운영했습니다. 2018년부터는 마하 5 이상의 지상발사형 극초음속 비행체를 개발 중이며, 2023년까지 비행 시험을 완료할 계획이었습니다. 2025년까지도 극초음속 미사일 개발이 진행 중인 것으로 확인됩니다.

북한 역시 극초음속 활공비행 전투부를 장착한 중장거리 고체탄도 미사일 '화성포-16나'형 발사에 성공했다고 발표하며 이 분야의 경쟁이 심화되고 있습니다."""
            },
            # 23. 지향성 에너지 무기 개발 현황
            {
                "id": 23,
                "patterns": ["지향성", "에너지", "무기", "개발", "현황", "한국", "기술적", "난제"],
                "question": "한국의 지향성 에너지 무기(DEW) 개발 현황과 주요 기술적 난제는 무엇인가요?",
                "category": "첨단 방산 기술",
                "response": """한국은 국방과학연구소(ADD)와 한화에어로스페이스를 중심으로 지향성 에너지 무기(DEW) 개발에 박차를 가하고 있습니다. DEW는 빛의 속도로 표적을 공격하여 즉시성을 강점으로 가지며 [4], 드론이나 미사일 요격에 활용될 수 있습니다.

주요 개발 현황 및 기술:
*   **고출력 마이크로파(HPM) 무기**: 현재 개발 중이며, 넓은 빔폭으로 여러 표적의 전자기기나 통신 시스템을 무력화하는 데 활용됩니다.
*   **고출력 레이저(HEL) 무기**: 드론, 미사일, 박격포탄 등 공중 위협 요격에 사용되며, 표적의 전자광학 센서를 무력화하거나 구조적 손상을 입힙니다.
    *   **레이저 대공무기 '천광'**: 국방과학연구소와 한화에어로스페이스가 개발한 '천광'은 2024년 육군 방공부대 전력화를 목표로 합니다. 2030년 이후에는 고출력의 블록-3 개발을 통해 중거리 드론 및 미사일 요격 능력을 갖추고 함정 및 항공기 탑재를 목표로 하고 있습니다/.
*   **DIRCM (지향성 적외선 방해장비)**: 국방과학연구소는 2014년부터 한국형 DIRCM 개발에 착수하여 2018년 세계 6번째로 개발에 성공했으며, 2022년 1월 한화시스템과의 운용 시험평가를 성공적으로 완료했습니다.[8] KF-21 전투기용 DIRCM 개발도 발표되었습니다.

주요 기술적 난제 및 극복 방안:
*   **열 관리**: 시스템에서 발생하는 열을 효율적으로 분산시키기 위한 첨단 냉각 시스템(액체 냉각, 열전소자 등) 및 열 재사용 기술 개발이 필요합니다.
*   **시스템 소형화 및 이동성**: 현재 대형 플랫폼에 의존하는 DEW 시스템을 소형화하여 이동성을 높이기 위해 모듈화된 디자인과 경량 재료 사용이 중요합니다.
*   **높은 비용**: 부품의 표준화 및 대량 생산을 통해 비용을 절감하고, 에너지 효율을 높여 운영 비용을 줄이는 기술 개발이 필요합니다."""
            },
            # 24. 양자 기술 국방 적용
            {
                "id": 24,
                "patterns": ["양자", "기술", "국방", "적용", "가능성", "한국", "연구", "방향"],
                "question": "국방 분야에서 양자 기술의 적용 가능성과 한국의 연구 방향은 무엇인가요?",
                "category": "첨단 방산 기술",
                "response": """양자 기술은 높은 보안성과 정밀성을 특징으로 하며, 국방 분야에서는 암호통신 및 정밀 탐지 분야에 활용될 가능성이 높습니다.

한국의 연구 방향 및 현황:
*   **국방 양자 기술 발전 지원**: 과학기술정보통신부(과기정통부)는 양자 기술을 10대 국방전략기술의 핵심 중 하나로 보고 지속적으로 지원할 계획입니다.
*   **국방 분야 적용 방안 모색**: 과기정통부는 '미래 국방 전략 포럼'을 통해 양자 기술의 국방 분야 효율적 적용 방안을 모색하고 있습니다.
*   **연구 개발 현황**: 국방과학연구소(ADD)는 군사 감시, 정찰, 통신 보안을 위한 양자 기술 R&D를 진행 중이며, 미래 전쟁 변화에 대응하기 위한 양자 R&D 가속화의 필요성을 강조합니다.
*   **민군 협력**: 한국과학기술연구원(KIST)은 양자 암호 네트워크 및 다이아몬드 기반 양자 센싱 등 민간 양자 R&D 역량을 국방에 적용하는 방안을 제안하며 민군 협력의 중요성을 강조합니다.
*   **주요 논의 분야**: 포럼에서는 양자 기술 관련 수출입 통제 및 공급망 위기 대응 방안, 그리고 효율적인 투자 방향 등이 논의되었습니다.

양자 기술은 실험실 단계에서 국방 현장 실증으로 나아가 기술 성숙도를 높이고 새로운 성장 동력을 창출할 것으로 기대됩니다."""
            },
            # 25. KF-21 스텔스 기술
            {
                "id": 25,
                "patterns": ["KF-21", "스텔스", "기술", "개발", "현황", "한국"],
                "question": "한국형 전투기 KF-21 보라매의 스텔스 기술 개발 현황은 어떠한가요?",
                "category": "첨단 방산 기술",
                "response": """한국형 전투기 KF-21 보라매는 점진적인 개량을 통해 5세대 스텔스 전투기로 발전할 목표를 가지고 있습니다.

주요 스텔스 기술 개발 현황:
*   **세미플라즈마 스텔스 기술**: 한국항공우주산업(KAI)의 중장기 기술 로드맵에 따르면 세미플라즈마 스텔스 기술이 본격적인 연구 개발 단계에 진입했으며, 이 분야에서 한국이 확고한 기술 우위를 점하고 있음이 확인되었습니다.
*   **음폐 신소재 및 플라즈마 기술 융합**: 한국이 개발한 음폐 전용 신소재는 메타물질 구조에 기반하며, 추후 플라즈마 기술과 융합되어 국산 항공기의 탐지 회피 능력을 극대화할 수 있을 것으로 기대됩니다.
*   **질화갈륨(GaN) 기반 AESA 레이더**: 한화시스템은 KF-21 레이더에 장착될 질화갈륨(GaN) 기반 송수신 장치 수량을 3,200개 이상으로 늘려 기존 대비 160% 이상 향상된 성능을 구현할 예정이며, 이는 탐지 거리를 최대 20배 확장하고 목표물을 훨씬 더 또렷하게 식별할 수 있게 합니다. 이를 통해 적국 전투기의 은밀 설계 구조까지 정밀하게 해석할 수 있는 단계에 도달했습니다.
*   **가오리-X 무인기**: 국방과학연구소(ADD)는 KF-21과 연동될 스텔스 무인전투기 가오리-X의 시범기 비행에 성공했으며, 꼬리 날개를 없애 레이더 반사면적을 최소화하는 설계를 적용했습니다. 2030년대 초 개발 완료를 목표로 스텔스 형상 설계, 전파 흡수 재료/복합재 구조, 적외선 흡수 재료, 주파수 선택적 전파 투과 복합재 기술 등 핵심 스텔스 기술을 개발하고 있습니다.

KF-21은 이미 실전용 무장을 장착한 시험 비행에 성공했으며, 첫 양산 기체의 조립도 완료 단계에 들어섰습니다."""
            },
            # 26. 유무인 복합전투체계 (MUM-T)
            {
                "id": 26,
                "patterns": ["유무인", "복합전투체계", "MUM-T", "개발", "현황", "한국", "KF-21", "가오리-X", "LAH"],
                "question": "한국의 유무인 복합전투체계(MUM-T) 개발 현황과 주요 사례는 무엇인가요?",
                "category": "첨단 방산 기술",
                "response": """한국의 유무인 복합전투체계(MUM-T)는 미래 전장의 핵심 개념으로, KF-21 보라매와 스텔스 무인전투기 가오리-X, 그리고 한국항공우주산업(KAI)의 소형무장헬기(LAH)와 무인기 연동 개발이 주요 사례입니다.

주요 개발 현황 및 사례:
*   **KF-21 보라매 + 스텔스 무인전투기 가오리-X**:
    *   KF-21 개발 계획 'Block III'에서는 무인기 운용을 염두에 두고 있으며, KUS-X 프로젝트를 통해 두 시스템이 팀으로 운용될 예정입니다.
    *   AI를 활용한 무인전투기는 적 방공망 침투, 정보 수집, 레이더 기지 타격, 공중전 수행이 가능한 첨단 무기체계입니다.
    *   국방과학연구소(ADD)는 가오리-X 무인기 시범기 비행에 성공했으며, 꼬리 날개를 없애 레이더 반사면적을 최소화하는 스텔스 설계를 적용했습니다. 2030년대 초 개발 완료를 목표로 합니다.
*   **KAI LAH + 무인기**:
    *   한국 육군과 KAI는 차세대 정찰 및 경무장헬기인 LAH와 군단급 무인정찰기 UAV2, 그리고 자폭형 무인기를 연동하여 정찰 및 공격 임무를 수행하는 시스템을 개발 중입니다.
    *   이는 네트워크전 능력을 강화하고 항공기 생존성을 보장하기 위한 노력의 일환입니다.
    *   LAH는 소형 무인기의 운용 플랫폼 역할을 하며, JTDLS, 기내 데이터 링크 장비, 배회형 자폭 드론 제어 시스템 등을 탑재합니다.
    *   UAV2는 고해상도 MWIR 이미지와 X-Band SAR를 통해 정찰 이미지를 획득하며, LAH 및 지상 C2 노드와 연동됩니다.
    *   **임무 수행 능력**: 구조 임무, 정밀 타격, 자폭 공격, 군집 드론 운용 등 다양한 전술적 활용이 가능합니다.

MUM-T는 공격력 강화와 조종사 생존성 향상에 기여하며, 한국군은 이러한 시스템을 통해 미래 전장 환경에 대비하고 있습니다."""
            },
            # 27. 차세대 포병 시스템 개발
            {
                "id": 27,
                "patterns": ["차세대", "포병", "시스템", "개발", "계획", "K9A2", "K9A3", "한국"],
                "question": "한국의 차세대 포병 시스템 개발 계획과 K9A2, K9A3의 역할은 무엇인가요?",
                "category": "첨단 방산 기술",
                "response": """한국은 K9 자주포의 성능 개량을 통해 차세대 포병 시스템 개발을 추진하고 있습니다. 이는 미국 XM1299 차세대 자주포와 동등 이상의 사거리를 확보하여 한국군 화력 증강에 기여하고, 글로벌 자주포 수출 시장에서의 경쟁 우위를 유지하기 위한 전략입니다.

개발 계획 및 목표:
*   **사업명**: '초장사정 화포체계 사거리 증대기술 과제'로, 국방과학연구소(ADD) 주도로 2022년 9월부터 2027년 8월까지 총 496억 원의 예산으로 진행됩니다.
*   **주요 목표**: 차세대 자주포 및 80km 이상 사거리의 차세대 연장 사거리 포탄 개발입니다.
*   **핵심 기술**: 새로운 58구경장 포신, 고체 램제트 로켓, 복합 추진 장거리 포탄, 미국 XM654 슈퍼차지에 상응하는 초장사정 추진제 개발이 포함됩니다.

K9A2 및 K9A3의 역할:
*   **K9A2**: 현재 국내에서 개발이 진행 중이며, 향후 K9A3로의 발전을 위한 기반이 됩니다. 2022년 9월 미국 유마 시험장에서 K9A1 자주포(K9A2의 전신)와 K10 탄약보급차가 미국 표준탄 및 신형 복합추진탄을 성공적으로 보급 및 사격하는 시험을 완료했습니다.
*   **K9A3**: 새로운 58구경장 포신과 연장 사거리 탄약을 탑재할 미래 K9 시리즈의 반복으로 구상되고 있습니다. K9A1보다 훨씬 더 긴 사거리를 확보하는 것이 목표입니다.

이러한 공격적인 개발은 미국과 독일 등 경쟁국들도 장거리 포병 기술 개발에 적극 나서고 있기 때문이며, 한국은 K9 자주포의 수출 성공을 이어가기 위해 기술 우위를 유지하고자 합니다."""
            },
            # 28. 한국형 미사일 방어체계 (KAMD)
            {
                "id": 28,
                "patterns": ["한국형", "미사일", "방어체계", "KAMD", "발전", "방향", "북한", "미사일", "위협"],
                "question": "한국형 미사일 방어체계(KAMD)의 발전 방향과 북한 미사일 위협에 대한 대응 전략은 무엇인가요?",
                "category": "첨단 방산 기술",
                "response": """한국군은 북한의 미사일과 장사정포 위협에 대응하기 위해 '한국형 미사일 방어체계'(KAMD)를 발전시키고 있습니다. 2035년까지 다양한 고도에서 여러 차례 요격이 가능한 다층 방어 체계를 구축할 계획입니다.

KAMD의 주요 특징 및 북한 미사일 대응 방안:
*   **고도별 방어 체계**:
    *   **고도 40km 이하**: 패트리엇과 천궁-II 미사일로 방어합니다.
    *   **고도 70km 정도**: 우리 기술로 양산에 나선 L-SAM을 활용합니다.
    *   **고도 100km 이상**: 이지스함에서 발사하는 SM-3를 도입하고, L-SAM 2단계를 2035년까지 약 2조 7천억 원을 들여 전력화할 방침입니다.
*   **장사정포 대응**: 고도 10km 이하로 날아오는 북한 장사정포를 막기 위해 한국형 아이언돔인 LAMD도 개발하고 있습니다.
*   **다층 방어**: 다양한 고도에서 여러 차례 요격을 시도하는 다층 방어 방식을 채택하고 있습니다.
*   **미국 골든돔과의 차이점**: 미국 골든돔이 지구 반대편에서 높이 날아오는 미사일을 우주 공간에서 상승 단계부터 파괴하는 것을 목표로 하는 반면, 한국 KAMD는 북한과 가까운 지리적 특성상 미사일의 하강 단계에서 파괴하는 데 중점을 둡니다.
*   **북한의 위협 및 KAMD 발전 방향**: 북한은 최근 이스칸데르 미사일 개량 및 극초음속 활공체 개발을 통해 하강 단계에서 변칙 비행으로 KAMD를 뚫으려 하고 있지만, 한국군은 KAMD를 지속적으로 발전시켜 충분히 막아낼 수 있다고 강조합니다."""
            },
            # 29. 워리어 플랫폼 개발 로드맵
            {
                "id": 29,
                "patterns": ["워리어", "플랫폼", "개발", "로드맵", "목표", "한국"],
                "question": "한국군의 워리어 플랫폼 개발 로드맵과 최종 목표는 무엇인가요?",
                "category": "첨단 방산 기술",
                "response": """워리어 플랫폼은 개인 전투원의 전투력 향상을 위한 사업으로, 전투복, 전투화, 방탄복, 개인화기 부가장비, 야간투시경 등 개인 전투 장비의 현대화 보급을 추진합니다.

개발 로드맵 및 목표:
*   **초기 단계 (2017년 시작)**: 개념 연구 및 공급업체 선정을 통해 특전사 등 일부 부대에 현대화된 장비 보급을 시작했습니다.
*   **확대 계획**: 2020년 국회 국방위 국정감사에서는 워리어 플랫폼 보급 대상을 4만 4천 명에서 14만 4천 명으로 확대하고, 이를 위해 3,331억 원의 예산이 필요하다고 보고되었습니다.
*   **장비 유형**: 의류, 장구, 장비, 무기체계 등 총 33종의 품목으로 구성됩니다.
*   **국산화 전략**: 국내 기술이 충분한 품목은 국산화를 우선하고, 아직 부족한 품목은 해외 제품을 도입하되 장기적으로 국산화를 추진합니다.
*   **최종 목표 (2026년 이후)**: 워리어 플랫폼을 단일 무기체계로 개발하여 전투체계와 통합된 지능형 개인전투체계를 구축할 계획입니다. 이는 첨단 기술 접목을 통해 실질적인 효과를 거두고, 작전 임무 수행에 최적화된 개인 전투체계를 확보하는 것을 목표로 합니다.

워리어 플랫폼은 고성능 확대경, 야간 조준경, 소음기 등 다양한 첨단 장비의 도입을 포함하며 , 국방부는 향후 15년 계획을 담은 국방 기술서를 통해 이러한 첨단 무기 체계 확보 계획을 체계적으로 지원할 예정입니다."""
            },
            # 30. 정밀유도무기 시장 촉진 요인
            {
                "id": 30,
                "patterns": ["정밀유도무기", "시장", "촉진", "요인", "한국", "경쟁력"],
                "question": "정밀유도무기(PGM) 시장의 주요 촉진 요인과 한국의 경쟁력은 무엇인가요?",
                "category": "첨단 방산 기술",
                "response": """정밀유도무기(PGM) 시장의 주요 촉진 요인은 다음과 같습니다 :
*   **국방 예산 증가**: 많은 국가들이 국방 현대화를 위한 예산을 증액하고 있으며, PGM에 대한 투자가 증가하고 있습니다.
*   **지정학적 긴장 고조**: 동유럽, 중동, 아시아태평양 등의 지역에서 안보 우려가 높아지면서 군사 대비태세가 강화되고 PGM 조달이 활발해지고 있습니다.
*   **정밀 전쟁으로의 전환**: 부수적 피해를 줄이고 작전 효율성을 향상시키는 것이 중요해지면서 PGM 채택이 늘고 있습니다.
*   **무인 시스템의 성장**: PGM과 UAV 등 무인 플랫폼의 통합은 작전 능력을 확장하고 감시 및 공격 작전을 강화합니다.
*   **대테러 및 비대칭 전쟁**: 인구 밀집 지역에서의 위협 제거에 정밀 조준이 필수적이므로 PGM이 중요하게 활용됩니다.
*   **스마트 군수품 수요 증가**: 네트워크 중심 전쟁의 추세는 전장 관리 시스템과 통신할 수 있는 스마트 탄약에 대한 수요를 촉진합니다.

한국의 정밀유도무기 경쟁력:
한국은 초음속 전투기 FA-50, 함대함 유도무기 해성, 중거리 지대공 유도탄 천궁-II 등 다양한 정밀유도무기를 개발하여 수출하고 있습니다. 특히 LIG넥스원의 천궁-II는 다수 시험 발사에서 100% 명중률을 기록하며 성능을 검증받았고, 중동 주요 3개국에 수출 계약을 체결하며 명성을 높였습니다. 한국 무기는 훈련을 통한 성능 검증과 적합한 기후 조건을 갖추고 있어 경쟁력을 확보하고 있습니다.[23] 아시아태평양 지역에서 일본과 함께 미사일 프로그램을 강화하며 지역 위협에 대응하고 있습니다."""
            },
            # 31. 북미 방산 시장 진출
            {
                "id": 31,
                "patterns": ["북미", "방산", "시장", "진출", "기대감", "한국", "경쟁력"],
                "question": "한국 방위산업의 북미 시장 진출 기대감과 주요 경쟁력은 무엇인가요?",
                "category": "글로벌 시장 및 전략",
                "response": """한국 방위산업(K-방산)의 북미 시장 진출에 대한 기대감이 커지고 있으며, 특히 도널드 트럼프 전 미국 대통령의 재집권을 계기로 이러한 기회가 더욱 확대될 것으로 전망됩니다.[24] 미국은 연간 국방 예산이 1000조원이 넘는 세계 최대 방산 시장으로, 한국 방위산업의 '꿈의 무대'로 불립니다.

한국 방위산업의 주요 경쟁력은 다음과 같습니다 :
*   **높은 기술력**: K-방산은 높은 기술력을 바탕으로 성장했습니다.
*   **가격 경쟁력**: 가격 경쟁력 또한 K-방산의 강점 중 하나입니다.
*   **신속한 납기**: 빠른 납기 능력은 K-방산 '신드롬'의 직접적인 촉매제 역할을 했습니다.
*   **정부 지원**: 1970년대부터 시작된 '자주국방'에서 비롯된 정부 지원도 큰 배경입니다.
*   **러시아-우크라이나 전쟁**: 2022년 발발한 러시아-우크라이나 전쟁은 K-방산 '신드롬'의 직접적인 촉매제 역할을 했습니다.

현재 K-방산은 지상군 무기(장갑차, 전차, 화포) 분야에서 국내 독자 개발 및 생산을 넘어 전 세계 최상위권 수준으로 알려져 있습니다. 항공 분야에서는 고등 훈련기(T-50), 한국형 기동 헬기(수리온), 차세대 전투기(KF-X)까지 기술이 상당 부분 발전했으며, 해군 함정 분야는 세계 1등 조선업 기술이 뒷받침하고 있습니다.

주요 진출 품목 및 기업 노력:
*   **한화에어로스페이스**: 전 세계 자주포 시장 점유율이 70%에 육박하는 K9 자주포의 미국 수출 계약에 공을 들이고 있으며, 미국 육군과 자주포 현대화 사업(SPH-M) 추진을 위한 성능 시험 계약을 맺었습니다.
*   **LIG넥스원**: 미국 국방부 주관 해외비교시험(FCT)을 통과한 유도 로켓 비궁의 미국 수출을 추진 중입니다.
*   **한국항공우주산업(KAI)**: 록히드마틴과 개발 중인 FA-50 경공격기의 개량형 'TF-50'을 앞세워 미 해군 고등·전술 훈련기(UJTS) 도입 사업을 목표로 하고 있습니다.

전문가들은 최첨단 무기는 미국이 직접 생산하겠지만, 재래식 무기나 성능 개량 무기, 한국산 K9 자주포, LIG넥스원의 '비궁', KAI의 FA-50 등 고등 훈련기 수출 환경은 유리하게 전개될 것이라고 전망합니다."""
            },
            # 32. 유럽 방산 시장 경쟁력
            {
                "id": 32,
                "patterns": ["유럽", "방산", "시장", "경쟁력", "한국", "기회"],
                "question": "유럽 방산 시장에서 한국 방위산업의 경쟁력과 기회는 무엇인가요?",
                "category": "글로벌 시장 및 전략",
                "response": """유럽 국가들이 '안보 독립' 기조를 가속화하면서 한국 방산에 연간 약 113조원 규모의 새로운 시장이 열리고 있습니다. 유럽 내 자체적으로 무기 수요를 충족하기 어려운 상황에서, 이미 생산 라인을 갖춘 한국 방산업체들이 경쟁력을 가질 수 있다는 분석이 나옵니다.

유럽 방산 시장의 변화와 한국의 기회:
*   **국방 예산 확대**: 유럽 각국의 방산 투자가 확대되면서 국내 방산업체들이 수혜를 입을 가능성이 커지고 있습니다.
*   **성장률 증가**: 2014년 크림반도 사태 이후 NATO 회원국들의 방산 시장은 연평균 3.6% 성장했으며, 2022년 러시아-우크라이나 전쟁 이후에는 성장률이 8.2%로 상승했습니다. 종전 이후에는 이보다 더 빠르게 확대될 가능성이 높습니다.
*   **EU의 재무장 계획**: 우르줄라 폰데어라이엔 EU 집행위원장은 약 8000억 유로(약 1256조 원) 규모의 '유럽 재무장' 계획을 발표하며 자체적인 방산 역량 강화를 강조했습니다. 이 계획은 유럽산 무기 우선 조달 원칙을 세웠지만, 한국 등 역외 방산 강국과의 협력 심화도 명시하고 있습니다.
*   **미국의 역할 변화**: 피터 헤그세스 미국 국무장관은 미국이 영구적인 '평화 보증인' 역할을 할 수 없음을 언급하며 유럽이 자체 안보에 대한 책임을 져야 한다고 밝혔습니다. 이는 한국 방산에 더 많은 기회를 제공할 수 있습니다.

한국 방산업체들은 높은 기술력, 가격 경쟁력, 신속한 납기 능력을 바탕으로 유럽 시장에서 큰 인기를 얻고 있으며, 폴란드와 같은 동유럽 국가들에 대한 방산 수출을 증가시키고 있습니다."""
            },
            # 33. 오세아니아 방산 협력 (AUKUS Pillar 2)
            {
                "id": 33,
                "patterns": ["오세아니아", "AUKUS", "필러 2", "협력", "한국", "참여", "논의", "고려사항"],
                "question": "오세아니아 지역의 AUKUS 필러 2 협력에서 한국의 참여 논의 현황과 고려사항은 무엇인가요?",
                "category": "글로벌 시장 및 전략",
                "response": """AUKUS(호주, 영국, 미국)는 중국의 군사력 증강에 대응하기 위한 3자 안보-국방 파트너십으로, 특히 필러 2는 해저 기술, 양자 컴퓨팅, 인공지능, 첨단 사이버, 극초음속 미사일, 전자전 등 최첨단 군사 기술 개발 협력을 포함합니다.

한국의 참여 논의 현황:
*   2024년 9월, AUKUS 3국은 캐나다, 뉴질랜드, 그리고 한국과 필러 2의 첨단 역량에 대해 협의 중임을 밝혔습니다.
*   한국과 오커스 국가들(호주, 영국, 미국)의 관계는 일본에 비해 불균형하지만, 2021년 포괄적 전략적 동반자 관계(CSP) 발표 이후 한-호주 관계는 점차 강화되고 있으며, 특히 방위산업 분야에서 자주포 및 보병전투차량 계약이 있습니다.

한국의 참여 고려사항:
*   **필러 2 협력 국가의 고려사항**: AUKUS 국방장관 공동성명에 따르면, 필러 2 협력 국가가 충족해야 할 다섯 가지 고려사항은 기술 혁신, 자금 조달 능력, 산업적 강점, 정보 보호 능력, 인도-태평양 지역의 평화와 안정 증진 노력입니다.
*   **자체 방위산업 수출 야망**: 한국이 오커스 필러 2에 참여할 경우, 자체 방위산업 수출 야망에 미칠 영향을 신중하게 고려해야 합니다. 한국의 궁극적인 목표가 미국 주도 방위산업 생태계에 통합하는 것이라면 오커스 가입은 좋은 학습 모델이 될 수 있지만, 현재 많은 한국 방위산업 기업은 자체 기술 및 공급망 확장에 노력하고 있습니다.

한국이 고려할 수 있는 전략적 방안:
*   **초기 대응(go hard and go early)**: 오커스의 초기 단계에 가입하여 필러 2 내에서 적극적으로 의제를 형성하는 것입니다.
*   **플러그 앤 플레이(plug and play)**: 정보 공유, 양자 컴퓨팅, 사이버 등 일부 분야에서는 오커스 국가들과 협력하지만, 한국의 'K-방산'이 주도하는 극초음속 미사일, AI에 있어서는 주도권 협상을 시도하는 것입니다.
*   **필러 3(Pillar 3)**: 오커스 및 비오커스 국가들과 협력하여 155mm 포탄, 스팅어 대공 미사일, 재블린 대전차 시스템, 다연장 로켓 시스템 등 공통으로 생산할 수 있는 탄약 및 무기 시스템 분야를 확장하는 것입니다. 이는 필러 1과 2에서 발생하는 복잡한 법적 수출 통제를 피하면서도 오커스 국가들과 협력할 수 있는 방안입니다.

결론적으로, 필러 2 확장은 미국, 호주, 영국, 그리고 미국 동맹국 및 파트너국 간 방위산업협력을 강화하는 데 있어 중요한 단계가 될 것이며, 한국은 군사 기술의 강점과 약점을 분석하여 전략적 선택을 해야 합니다."""
            },
            # 34. 다자간 방산 협력의 중요성
            {
                "id": 34,
                "patterns": ["다자간", "방산", "협력", "중요성", "한국", "참여", "확대", "방안"],
                "question": "다자간 방산 협력의 중요성과 한국의 참여 확대 방안은 무엇인가요?",
                "category": "글로벌 시장 및 전략",
                "response": """다자간 방산 협력은 국가 간 협력 네트워크 강화, 공통의 안보 위협 인식을 통한 외교적 정책 목표 공유, 집단 안보 강화, 공동 연구 개발을 통한 비용 절감, 상호운용성 확대, 기술 발전 촉진, 참여국의 경제 성장 등 다양한 전략적 이점을 제공합니다.

다자간 방산 협력의 중요성:
*   **협력 네트워크 강화**: 방산 계약을 통해 기술 이전, 정보 교환, 합동 훈련 실시 등 구체적인 협력 행위에 양국 정부를 반복적으로 참여시킴으로써 협력 네트워크를 강화합니다.
*   **외교적 정책 목표 공유 및 연대 구축**: 공통의 안보 위협에 대한 인식을 통해 외교적 정책 목표를 공유하고 국제사회에서 긴밀한 연대를 구축하는 효과가 있습니다.
*   **집단 안보 강화**: 방위산업 협력을 통해 동맹을 강화하고 신뢰를 형성할 수 있으며, 전략적 이익과 공통 안보 과제에 대응할 수 있는 강력한 네트워크를 구축하여 새로운 위협에 대한 대응력을 강화하고 지정학적 불안정성 확대·고조 속에서도 집단 안보를 심화할 수 있습니다.
*   **공동 연구 이니셔티브**: 공동 연구 개발은 규모의 경제를 통해 참여국의 비용을 절감하고 제한된 자원을 효율적으로 활용할 수 있게 합니다.
*   **상호운용성 확대**: 다국적 군사 작전과 합동 임무가 확대되면서 동맹국 간의 상호운용성이 필수적으로 요구되며, 방위 역량, 표준, 절차를 조정하고 공통의 장비·물류·정비 표준을 사용하며 표준화된 훈련을 실행함으로써 운용 효과를 극대화할 수 있습니다.
*   **기술 발전**: 연구 개발 협력으로 국가의 개별 역량을 넘어선 복잡한 방위 문제를 해결할 수 있으며, 새로운 기술을 개발하고 혁신을 촉진할 수 있습니다.
*   **경제 성장**: 방산 협력은 참여국의 경제 성장에도 기여할 수 있으며, 방산 산업의 발전과 일자리 창출을 촉진합니다.
한국의 참여 확대 방안:
*   **다자간 방산 협력 참여 확대**: 한국은 다자간 방산 협력에 적극 참여하여 국제사회에서의 입지를 강화하고, 동맹국 및 파트너국과의 협력을 심화할 수 있습니다.
*   **기술 이전 및 정보 교환**: 방산 계약을 통해 기술 이전과 정보 교환을 활성화하고, 합동 훈련을 실시하여 협력 네트워크를 강화할 수 있습니다.
*   **공통의 안보 위협 인식**: 공통의 안보 위협에 대한 인식을 통해 외교적 정책 목표를 공유하고, 국제사회에서 긴밀한 연대를 구축할 수 있습니다.
*   **집단 안보 강화**: 방위산업 협력을 통해 동맹을 강화하고 신뢰를 형성하여 새로운 위협에 대한 대응력을 높일 수 있습니다.
*   **공동 연구 개발**: 공동 연구 개발을 통해 참여국의 비용을 절감하고 제한된 자원을 효율적으로 활용할 수 있습니다.
*   **상호운용성 확대**: 다국적 군사 작전과 합동 임무에 대비하여 동맹국 간의 상호운용성을 강화하고, 표준화된 훈련을 실행하여 운용 효과를 극대화할 수 있습니다.
*   **기술 발전 촉진**: 연구 개발 협력을 통해 새로운 기술을 개발하고 혁신을 촉진할 수 있습니다.
*   **경제 성장 기여**: 방산 협력은 참여국의 경제 성장에도 기여할 수 있으며, 방산 산업의 발전과 일자리 창출을 촉진합니다.
*   **국제 방산 협력 네트워크 구축**: 한국은 다자간 방산 협력을 통해 국제 방산 협력 네트워크를 구축하고, 동맹국 및 파트너국과의 협력을 심화할 수 있습니다."""
            }
        ]
   
    def find_best_match(self, query: str) -> Optional[str]:
        """개선된 질문-답변 매칭 (디버깅 로그 포함)"""
        query_lower = query.lower().strip()
       
        best_match = None
        best_score = 0
        best_qa_info = None
       
        # 디버깅용 로그
        logger.info(f"Searching for match: '{query[:50]}...'")
       
        for qa in self.qa_database:
            score = 0
            patterns = qa["patterns"]
           
            # 패턴 매칭 점수 계산
            matched_patterns = []
            for pattern in patterns:
                if pattern in query_lower:
                    score += 1
                    matched_patterns.append(pattern)
           
            # 정규화된 점수 (매칭된 패턴 수 / 전체 패턴 수)
            pattern_score = score / len(patterns) if patterns else 0
           
            # 추가: 질문 자체와의 유사도도 고려
            question_similarity = SequenceMatcher(None, query_lower, qa["question"].lower()).ratio()
           
            # 최종 점수: 패턴 매칭 70% + 질문 유사도 30%
            final_score = pattern_score * 0.8 + question_similarity * 0.2
           
            # 디버깅 로그
            if matched_patterns or question_similarity > 0.2:
                logger.info(f"  QA #{qa['id']}: patterns={matched_patterns}, sim={question_similarity:.2f}, final={final_score:.2f}")
           
            if final_score > best_score and final_score > 0.5:  # 30% 이상 매칭
                best_score = final_score
                best_match = qa["response"]
                best_qa_info = qa
       
        if best_match:
            logger.info(f"✅ Best match found: QA #{best_qa_info['id']} (score: {best_score:.2f})")
            logger.info(f"   Category: {best_qa_info['category']}")
        else:
            logger.info("❌ No match found above threshold (0.5)")
       
        return best_match
   
    def get_all_questions(self) -> List[str]:
        """모든 질문 목록 반환 (디버깅용)"""
        return [qa["question"] for qa in self.qa_database]
   
    def get_question_by_id(self, qa_id: int) -> Optional[Dict]:
        """ID로 특정 질문-답변 조회"""
        for qa in self.qa_database:
            if qa["id"] == qa_id:
                return qa
        return None
   
    def get_database_stats(self) -> Dict:
        """데이터베이스 통계 조회"""
        categories = {}
        for qa in self.qa_database:
            category = qa["category"]
            if category not in categories:
                categories[category] = 0
            categories[category] += 1
       
        return {
            "total_questions": len(self.qa_database),
            "categories": categories,
            "id_range": f"1-{len(self.qa_database)}"
        }

class ResponseDiversityManager:
    """응답 다양성 검증 로직"""
   
    def __init__(self, max_history=10, similarity_threshold=0.65):
        self.response_history = []
        self.max_history = max_history
        self.similarity_threshold = similarity_threshold
        self.rejected_responses = []
   
    def add_response(self, query: str, response: str):
        """응답 기록 추가"""
        self.response_history.append({
            "query": query,
            "response": response,
            "timestamp": time.time(),
            "keywords": self._extract_keywords(response)
        })
       
        if len(self.response_history) > self.max_history:
            self.response_history.pop(0)
   
    def _extract_keywords(self, text: str) -> List[str]:
        """키워드 추출"""
        keywords = []
        defense_terms = ["미사일", "방공", "항공", "해군", "협력", "투자", "수출",
                        "기술이전", "무인", "드론", "레이더", "사이버", "AI", "개발",
                        "인도", "UAE", "브라질", "동남아", "중동", "아프리카"]
       
        for term in defense_terms:
            if term in text:
                keywords.append(term)
        return keywords
   
    def check_similarity(self, new_response: str) -> Tuple[bool, float]:
        """응답 유사도 검사"""
        if not self.response_history:
            return False, 0.0
       
        max_similarity = 0.0
        for record in self.response_history[-5:]:
            similarity = SequenceMatcher(None, new_response, record["response"]).ratio()
            max_similarity = max(max_similarity, similarity)
           
            if similarity > self.similarity_threshold:
                return True, similarity
       
        return False, max_similarity
   
    def get_diversity_metrics(self) -> Dict:
        """다양성 메트릭 계산"""
        if len(self.response_history) < 2:
            return {"diversity_score": 1.0, "avg_similarity": 0.0}
       
        similarities = []
        responses = [r["response"] for r in self.response_history[-5:]]
       
        for i in range(len(responses)):
            for j in range(i+1, len(responses)):
                sim = SequenceMatcher(None, responses[i], responses[j]).ratio()
                similarities.append(sim)
       
        avg_similarity = sum(similarities) / len(similarities) if similarities else 0
        diversity_score = 1.0 - avg_similarity
       
        return {
            "diversity_score": diversity_score,
            "avg_similarity": avg_similarity,
            "total_responses": len(self.response_history),
            "rejected_count": len(self.rejected_responses)
        }

class DefenseCooperationLlama:
    """PDF 데이터 완전 통합된 방산 협력 LLM 시스템"""
   
    def __init__(self, config: ModelConfig, knowledge_base, prompt_engineer):
        self.config = config
        self.kb = knowledge_base
        self.prompt_engineer = prompt_engineer
        self.tokenizer = None
        self.model = None
        self.conversation_history = []
       
        # PDF 데이터 완전 통합
        self.pdf_qa_database = CompletePDFQuestionAnswerDatabase()
        self.diversity_manager = ResponseDiversityManager()
        self.used_templates = []

    def initialize_model(self):
        """모델 초기화"""
        try:
            logger.info(f"Model loading: {self.config.model_name}")
           
            self.tokenizer = AutoTokenizer.from_pretrained(
                self.config.model_name,
                trust_remote_code=True
            )
           
            if self.tokenizer.pad_token is None:
                self.tokenizer.pad_token = self.tokenizer.eos_token

            # T5는 Seq2Seq 모델이므로 AutoModelForSeq2SeqLM 사용
            if "t5" in self.config.model_name.lower():
                self.model = AutoModelForSeq2SeqLM.from_pretrained(
                    self.config.model_name,
                    device_map="cpu",
                    torch_dtype=torch.float32,
                    trust_remote_code=True,
                    low_cpu_mem_usage=True
                )
            else:
                self.model = AutoModelForCausalLM.from_pretrained(
                    self.config.model_name,
                    device_map="cpu",
                    torch_dtype=torch.float32,
                    trust_remote_code=True,
                    low_cpu_mem_usage=True
                )
           
            logger.info("✅ Model initialized successfully")
           
        except Exception as e:
            logger.error(f"❌ Model initialization failed: {e}")
            self._setup_dummy_mode()

    def _setup_dummy_mode(self):
        """더미 모드 설정"""
        self.model = "dummy_model"
        self.tokenizer = "dummy_tokenizer"
        logger.info("✅ Dummy mode activated")

    def generate_response(self, user_query: str, use_history: bool = True) -> Dict:
        """PDF 데이터 우선 검색하는 개선된 응답 생성 시스템"""
        start_time = time.time()
       
        try:
            # 1. 질문이 지식 베이스 범위 내인지 확인
            if not self._is_defense_related(user_query):
                return {
                    "query": user_query,
                    "response": "죄송합니다. 해당 질문은 방산 협력 전략 분야를 벗어난 내용으로 보입니다. 방산 수출, 기술 협력, 국가별 전략, 군사 기술 등에 관련된 질문을 해주시면 도움을 드릴 수 있습니다.",
                    "generation_time": time.time() - start_time,
                    "model_info": {"mode": "out_of_scope"},
                    "in_scope": False
                }
           
            # 2. PDF 데이터에서 우선 검색 (가장 정확한 답변)
            pdf_match = self.pdf_qa_database.find_best_match(user_query)
           
            if pdf_match:
                logger.info(f"PDF match found for query: {user_query[:50]}...")
               
                self.diversity_manager.add_response(user_query, pdf_match)
               
                return {
                    "query": user_query,
                    "response": pdf_match,
                    "generation_time": time.time() - start_time,
                    "model_info": {
                        "model_name": self.config.model_name,
                        "mode": "pdf_database_match",
                        "source": "complete_pdf_data"
                    },
                    "response_length": len(pdf_match),
                    "in_scope": True,
                    "diversity_info": self.diversity_manager.get_diversity_metrics()
                }
           
            # 3. PDF에서 찾지 못한 경우 기존 로직 사용
            logger.info(f"No PDF match, generating contextual response for: {user_query[:50]}...")
           
            context_info = self._get_context_from_kb(user_query)
           
            try:
                if self.model == "dummy_model" or self.model is None:
                    response = self._generate_contextual_response(user_query, context_info)
                    mode = "enhanced_dummy"
                else:
                    response = self._generate_real_response(user_query, context_info)
                    mode = "real_model"
               
                # 응답 품질 검증
                if not response or len(response.strip()) < 100:
                    response = self._generate_fallback_response(user_query, context_info)
                    mode = "fallback"
               
                # 응답 다양성 검증
                is_too_similar, similarity = self.diversity_manager.check_similarity(response)
                if is_too_similar:
                    response = self._enhance_response_diversity(response, user_query)
                    mode += "_diversified"
               
                self.diversity_manager.add_response(user_query, response)
               
                return {
                    "query": user_query,
                    "response": response,
                    "generation_time": time.time() - start_time,
                    "model_info": {
                        "model_name": self.config.model_name,
                        "mode": mode,
                        "temperature": self.config.temperature
                    },
                    "response_length": len(response),
                    "in_scope": True,
                    "diversity_info": self.diversity_manager.get_diversity_metrics()
                }
               
            except Exception as generation_error:
                logger.error(f"Response generation error: {generation_error}")
                # 오류 발생 시 안전한 폴백 응답
                response = self._generate_safe_fallback(user_query)
               
                return {
                    "query": user_query,
                    "response": response,
                    "generation_time": time.time() - start_time,
                    "model_info": {
                        "model_name": self.config.model_name,
                        "mode": "safe_fallback",
                        "error": str(generation_error)
                    },
                    "response_length": len(response),
                    "in_scope": True
                }
           
        except Exception as e:
            logger.error(f"Response generation error: {e}")
            return {
                "query": user_query,
                "response": f"시스템 처리 중 오류가 발생했습니다. 잠시 후 다시 시도해 주시거나, 질문을 다르게 표현해 주세요.",
                "error": True,
                "generation_time": time.time() - start_time
            }

    def _is_defense_related(self, query: str) -> bool:
        """개선된 방산 관련 질문 확인"""
        defense_keywords = [
            # 기본 방산 용어
            "방산", "미사일", "방어", "군사", "무기", "협력", "수출", "투자", "국방",
            "전투", "전쟁", "평화", "안보", "보안", "안전", "위협", "대응",
           
            # 국가/지역 - PDF에 있는 모든 국가 포함
            "인도", "UAE", "브라질", "중동", "동남아", "아프리카", "유럽", "미국",
            "인도네시아", "태국", "말레이시아", "남아프리카공화국", "이집트", "카타르",
            "모로코", "칠레", "아르헨티나", "콜롬비아", "나이지리아", "케냐", "가나",
            "폴란드", "체코", "에스토니아", "헝가리",
           
            # 기술 분야
            "기술이전", "사이버", "우주", "항공", "해양", "AI", "드론", "레이더",
            "자율", "로봇", "지휘체계", "C4ISR", "전자전", "법적", "윤리적",
            "공급망", "소부장", "양자", "사이버보안", "무인",
           
            # 비즈니스 관련
            "비즈니스", "모델", "ROI", "투자", "수익", "경쟁력", "전략", "우선순위",
            "규제", "환경", "리스크", "관리", "중소기업", "해외진출"
        ]
       
        query_lower = query.lower()
        return any(keyword in query_lower for keyword in defense_keywords)

    def _get_context_from_kb(self, query: str) -> str:
        """지식 베이스에서 관련 컨텍스트 추출"""
        context_parts = []
       
        # 국가별 정보 검색
        for country_name, profile in self.kb.countries.items():
            if country_name.lower() in query.lower():
                context_parts.append(f"""
{country_name} 관련 정보:
- 국방예산: {profile.defense_budget}
- 병력규모: {profile.military_personnel}
- 주요 방산기업: {', '.join(profile.defense_companies)}
- 전략적 중요도: {profile.strategic_importance}
""")
       
        return "\n".join(context_parts) if context_parts else "일반적인 방산 협력 전략 정보"

    def _generate_contextual_response(self, query: str, context: str) -> str:
        """컨텍스트 기반 응답 생성"""
        query_lower = query.lower()
       
        # 질문 유형별 맞춤 응답
        if any(word in query_lower for word in ["전략", "계획", "방안", "제안"]):
            return self._generate_strategy_response(query, context)
        elif any(word in query_lower for word in ["기술", "혁신", "발전", "변화"]):
            return self._generate_technology_response(query, context)
        elif any(word in query_lower for word in ["협력", "파트너십", "공동"]):
            return self._generate_cooperation_response(query, context)
        elif any(word in query_lower for word in ["법적", "윤리적", "쟁점", "문제"]):
            return self._generate_legal_ethics_response(query, context)
        else:
            return self._generate_general_response(query, context)

    def _generate_strategy_response(self, query: str, context: str) -> str:
        """전략 관련 응답 생성"""
        return f"""### 🎯 전략 분석: {query}

## 현황 및 배경
{context}

## 전략적 접근 방안
방산 협력 전략 수립 시 고려해야 할 핵심 요소들은 다음과 같습니다:

### 1. 시장 분석
- **시장 규모**: 해당 분야의 시장 잠재력 평가
- **경쟁 환경**: 주요 경쟁사 및 경쟁 제품 분석
- **성장 전망**: 향후 5-10년 시장 성장률 예측

### 2. 기술 역량 평가
- **핵심 기술**: 차별화 가능한 고유 기술 식별
- **기술 격차**: 목표 시장 대비 기술 수준 평가
- **R&D 투자**: 기술 개발을 위한 투자 계획

### 3. 협력 모델 설계
- **파트너십 구조**: 최적의 협력 구조 설계
- **리스크 분담**: 위험 요소 분석 및 분담 방안
- **수익 배분**: 공정한 수익 분배 체계

### 4. 실행 로드맵
- **단계별 계획**: 3-5년 단위 실행 계획
- **마일스톤**: 주요 성과 지표 및 평가 기준
- **모니터링**: 진행 상황 추적 및 조정 방안

## 성공 요인
이 전략의 성공을 위해서는 정부 차원의 지원, 민간 기업의 적극적 참여, 그리고 장기적 관점에서의 지속적 투자가 필요합니다.

더 구체적인 세부 전략이나 특정 분야별 접근 방안이 필요하시면 추가로 문의해 주세요."""

    def _generate_technology_response(self, query: str, context: str) -> str:
        """기술 관련 응답 생성"""
        return f"""### 🔬 기술 분석: {query}

## 기술 현황
{context}

## 기술 발전 동향
현재 방산 분야의 기술 발전은 다음과 같은 방향으로 진행되고 있습니다:

### 1. 디지털 변환
- **AI/ML 융합**: 인공지능과 머신러닝의 방산 적용 확대
- **빅데이터 활용**: 대용량 데이터 분석을 통한 의사결정 지원
- **IoT 연결성**: 모든 무기체계의 네트워크 연결

### 2. 자율화 기술
- **무인 시스템**: 드론, 로봇의 자율 운용 능력 향상
- **자율 판단**: 인간 개입 최소화된 자율 의사결정
- **협업 체계**: 유인-무인 시스템 간 협업 최적화

### 3. 차세대 기술
- **양자 기술**: 양자 컴퓨팅, 양자 통신, 양자 센서
- **나노 기술**: 소재 혁신을 통한 성능 향상
- **바이오 기술**: 생체 모방 기술의 군사 응용

### 4. 융합 기술
- **민군 겸용**: 민간 기술의 군사 전용
- **다영역 융합**: 육해공우주사이버의 통합 운용
- **시너지 창출**: 이종 기술 간 융합을 통한 새로운 가치 창출

## 기술 개발 방향
이러한 기술 트렌드에 대응하기 위해서는 기초 연구부터 응용 개발까지 체계적인 접근이 필요하며, 국제 협력을 통한 기술 격차 해소가 중요합니다.

특정 기술 분야에 대한 더 상세한 분석이 필요하시면 언제든 문의해 주세요."""

    def _generate_cooperation_response(self, query: str, context: str) -> str:
        """협력 관련 응답 생성"""
        return f"""### 🤝 협력 방안: {query}

## 협력 배경
{context}

## 협력 체계 구축 방안
효과적인 방산 협력을 위한 체계적 접근 방안을 제시합니다:

### 1. 협력 기반 구축
- **정부 간 협정**: MOU, 기술협정, 상호방위협정
- **민간 파트너십**: 기업 간 전략적 제휴
- **학술 교류**: 연구기관 간 공동 연구

### 2. 협력 분야 선정
- **상호 보완성**: 양국의 강점 분야 결합
- **시장 잠재력**: 제3국 수출 가능성 평가
- **기술 시너지**: 기술 융합을 통한 혁신 창출

### 3. 협력 모델 설계
- **공동 개발**: 위험과 비용 분담, 성과 공유
- **기술 이전**: 단계적 기술 이전 및 현지화
- **상호 투자**: 교차 투자를 통한 이해관계 일치

### 4. 위험 관리
- **정치적 리스크**: 정권 교체, 정책 변화에 대한 대비
- **경제적 리스크**: 환율 변동, 시장 변화 대응
- **기술적 리스크**: 개발 실패, 기술 유출 방지

### 5. 성과 측정
- **KPI 설정**: 명확한 성과 지표 및 목표 설정
- **정기 평가**: 주기적 성과 점검 및 개선
- **지속 발전**: 협력 관계의 지속적 발전 방안

## 성공 전략
협력의 성공을 위해서는 상호 신뢰 구축이 가장 중요하며, 이를 위해 투명한 정보 공유와 공정한 이익 분배가 필수적입니다.

구체적인 협력 파트너나 분야별 세부 방안에 대해서는 추가로 상담해 드릴 수 있습니다."""

    def _generate_legal_ethics_response(self, query: str, context: str) -> str:
        """법적/윤리적 쟁점 관련 응답 생성"""
        return f"""### ⚖️ 법적·윤리적 고려사항: {query}

## 현안 분석
{context}

## 주요 법적 쟁점
방산 분야의 법적·윤리적 이슈는 다음과 같이 구분하여 접근해야 합니다:

### 1. 국제법적 측면
- **국제인도법**: 제네바 협약 및 추가의정서 준수
- **군비통제조약**: 각종 군비통제 협정 준수 의무
- **수출통제**: MTCR, 바세나르협정 등 다자간 수출통제체제

### 2. 국내법적 측면
- **방산업법**: 방산업체 허가 및 관리
- **기술보호법**: 국가핵심기술 보호 및 관리
- **수출관리법**: 전략물자 수출 허가 및 통제

### 3. 윤리적 고려사항
- **인권 보호**: 무기 사용으로 인한 인권 침해 방지
- **환경 보호**: 무기 개발 및 사용의 환경 영향 최소화
- **사회적 책임**: 방산업체의 사회적 책임 이행

### 4. 신기술 관련 이슈
- **AI 윤리**: 자율무기시스템의 윤리적 사용
- **사이버 윤리**: 사이버 무기의 사용 한계
- **데이터 보호**: 군사 정보의 보안 및 개인정보 보호

## 대응 방안
### 법적 준수 체계
- **컴플라이언스 시스템**: 법규 준수 관리 체계 구축
- **위험 평가**: 법적 리스크 사전 평가 및 대응
- **전문가 자문**: 법무 전문가 및 윤리 위원회 운영

### 윤리 경영
- **윤리 강령**: 명확한 윤리 기준 수립 및 준수
- **투명성**: 의사결정 과정의 투명성 확보
- **책임성**: 결과에 대한 명확한 책임 소재

## 미래 과제
기술 발전에 따른 새로운 법적·윤리적 이슈들에 대해서는 국제사회와의 협력을 통한 새로운 규범 수립이 필요합니다.

특정 법적 쟁점이나 윤리적 딜레마에 대한 더 자세한 분석이 필요하시면 전문가 자문을 통해 도움을 드릴 수 있습니다."""

    def _generate_general_response(self, query: str, context: str) -> str:
        """일반적인 방산 관련 응답 생성"""
        return f"""### 📋 방산 분야 분석: {query}

## 관련 정보
{context}

## 종합 분석
요청하신 방산 관련 사안에 대한 종합적인 분석을 제공해드립니다.

### 현황 분석
- **글로벌 트렌드**: 세계 방산 시장의 주요 동향
- **기술 발전**: 신기술의 방산 적용 현황
- **정책 환경**: 각국의 방산 정책 변화

### 주요 고려사항
- **전략적 중요성**: 국가 안보 및 산업 발전 측면
- **경제적 효과**: 수출 증대 및 고용 창출 효과
- **기술적 파급효과**: 민간 부문으로의 기술 이전

### 향후 전망
- **단기 전망**: 1-3년 내 예상되는 변화
- **중기 전망**: 3-7년 내 구조적 변화
- **장기 전망**: 10년 이후 패러다임 변화

### 권고사항
1. **체계적 접근**: 단계별 추진 계획 수립
2. **리스크 관리**: 잠재적 위험 요소 사전 대비
3. **국제 협력**: 다자간 협력 체계 구축
4. **혁신 투자**: 지속적 R&D 투자 확대

## 결론
방산 분야는 국가 안보와 직결되는 중요한 영역으로, 체계적이고 장기적인 관점에서의 접근이 필요합니다.

더 구체적인 분야별 분석이나 세부 사항에 대해서는 추가로 문의해 주시면 상세한 정보를 제공해드리겠습니다."""

    def _generate_safe_fallback(self, query: str) -> str:
        """안전한 폴백 응답"""
        return f"""### 🔍 방산 분야 문의사항

죄송합니다. 질문 "{query}"에 대한 구체적인 답변을 생성하는 중 일시적인 처리 지연이 발생했습니다.

## 일반적인 방산 협력 정보
- **시장 규모**: 글로벌 방산 시장 5,500억 달러 (2024년)
- **성장률**: 연평균 4.2% 성장
- **주요 트렌드**: AI, 무인화, 네트워크 중심 전쟁

## 추천 접근 방향
1. 질문을 더 구체적으로 표현해 주세요
2. 특정 국가나 기술 분야를 명시해 주세요
3. 잠시 후 다시 시도해 주세요

## 관련 질문 예시
- "인도와의 미사일 협력 방안은?"
- "UAE 방산 투자 현황은?"
- "AI 기반 방어시스템 동향은?"

더 정확한 답변을 위해 질문을 다시 정리해서 문의해 주시면 감사하겠습니다."""

    def _enhance_response_diversity(self, response: str, query: str) -> str:
        """응답 다양성 강화"""
        # 간단한 문장 순서 변경이나 표현 다양화
        if "## " in response:
            parts = response.split("## ")
            if len(parts) > 3:
                # 섹션 순서를 약간 변경
                header = parts[0]
                sections = parts[1:]
                random.shuffle(sections)
                return header + "## " + "## ".join(sections)
       
        return response

    def _generate_real_response(self, query: str, context: str) -> str:
        """실제 모델을 사용한 응답 생성"""
        try:
            prompt = f"""방산 협력 전략에 관한 질문에 답변해주세요.

배경: {context}
질문: {query}

다음 형식으로 상세하고 전문적인 답변을 제공해주세요:
- 현황 분석
- 주요 쟁점
- 구체적 방안
- 기대 효과

답변:"""
           
            inputs = self.tokenizer(
                prompt,
                return_tensors="pt",
                max_length=512,
                truncation=True,
                padding=True
            )
           
            with torch.no_grad():
                if "t5" in self.config.model_name.lower():
                    outputs = self.model.generate(
                        input_ids=inputs['input_ids'],
                        attention_mask=inputs['attention_mask'],
                        max_new_tokens=self.config.max_tokens,
                        temperature=self.config.temperature,
                        do_sample=self.config.do_sample,
                        top_p=self.config.top_p,
                        pad_token_id=self.tokenizer.pad_token_id,
                        eos_token_id=self.tokenizer.eos_token_id
                    )
                    response = self.tokenizer.decode(outputs[0], skip_special_tokens=True)
                else:
                    outputs = self.model.generate(
                        input_ids=inputs['input_ids'],
                        attention_mask=inputs['attention_mask'],
                        max_new_tokens=self.config.max_tokens,
                        temperature=self.config.temperature,
                        do_sample=self.config.do_sample,
                        top_p=self.config.top_p,
                        pad_token_id=self.tokenizer.pad_token_id,
                        eos_token_id=self.tokenizer.eos_token_id
                    )
                    response_tokens = outputs[0][inputs['input_ids'].shape[1]:]
                    response = self.tokenizer.decode(response_tokens, skip_special_tokens=True)
           
            # 응답 검증 및 보완
            if len(response.strip()) < 50:
                return self._generate_contextual_response(query, context)
           
            return response.strip()
               
        except Exception as e:
            logger.error(f"Real model response failed: {e}")
            return self._generate_contextual_response(query, context)

    def _generate_fallback_response(self, query: str, context: str) -> str:
        """개선된 폴백 응답"""
        return self._generate_contextual_response(query, context)

    def get_diversity_stats(self) -> Dict:
        """다양성 통계 조회"""
        return self.diversity_manager.get_diversity_metrics()

    def reset_diversity_tracking(self):
        """다양성 추적 초기화"""
        self.diversity_manager.response_history = []
        self.diversity_manager.rejected_responses = []
        self.used_templates = []
        logger.info("Diversity tracking reset")
   
    def get_available_questions(self) -> List[str]:
        """사용 가능한 PDF 질문 목록 조회 (디버깅용)"""
        return self.pdf_qa_database.get_all_questions()

# 사용 예시 및 테스트
if __name__ == "__main__":
    print("🎯 PDF 데이터 완전 통합 방산 협력 LLM 시스템")
    print("✅ 20개 질문-답변 완전 로드")
    print("✅ 정확한 패턴 매칭")
    print("✅ 개선된 응답 생성")
    print("✅ 안정적인 오류 처리")
   
    # 테스트용 데이터베이스 확인
    pdf_db = CompletePDFQuestionAnswerDatabase()
    print(f"\n📊 로드된 질문 수: {len(pdf_db.qa_database)}")
    print("\n📋 사용 가능한 질문 예시:")
    for i, qa in enumerate(pdf_db.qa_database[:5], 1):
        print(f"  {i}. {qa['question']}")
    print("  ...")