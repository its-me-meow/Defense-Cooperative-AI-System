print("🤖 방산 협력 전략 AI 어시스턴트 (테스트 모드)")
print("=" * 50)

try:
    # 단계별 테스트
    print("1️⃣ 지식베이스 테스트...")
    from src.data_structure import build_knowledge_base
    kb = build_knowledge_base()
    print(f"✅ 지식베이스 구축 성공! ({len(kb.countries)}개국)")
    
    print("\n2️⃣ 프롬프트 엔지니어 테스트...")
    from src.prompt_engineering import create_comprehensive_prompt_system
    prompt_engineer = create_comprehensive_prompt_system(kb)
    print("✅ 프롬프트 엔지니어 생성 성공!")
    
    print("\n3️⃣ 더미 응답 생성 테스트...")
    
    def generate_smart_dummy_response(query):
        """더미 응답 생성 함수"""
        if "인도" in query:
            return """### 📊 핵심 분석
- 인도는 BrahMos 초음속 미사일로 유도시스템 분야 고도 기술 보유
- 한국은 현무 시리즈로 고체추진체 기술 세계 수준 달성
- 양국 기술 결합 시 성능 15-20% 향상, 개발기간 30% 단축 가능
- 인도 국방예산 730억 달러로 충분한 투자 여력 보유

### 🎯 전략적 제언
**단기전략 (1-2년)**
- 한-인도 미사일기술협력 공동위원회 설치
- 현무-BrahMos 기술통합 가능성 연구 착수
- 투자규모: 3억 달러 (한국 1.8억, 인도 1.2억)

**중기전략 (3-5년)**  
- 현무-인도 합동미사일 프로토타입 개발
- 시험발사 및 성능검증 단계
- 투자규모: 8억 달러 (한국 4억, 인도 4억)

### 📈 기대효과 및 리스크
**기대효과**
- 직접 수출수익: 10년간 40억 달러 예상
- 기술파급효과: 미사일 기술수준 5-7% 향상
- 고용창출: 직간접 8,000명

**주요 리스크**
- 인도의 복잡한 관료주의로 인한 의사결정 지연
- 러시아 무기체계와의 호환성 요구 증가

*[AI 더미 응답 - 실제 모델 연결 시 더욱 정교해집니다]*"""
        
        elif "UAE" in query:
            return """### 📊 핵심 분석
- UAE 국방예산 220억 달러, 2024-28년 국방현대화에 430억 달러 투자계획
- 천궁-II 수출계약(38억 달러) 성공으로 신뢰관계 구축 완료
- EDGE Group과의 협력을 통한 현지 생산/기술이전 모델 확립 가능

### 🎯 전략적 제언
**투자 규모 (10년간)**
- 총 투자: 2.4조원, 예상 ROI: 321%
- 사막환경 최적화 통합 방공시스템 공동 개발
- 아부다비에 한-UAE 국방기술협력센터 설립

### 📈 기대효과 및 리스크  
**기대효과**
- 직접 수출수익: 6.5조원 (10년 누적)
- 기술료 수입: 1.2조원 
- 고용창출: 12,000명

**주요 리스크**
- 미국/서방 무기체계 호환성 요구로 인한 제약
- 중동 지역 정세 불안정성

*[AI 더미 응답 - 실제 모델 연결 시 더욱 정교해집니다]*"""
        
        elif "브라질" in query:
            return """### 📊 핵심 분석
- 브라질 국방예산 290억 달러 (남미 최대)
- Embraer의 뛰어난 항공기 설계 능력과 한국의 전자장비 기술 상호보완성
- 남미 시장 주도권 확보를 위한 지역 협력 강화 추진

### 🎯 전략적 제언
**공동개발 프로젝트**
- KF/E 공동개발 훈련기: Embraer 설계 + 한국 전자장비
- 중형 해상초계기 공동 개발
- 무인감시기 아마존 국경감시용 개발

### 📈 기대효과 및 리스크
**기대효과**
- 10년간 약 60억 달러 수출 예상
- 남미 시장 진출 기반 마련
- 항공우주 기술 역량 향상

**주요 리스크**
- 행정적 복잡성과 의사결정 지연
- 예산 불안정성으로 인한 장기 프로젝트 위험

*[AI 더미 응답 - 실제 모델 연결 시 더욱 정교해집니다]*"""
        
        else:
            return """### 📊 핵심 분석
- 비NATO 국가와의 방산 협력은 한국 방산 수출 다변화의 핵심 전략
- 상호보완적 기술 협력을 통한 윈-윈 모델 구축 가능
- 글로벌 방산시장 성장률 4.2%로 지속적 확대 전망

### 🎯 전략적 제언
- 국가별 맞춤형 협력 전략 수립
- 기술이전과 공동개발을 통한 장기적 파트너십 구축
- 제3국 공동 수출을 위한 전략적 제휴

### 📈 기대효과 및 리스크
**기대효과**: 방산 수출 다변화 및 기술 역량 강화
**주요 리스크**: 정치적 변동 및 기술 통제 이슈

*[AI 더미 응답 - 실제 모델 연결 시 더욱 정교해집니다]*"""
    
    test_questions = [
        "인도와의 미사일 기술 협력 전략은?",
        "UAE 투자 규모는 어느 정도인가요?",  
        "브라질과 항공우주 협력이 가능한가요?",
        "비NATO 국가 중 우선 협력 대상은?"
    ]
    
    for i, question in enumerate(test_questions, 1):
        print(f"\n🔍 테스트 {i}: {question}")
        print("-" * 60)
        
        response = generate_smart_dummy_response(question)
        print(response)
        print(f"⏱ 응답 생성 완료 (더미 모드)")
    
    print("\n" + "="*60)
    print("🎉 전체 시스템 테스트 완료!")
    print("✅ 지식베이스, 프롬프트 엔지니어링, 응답 생성 모든 기능 정상 작동")
    print("🔄 실제 Llama 모델 연결 시 더욱 정교한 응답 제공")
    
except Exception as e:
    print(f"❌ 오류: {e}")
    import traceback
    traceback.print_exc()